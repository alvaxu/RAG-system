# M10-è¡¨æ ¼å¤„ç†æ¨¡å—è¯¦ç»†è®¾è®¡æ–‡æ¡£

## ä¸€ã€æ–‡æ¡£åŸºç¡€ä¿¡æ¯

| æ¨¡å—åç§° | M10-è¡¨æ ¼å¤„ç†æ¨¡å— | æ‰€å±é¡¹ç›® | V3ç‰ˆæœ¬å‘é‡æ•°æ®åº“æ„å»ºç³»ç»Ÿ |
| -------- | ---------------- | -------- | ----------------------- |
| æ–‡æ¡£ç‰ˆæœ¬ | V1.0 | æ–‡æ¡£çŠ¶æ€ | â˜‘ è‰ç¨¿ â–¡ è¯„å®¡ä¸­ â–¡ å·²ç¡®è®¤ â–¡ å·²å½’æ¡£ |
| ç¼–å†™äºº   | AIåŠ©æ‰‹ | ç¼–å†™æ—¥æœŸ | 2024å¹´12æœˆ |
| å…³è”æ–‡æ¡£ | ã€ŠV3ç‰ˆæœ¬å‘é‡æ•°æ®åº“æ„å»ºç³»ç»Ÿç®€è¦è®¾è®¡æ–‡æ¡£ã€‹ã€ŠM03-å‘é‡åŒ–ç®¡ç†æ¨¡å—è¯¦ç»†è®¾è®¡æ–‡æ¡£ã€‹ | | |

## äºŒã€æ¨¡å—æ¦‚è¿°

### 1. å®šä½ä¸ç›®æ ‡

ä½œä¸ºç³»ç»Ÿ**è¡¨æ ¼å‘é‡åŒ–ä¸“ç”¨æ¨¡å—**ï¼ŒTableVectorizeræ‰¿æ‹…è¡¨æ ¼å†…å®¹çš„é¢„å¤„ç†ã€å‘é‡åŒ–å’Œè´¨é‡è¯„ä¼°èŒè´£ï¼Œé€šè¿‡ModelCallerè°ƒç”¨æ–‡æœ¬åµŒå…¥æ¨¡å‹ï¼Œæ”¯æŒæ‰¹é‡å¤„ç†å’ŒAPIé™æµï¼Œä¸ºæ•´ä¸ªV3ç³»ç»Ÿæä¾›é«˜æ•ˆã€å¯é çš„è¡¨æ ¼å‘é‡åŒ–æœåŠ¡ã€‚

### 2. ä¾èµ–ä¸äº¤äº’

| å…³è”æ¨¡å— | äº¤äº’æ–¹å‘ | æ ¸å¿ƒäº¤äº’å†…å®¹ |
| -------- | -------- | ------------ |
| ConfigManager | ä¾èµ– | é…ç½®åŠ è½½ã€å‚æ•°è·å–ã€å¤±è´¥å¤„ç† |
| ModelCaller | è°ƒç”¨ | æ–‡æœ¬åµŒå…¥æ¨¡å‹è°ƒç”¨ã€APIè¯·æ±‚å¤„ç† |
| FailureHandler | è°ƒç”¨ | å¤±è´¥è®°å½•ã€é”™è¯¯å¤„ç†ã€é‡è¯•ç®¡ç† |
| VectorizationManager | è¢«è°ƒç”¨ | è¡¨æ ¼å‘é‡åŒ–ã€æ‰¹é‡å¤„ç†ã€çŠ¶æ€æŸ¥è¯¢ |

## ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½è®¾è®¡

### 1. åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ID | åŠŸèƒ½åç§° | æ ¸å¿ƒæè¿° | æ“ä½œè§’è‰² | å‰ç½®æ¡ä»¶ |
| ------- | -------- | -------- | -------- | -------- |
| FM01 | è¡¨æ ¼å†…å®¹é¢„å¤„ç† | è¡¨æ ¼å†…å®¹æ¸…ç†ã€é•¿åº¦æ§åˆ¶ã€ç‰¹æ®Šå­—ç¬¦å¤„ç†ã€ç»“æ„åˆ†æ | è¡¨æ ¼è¾“å…¥ | è¡¨æ ¼å†…å®¹å­˜åœ¨ |
| FM02 | å•è¡¨æ ¼å‘é‡åŒ– | è°ƒç”¨æ–‡æœ¬åµŒå…¥æ¨¡å‹ç”Ÿæˆè¡¨æ ¼å‘é‡ï¼Œç”Ÿæˆå®Œæ•´å…ƒæ•°æ® | å•ä¸ªå¤„ç† | é¢„å¤„ç†å®Œæˆã€æ¨¡å‹å¯ç”¨ |
| FM03 | æ‰¹é‡è¡¨æ ¼å‘é‡åŒ– | æ”¯æŒæ‰¹é‡å¤„ç†ï¼ŒAPIé™æµæ§åˆ¶ï¼Œè¿›åº¦è·Ÿè¸ª | æ‰¹é‡å¤„ç† | è¡¨æ ¼åˆ—è¡¨å®Œæ•´ |
| FM04 | å‘é‡è´¨é‡è¯„ä¼° | è¯„ä¼°å‘é‡ç»´åº¦ã€æ•°å€¼èŒƒå›´ã€é›¶å€¼æ¯”ä¾‹ç­‰è´¨é‡æŒ‡æ ‡ | è´¨é‡æ§åˆ¶ | å‘é‡ç”Ÿæˆå®Œæˆ |
| FM05 | è¡¨æ ¼ç‰¹å¾åˆ†æ | åˆ†æå­—ç¬¦ç»Ÿè®¡ã€ç»“æ„ç»Ÿè®¡ã€è¡¨æ ¼ç‰¹å¾ã€åˆ†éš”ç¬¦ä¿¡æ¯ | å†…å®¹åˆ†æ | è¡¨æ ¼å†…å®¹å®Œæ•´ |
| FM06 | ç»“æœéªŒè¯ | éªŒè¯å‘é‡åŒ–ç»“æœçš„å®Œæ•´æ€§å’Œæœ‰æ•ˆæ€§ | ç»“æœæ£€æŸ¥ | å‘é‡åŒ–ç»“æœå­˜åœ¨ |
| FM07 | ç»Ÿè®¡ä¿¡æ¯æ”¶é›† | æ”¶é›†å¤„ç†ç»Ÿè®¡ã€è´¨é‡ç»Ÿè®¡ã€æ€§èƒ½ç»Ÿè®¡ç­‰ä¿¡æ¯ | ç³»ç»ŸæŠ¥å‘Š | å¤„ç†æ“ä½œå®Œæˆ |
| FM08 | é”™è¯¯å¤„ç† | ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œå¤±è´¥è®°å½•æœºåˆ¶ | ç³»ç»Ÿè‡ªåŠ¨ | å¤±è´¥å¤„ç†å™¨å¯ç”¨ |
| FM09 | APIé™æµç®¡ç† | æ‰¹é‡å¤§å°æ§åˆ¶ã€å»¶è¿Ÿæ§åˆ¶ã€è¿›åº¦ç›‘æ§ | ç³»ç»Ÿè‡ªåŠ¨ | é…ç½®å‚æ•°æ­£ç¡® |
| FM10 | å¤§è¡¨åˆ†è¡¨å¤„ç† | æ™ºèƒ½è¯†åˆ«å¤§è¡¨ï¼ŒæŒ‰è¡Œæ•°ã€åˆ—æ•°ã€å†…å®¹å¤æ‚åº¦è¿›è¡Œåˆ†è¡¨ | ç³»ç»Ÿè‡ªåŠ¨ | è¡¨æ ¼å†…å®¹åˆ†æå®Œæˆ |
| FM11 | å°è¡¨åˆå¹¶ç­–ç•¥ | è¯†åˆ«è¯­ä¹‰ç›¸å…³çš„å°è¡¨ï¼Œåˆ¶å®šåˆå¹¶ç­–ç•¥ | ç³»ç»Ÿè‡ªåŠ¨ | è¡¨æ ¼ç‰¹å¾åˆ†æå®Œæˆ |
| FM12 | åˆ†è¡¨å‘é‡åŒ– | å¯¹åˆ†è¡¨åçš„å­è¡¨è¿›è¡Œç‹¬ç«‹å‘é‡åŒ–ï¼Œä¿æŒè¯­ä¹‰å®Œæ•´æ€§ | ç³»ç»Ÿè‡ªåŠ¨ | åˆ†è¡¨ç­–ç•¥ç¡®å®š |
| FM13 | åˆå¹¶è¡¨é‡æ„ | å°†ç›¸å…³å°è¡¨åˆå¹¶ä¸ºè¯­ä¹‰å®Œæ•´çš„è¡¨æ ¼ï¼Œé‡æ–°å‘é‡åŒ– | ç³»ç»Ÿè‡ªåŠ¨ | åˆå¹¶ç­–ç•¥ç¡®å®š |

### 2. å…³é”®åŠŸèƒ½æµç¨‹ï¼ˆè¡¨æ ¼å‘é‡åŒ–ä¸ºä¾‹ï¼‰

1. æ¥æ”¶è¡¨æ ¼å†…å®¹å’Œå…ƒæ•°æ®ï¼›
2. è¡¨æ ¼å†…å®¹é¢„å¤„ç†ï¼ˆæ¸…ç†ã€é•¿åº¦æ§åˆ¶ã€ç‰¹æ®Šå­—ç¬¦å¤„ç†ï¼‰ï¼›
3. è°ƒç”¨ModelCallerè¿›è¡Œè¡¨æ ¼å‘é‡åŒ–ï¼›
4. ç”Ÿæˆå‘é‡åŒ–å…ƒæ•°æ®ï¼ˆè´¨é‡è¯„ä¼°ã€ç‰¹å¾åˆ†æï¼‰ï¼›
5. æ•´åˆå‘é‡åŒ–ç»“æœå’Œå…ƒæ•°æ®ï¼›
6. è¿”å›å®Œæ•´çš„å‘é‡åŒ–ç»“æœã€‚

### 3. å¤§è¡¨åˆ†è¡¨å¤„ç†æµç¨‹

1. **å¤§è¡¨è¯†åˆ«**ï¼šåŸºäºè¡Œæ•°ã€åˆ—æ•°ã€å†…å®¹å¤æ‚åº¦ç­‰æŒ‡æ ‡è¯†åˆ«éœ€è¦åˆ†è¡¨çš„å¤§è¡¨ï¼›
2. **åˆ†è¡¨ç­–ç•¥åˆ¶å®š**ï¼šæ ¹æ®è¡¨æ ¼ç»“æ„å’Œè¯­ä¹‰å†…å®¹ç¡®å®šåˆ†è¡¨ç­–ç•¥ï¼›
3. **åˆ†è¡¨æ‰§è¡Œ**ï¼šæŒ‰ç­–ç•¥å°†å¤§è¡¨åˆ†å‰²ä¸ºå¤šä¸ªè¯­ä¹‰å®Œæ•´çš„å­è¡¨ï¼›
4. **å­è¡¨å‘é‡åŒ–**ï¼šå¯¹æ¯ä¸ªå­è¡¨è¿›è¡Œç‹¬ç«‹å‘é‡åŒ–ï¼Œä¿æŒè¯­ä¹‰å®Œæ•´æ€§ï¼›
5. **åˆ†è¡¨å…ƒæ•°æ®ç®¡ç†**ï¼šè®°å½•åˆ†è¡¨å…³ç³»ï¼Œç»´æŠ¤å­è¡¨é—´çš„å…³è”ä¿¡æ¯ã€‚

### 4. å°è¡¨åˆå¹¶å¤„ç†æµç¨‹

1. **å°è¡¨è¯†åˆ«**ï¼šè¯†åˆ«è¡Œæ•°å°‘ã€å†…å®¹ç®€å•çš„å°è¡¨ï¼›
2. **è¯­ä¹‰ç›¸å…³æ€§åˆ†æ**ï¼šåˆ†æå°è¡¨é—´çš„è¯­ä¹‰å…³è”æ€§å’Œä¸»é¢˜ä¸€è‡´æ€§ï¼›
3. **åˆå¹¶ç­–ç•¥åˆ¶å®š**ï¼šåŸºäºè¯­ä¹‰ç›¸å…³æ€§åˆ¶å®šåˆå¹¶ç­–ç•¥ï¼›
4. **åˆå¹¶è¡¨é‡æ„**ï¼šå°†ç›¸å…³å°è¡¨åˆå¹¶ä¸ºè¯­ä¹‰å®Œæ•´çš„è¡¨æ ¼ï¼›
5. **åˆå¹¶è¡¨å‘é‡åŒ–**ï¼šå¯¹åˆå¹¶åçš„è¡¨æ ¼é‡æ–°è¿›è¡Œå‘é‡åŒ–å¤„ç†ã€‚

## å››ã€æ ¸å¿ƒå‡½æ•°è®¾è®¡ä¸è°ƒç”¨å…³ç³»

### 1. å‡½æ•°æ¸…å•

| å‡½æ•°å | åŠŸèƒ½æè¿° | è¾“å…¥å‚æ•° | è¿”å›ç»“æœ | æ‰€å±æœåŠ¡ |
| ------ | -------- | -------- | -------- | -------- |
| `__init__(config_manager)` | è¡¨æ ¼å‘é‡åŒ–å™¨åˆå§‹åŒ– | é…ç½®ç®¡ç†å™¨å®ä¾‹ | æ—  | TableVectorizer |
| `vectorize(table_content, metadata)` | å•è¡¨æ ¼å‘é‡åŒ– | è¡¨æ ¼å†…å®¹ã€å…ƒæ•°æ® | å‘é‡åŒ–ç»“æœå­—å…¸ | TableVectorizer |
| `_preprocess_table_content(table_content)` | è¡¨æ ¼å†…å®¹é¢„å¤„ç† | åŸå§‹è¡¨æ ¼å†…å®¹ | é¢„å¤„ç†åçš„å†…å®¹ | TableVectorizer |
| `_call_text_embedding_model(processed_content)` | è°ƒç”¨å‘é‡åŒ–æ¨¡å‹ | é¢„å¤„ç†åçš„å†…å®¹ | è¡¨æ ¼å‘é‡åˆ—è¡¨ | TableVectorizer |
| `_generate_vectorization_metadata(table_embedding, processed_content, metadata)` | ç”Ÿæˆå‘é‡åŒ–å…ƒæ•°æ® | å‘é‡ã€å†…å®¹ã€å…ƒæ•°æ® | å…ƒæ•°æ®å­—å…¸ | TableVectorizer |
| `_assess_vector_quality(vector)` | è¯„ä¼°å‘é‡è´¨é‡ | å‘é‡åˆ—è¡¨ | è´¨é‡è¯„ä¼°å­—å…¸ | TableVectorizer |
| `_analyze_table_features(content)` | åˆ†æè¡¨æ ¼ç‰¹å¾ | è¡¨æ ¼å†…å®¹ | ç‰¹å¾åˆ†æå­—å…¸ | TableVectorizer |
| `_create_error_vectorization_result(error_message)` | åˆ›å»ºé”™è¯¯ç»“æœ | é”™è¯¯æ¶ˆæ¯ | é”™è¯¯ç»“æœå­—å…¸ | TableVectorizer |
| `vectorize_batch(tables)` | æ‰¹é‡è¡¨æ ¼å‘é‡åŒ– | è¡¨æ ¼é¡¹åˆ—è¡¨ | å‘é‡åŒ–ç»“æœåˆ—è¡¨ | TableVectorizer |
| `get_vectorization_status()` | è·å–å‘é‡åŒ–çŠ¶æ€ | æ—  | çŠ¶æ€ä¿¡æ¯å­—å…¸ | TableVectorizer |
| `get_model_info()` | è·å–æ¨¡å‹ä¿¡æ¯ | æ—  | æ¨¡å‹ä¿¡æ¯å­—å…¸ | TableVectorizer |
| `validate_vectorization_result(result)` | éªŒè¯å‘é‡åŒ–ç»“æœ | ç»“æœå­—å…¸ | éªŒè¯ç»“æœå­—å…¸ | TableVectorizer |
| `get_vectorization_statistics(results)` | è·å–ç»Ÿè®¡ä¿¡æ¯ | ç»“æœåˆ—è¡¨ | ç»Ÿè®¡ä¿¡æ¯å­—å…¸ | TableVectorizer |
| `_identify_large_tables(tables, threshold)` | è¯†åˆ«å¤§è¡¨ | è¡¨æ ¼åˆ—è¡¨ã€é˜ˆå€¼ | å¤§è¡¨æ ‡è¯†åˆ—è¡¨ | TableVectorizer |
| `_create_table_splitting_strategy(table_content, features)` | åˆ¶å®šåˆ†è¡¨ç­–ç•¥ | è¡¨æ ¼å†…å®¹ã€ç‰¹å¾ | åˆ†è¡¨ç­–ç•¥å­—å…¸ | TableVectorizer |
| `_split_large_table(table_content, strategy)` | æ‰§è¡Œå¤§è¡¨åˆ†è¡¨ | è¡¨æ ¼å†…å®¹ã€ç­–ç•¥ | å­è¡¨åˆ—è¡¨ | TableVectorizer |
| `_identify_small_tables(tables, threshold)` | è¯†åˆ«å°è¡¨ | è¡¨æ ¼åˆ—è¡¨ã€é˜ˆå€¼ | å°è¡¨æ ‡è¯†åˆ—è¡¨ | TableVectorizer |
| `_analyze_semantic_correlation(small_tables)` | åˆ†æè¯­ä¹‰ç›¸å…³æ€§ | å°è¡¨åˆ—è¡¨ | ç›¸å…³æ€§çŸ©é˜µ | TableVectorizer |
| `_create_merging_strategy(small_tables, correlation_matrix)` | åˆ¶å®šåˆå¹¶ç­–ç•¥ | å°è¡¨åˆ—è¡¨ã€ç›¸å…³æ€§ | åˆå¹¶ç­–ç•¥å­—å…¸ | TableVectorizer |
| `_merge_small_tables(small_tables, strategy)` | æ‰§è¡Œå°è¡¨åˆå¹¶ | å°è¡¨åˆ—è¡¨ã€ç­–ç•¥ | åˆå¹¶è¡¨åˆ—è¡¨ | TableVectorizer |
| `_manage_split_merge_metadata(split_info, merge_info)` | ç®¡ç†åˆ†è¡¨åˆå¹¶å…ƒæ•°æ® | åˆ†è¡¨ä¿¡æ¯ã€åˆå¹¶ä¿¡æ¯ | å…ƒæ•°æ®å­—å…¸ | TableVectorizer |

### 2. å…³é”®è°ƒç”¨æµç¨‹

```
è¡¨æ ¼è¾“å…¥ â†’ é¢„å¤„ç† â†’ æ¨¡å‹è°ƒç”¨ â†’ å‘é‡ç”Ÿæˆ â†’ è´¨é‡è¯„ä¼° â†’ ç‰¹å¾åˆ†æ â†’ å…ƒæ•°æ®ç”Ÿæˆ â†’ ç»“æœæ•´åˆ
    â†“
vectorize() â†’ _preprocess_table_content() â†’ _call_text_embedding_model()
    â†“
ModelCaller.call_text_embedding() â†’ è¿”å›å‘é‡
    â†“
_assess_vector_quality() â†’ _analyze_table_features() â†’ _generate_vectorization_metadata()
    â†“
ç»“æœæ•´åˆ â†’ è¿”å›å‘é‡åŒ–ç»“æœ
```

### 3. å¤§è¡¨åˆ†è¡¨å¤„ç†æµç¨‹

```
å¤§è¡¨è¯†åˆ« â†’ åˆ†è¡¨ç­–ç•¥åˆ¶å®š â†’ åˆ†è¡¨æ‰§è¡Œ â†’ å­è¡¨å‘é‡åŒ– â†’ åˆ†è¡¨å…ƒæ•°æ®ç®¡ç†
    â†“
_identify_large_tables() â†’ _create_table_splitting_strategy() â†’ _split_large_table()
    â†“
å¯¹æ¯ä¸ªå­è¡¨è°ƒç”¨vectorize() â†’ _manage_split_merge_metadata()
    â†“
è¿”å›åˆ†è¡¨å¤„ç†ç»“æœå’Œå…³è”ä¿¡æ¯
```

### 4. å°è¡¨åˆå¹¶å¤„ç†æµç¨‹

```
å°è¡¨è¯†åˆ« â†’ è¯­ä¹‰ç›¸å…³æ€§åˆ†æ â†’ åˆå¹¶ç­–ç•¥åˆ¶å®š â†’ å°è¡¨åˆå¹¶ â†’ åˆå¹¶è¡¨å‘é‡åŒ–
    â†“
_identify_small_tables() â†’ _analyze_semantic_correlation() â†’ _create_merging_strategy()
    â†“
_merge_small_tables() â†’ å¯¹åˆå¹¶è¡¨è°ƒç”¨vectorize()
    â†“
è¿”å›åˆå¹¶å¤„ç†ç»“æœå’Œå…³è”ä¿¡æ¯
```

## äº”ã€æ•°æ®ç»“æ„è®¾è®¡

### 1. æ ¸å¿ƒæ•°æ®ç»“æ„

#### è¡¨æ ¼å‘é‡åŒ–ç»“æœå­—å…¸ï¼ˆtable_vectorization_resultï¼‰
```python
{
    'vectorization_status': 'success',        # å‘é‡åŒ–çŠ¶æ€
    'vectorization_timestamp': 1234567890,    # å‘é‡åŒ–æ—¶é—´æˆ³
    'table_embedding': [0.1, 0.2, ..., 0.3],  # è¡¨æ ¼å‘é‡ï¼ˆ1536ç»´ï¼‰
    'table_embedding_model': 'text-embedding-v1',  # ä½¿ç”¨çš„æ¨¡å‹
    'vectorization_metadata': {               # å‘é‡åŒ–å…ƒæ•°æ®
        'table_content_length': 2000,         # è¡¨æ ¼å†…å®¹é•¿åº¦
        'vector_dimensions': 1536,            # å‘é‡ç»´åº¦
        'vector_quality': {...},              # å‘é‡è´¨é‡è¯„ä¼°
        'table_features': {...},              # è¡¨æ ¼ç‰¹å¾åˆ†æ
        'embedding_model': 'text-embedding-v1',  # åµŒå…¥æ¨¡å‹
        'vectorization_timestamp': 1234567890,   # å‘é‡åŒ–æ—¶é—´æˆ³
        'original_metadata': {}               # åŸå§‹å…ƒæ•°æ®
    },
    'processing_metadata': {                  # å¤„ç†å…ƒæ•°æ®
        'vectorization_version': '3.0.0',     # ç‰ˆæœ¬ä¿¡æ¯
        'processing_pipeline': 'Table_Embedding_Pipeline',  # å¤„ç†ç®¡é“
        'optimization_features': [            # ä¼˜åŒ–ç‰¹æ€§
            'table_preprocessing',
            'batch_processing',
            'api_rate_limiting',
            'complete_metadata'
        ]
    }
}
```

#### è¡¨æ ¼ç‰¹å¾åˆ†æå­—å…¸ï¼ˆtable_feature_analysisï¼‰
```python
{
    'character_statistics': {                 # å­—ç¬¦ç»Ÿè®¡
        'total': 2000,                        # æ€»å­—ç¬¦æ•°
        'chinese': 1500,                      # ä¸­æ–‡å­—ç¬¦æ•°
        'english': 300,                       # è‹±æ–‡å­—ç¬¦æ•°
        'digits': 150,                        # æ•°å­—å­—ç¬¦æ•°
        'separators': 50                      # åˆ†éš”ç¬¦å­—ç¬¦æ•°
    },
    'structure_statistics': {                 # ç»“æ„ç»Ÿè®¡
        'total_lines': 25,                    # æ€»è¡Œæ•°
        'non_empty_lines': 23,                # éç©ºè¡Œæ•°
        'max_columns': 8,                     # æœ€å¤§åˆ—æ•°
        'fill_rate': 0.92                     # å¡«å……ç‡
    },
    'table_features': {                       # è¡¨æ ¼ç‰¹å¾
        'has_headers': True,                  # æ˜¯å¦æœ‰è¡¨å¤´
        'has_numbers': True,                  # æ˜¯å¦æœ‰æ•°å­—
        'has_separators': True,               # æ˜¯å¦æœ‰åˆ†éš”ç¬¦
        'is_structured': True                 # æ˜¯å¦ç»“æ„åŒ–
    }
}
```

#### å‘é‡è´¨é‡è¯„ä¼°å­—å…¸ï¼ˆvector_quality_assessmentï¼‰
```python
{
    'quality_score': 0.85,                   # è´¨é‡åˆ†æ•°ï¼ˆ0-1ï¼‰
    'quality_level': 'good',                 # è´¨é‡çº§åˆ«ï¼ˆexcellent/good/fair/poorï¼‰
    'issues': ['å‘é‡æ•°å€¼èŒƒå›´è¾ƒå°'],            # é—®é¢˜åˆ—è¡¨
    'dimensions': 1536,                      # å‘é‡ç»´åº¦
    'min_value': -0.5,                       # æœ€å°å€¼
    'max_value': 0.8,                        # æœ€å¤§å€¼
    'zero_ratio': 0.15                       # é›¶å€¼æ¯”ä¾‹
}
```

#### æ‰¹é‡å¤„ç†ç»“æœï¼ˆbatch_processing_resultï¼‰
```python
{
    'total_tables': 50,                      # æ€»è¡¨æ ¼æ•°
    'successful_vectorizations': 48,         # æˆåŠŸå‘é‡åŒ–æ•°
    'failed_vectorizations': 2,              # å¤±è´¥å‘é‡åŒ–æ•°
    'success_rate': 0.96,                    # æˆåŠŸç‡
    'vector_dimensions': {                   # å‘é‡ç»´åº¦ç»Ÿè®¡
        'count': 48,
        'min': 1536,
        'max': 1536,
        'average': 1536.0
    },
    'content_lengths': {                     # å†…å®¹é•¿åº¦ç»Ÿè®¡
        'count': 48,
        'min': 500,
        'max': 3000,
        'average': 1500.5
    },
    'quality_statistics': {                  # è´¨é‡ç»Ÿè®¡
        'count': 48,
        'min': 0.7,
        'max': 0.95,
        'average': 0.85
    }
}
```

#### å¤§è¡¨åˆ†è¡¨å¤„ç†ç»“æœï¼ˆtable_splitting_resultï¼‰
```python
{
    'original_table_id': 'table_001',        # åŸå§‹è¡¨æ ¼ID
    'splitting_strategy': 'row_based',       # åˆ†è¡¨ç­–ç•¥ï¼ˆè¡Œåˆ†è¡¨/åˆ—åˆ†è¡¨/æ··åˆåˆ†è¡¨ï¼‰
    'split_criteria': {                      # åˆ†è¡¨æ ‡å‡†
        'max_rows_per_subtable': 100,        # æ¯ä¸ªå­è¡¨æœ€å¤§è¡Œæ•°
        'max_columns_per_subtable': 10,      # æ¯ä¸ªå­è¡¨æœ€å¤§åˆ—æ•°
        'content_complexity_threshold': 0.8   # å†…å®¹å¤æ‚åº¦é˜ˆå€¼
    },
    'sub_tables': [                          # å­è¡¨åˆ—è¡¨
        {
            'sub_table_id': 'table_001_sub_1',
            'row_range': [0, 99],            # è¡ŒèŒƒå›´
            'column_range': [0, 9],          # åˆ—èŒƒå›´
            'content_preview': 'å­è¡¨å†…å®¹é¢„è§ˆ...',
            'vectorization_status': 'pending'
        }
    ],
    'splitting_metadata': {                  # åˆ†è¡¨å…ƒæ•°æ®
        'total_sub_tables': 3,
        'splitting_timestamp': 1234567890,
        'original_dimensions': {'rows': 250, 'columns': 15}
    }
}
```

#### å°è¡¨åˆå¹¶å¤„ç†ç»“æœï¼ˆtable_merging_resultï¼‰
```python
{
    'merged_table_id': 'merged_table_001',   # åˆå¹¶è¡¨ID
    'source_table_ids': ['table_002', 'table_003', 'table_004'],  # æºè¡¨æ ¼IDåˆ—è¡¨
    'merging_strategy': 'semantic_theme',    # åˆå¹¶ç­–ç•¥ï¼ˆè¯­ä¹‰ä¸»é¢˜/ç»“æ„ç›¸ä¼¼/å†…å®¹ç›¸å…³ï¼‰
    'semantic_correlation': {                # è¯­ä¹‰ç›¸å…³æ€§
        'overall_correlation_score': 0.85,   # æ•´ä½“ç›¸å…³æ€§åˆ†æ•°
        'pairwise_correlations': {           # ä¸¤ä¸¤ç›¸å…³æ€§
            'table_002_table_003': 0.92,
            'table_002_table_004': 0.78,
            'table_003_table_004': 0.89
        }
    },
    'merged_content': {                      # åˆå¹¶åå†…å®¹
        'total_rows': 45,                    # æ€»è¡Œæ•°
        'total_columns': 8,                  # æ€»åˆ—æ•°
        'content_preview': 'åˆå¹¶åçš„è¡¨æ ¼å†…å®¹...',
        'structure_integrity': 0.95          # ç»“æ„å®Œæ•´æ€§
    },
    'merging_metadata': {                    # åˆå¹¶å…ƒæ•°æ®
        'merging_timestamp': 1234567890,
        'merging_algorithm': 'semantic_aware_merge',
        'quality_assessment': 0.88
    }
}
```

### 2. æ ¸å¿ƒæ•°æ®è¡¨

#### è¡¨æ ¼å‘é‡åŒ–è®°å½•è¡¨ï¼ˆtable_vectorization_recordsï¼‰
| å­—æ®µå | æ•°æ®ç±»å‹ | ä¸»é”® | è¯´æ˜ | ç¤ºä¾‹ |
| ------ | -------- | ---- | ---- | ---- |
| record_id | STRING | æ˜¯ | è®°å½•å”¯ä¸€æ ‡è¯† | "table_vec_1234567890_abcd1234" |
| table_content | STRING | å¦ | åŸå§‹è¡¨æ ¼å†…å®¹ | "è¡¨æ ¼å†…å®¹..." |
| content_length | INTEGER | å¦ | å†…å®¹é•¿åº¦ | 2000 |
| vector_dimensions | INTEGER | å¦ | å‘é‡ç»´åº¦ | 1536 |
| quality_score | FLOAT | å¦ | è´¨é‡åˆ†æ•° | 0.85 |
| quality_level | STRING | å¦ | è´¨é‡çº§åˆ« | "good" |
| embedding_model | STRING | å¦ | ä½¿ç”¨çš„æ¨¡å‹ | "text-embedding-v1" |
| vectorization_status | STRING | å¦ | å‘é‡åŒ–çŠ¶æ€ | "success/failed" |
| vectorization_timestamp | INTEGER | å¦ | å‘é‡åŒ–æ—¶é—´æˆ³ | 1234567890 |
| processing_time_ms | INTEGER | å¦ | å¤„ç†æ—¶é—´ | 200 |

#### è¡¨æ ¼ç‰¹å¾ç»Ÿè®¡è¡¨ï¼ˆtable_feature_statisticsï¼‰
| å­—æ®µå | æ•°æ®ç±»å‹ | ä¸»é”® | è¯´æ˜ | ç¤ºä¾‹ |
| ------ | -------- | ---- | ---- | ---- |
| feature_id | STRING | æ˜¯ | ç‰¹å¾å”¯ä¸€æ ‡è¯† | "feature_1234567890_abcd1234" |
| table_id | STRING | å¦ | å…³è”çš„è¡¨æ ¼ID | "table_001" |
| total_lines | INTEGER | å¦ | æ€»è¡Œæ•° | 25 |
| max_columns | INTEGER | å¦ | æœ€å¤§åˆ—æ•° | 8 |
| fill_rate | FLOAT | å¦ | å¡«å……ç‡ | 0.92 |
| has_headers | BOOLEAN | å¦ | æ˜¯å¦æœ‰è¡¨å¤´ | true |
| has_numbers | BOOLEAN | å¦ | æ˜¯å¦æœ‰æ•°å­— | true |
| is_structured | BOOLEAN | å¦ | æ˜¯å¦ç»“æ„åŒ– | true |
| chinese_ratio | FLOAT | å¦ | ä¸­æ–‡æ¯”ä¾‹ | 0.75 |
| english_ratio | FLOAT | å¦ | è‹±æ–‡æ¯”ä¾‹ | 0.15 |

#### è¡¨æ ¼åˆ†è¡¨è®°å½•è¡¨ï¼ˆtable_splitting_recordsï¼‰
| å­—æ®µå | æ•°æ®ç±»å‹ | ä¸»é”® | è¯´æ˜ | ç¤ºä¾‹ |
| ------ | -------- | ---- | ---- | ---- |
| splitting_id | STRING | æ˜¯ | åˆ†è¡¨è®°å½•å”¯ä¸€æ ‡è¯† | "split_1234567890_abcd1234" |
| original_table_id | STRING | å¦ | åŸå§‹è¡¨æ ¼ID | "table_001" |
| splitting_strategy | STRING | å¦ | åˆ†è¡¨ç­–ç•¥ | "row_based/column_based/mixed" |
| split_criteria | JSON | å¦ | åˆ†è¡¨æ ‡å‡† | {"max_rows": 100, "max_columns": 10} |
| total_sub_tables | INTEGER | å¦ | å­è¡¨æ€»æ•° | 3 |
| splitting_timestamp | INTEGER | å¦ | åˆ†è¡¨æ—¶é—´æˆ³ | 1234567890 |
| splitting_status | STRING | å¦ | åˆ†è¡¨çŠ¶æ€ | "completed/failed" |

#### è¡¨æ ¼å­è¡¨ä¿¡æ¯è¡¨ï¼ˆtable_sub_tablesï¼‰
| å­—æ®µå | æ•°æ®ç±»å‹ | ä¸»é”® | è¯´æ˜ | ç¤ºä¾‹ |
| ------ | -------- | ---- | ---- | ---- |
| sub_table_id | STRING | æ˜¯ | å­è¡¨å”¯ä¸€æ ‡è¯† | "table_001_sub_1" |
| splitting_id | STRING | å¦ | å…³è”çš„åˆ†è¡¨è®°å½•ID | "split_1234567890_abcd1234" |
| original_table_id | STRING | å¦ | åŸå§‹è¡¨æ ¼ID | "table_001" |
| row_range | JSON | å¦ | è¡ŒèŒƒå›´ | [0, 99] |
| column_range | JSON | å¦ | åˆ—èŒƒå›´ | [0, 9] |
| content_preview | STRING | å¦ | å†…å®¹é¢„è§ˆ | "å­è¡¨å†…å®¹é¢„è§ˆ..." |
| vectorization_status | STRING | å¦ | å‘é‡åŒ–çŠ¶æ€ | "pending/completed/failed" |

#### è¡¨æ ¼åˆå¹¶è®°å½•è¡¨ï¼ˆtable_merging_recordsï¼‰
| å­—æ®µå | æ•°æ®ç±»å‹ | ä¸»é”® | è¯´æ˜ | ç¤ºä¾‹ |
| ------ | -------- | ---- | ---- | ---- |
| merging_id | STRING | æ˜¯ | åˆå¹¶è®°å½•å”¯ä¸€æ ‡è¯† | "merge_1234567890_abcd1234" |
| merged_table_id | STRING | å¦ | åˆå¹¶åè¡¨æ ¼ID | "merged_table_001" |
| source_table_ids | JSON | å¦ | æºè¡¨æ ¼IDåˆ—è¡¨ | ["table_002", "table_003"] |
| merging_strategy | STRING | å¦ | åˆå¹¶ç­–ç•¥ | "semantic_theme/structure_similar" |
| overall_correlation_score | FLOAT | å¦ | æ•´ä½“ç›¸å…³æ€§åˆ†æ•° | 0.85 |
| merging_timestamp | INTEGER | å¦ | åˆå¹¶æ—¶é—´æˆ³ | 1234567890 |
| merging_status | STRING | å¦ | åˆå¹¶çŠ¶æ€ | "completed/failed" |

## å…­ã€æ ¸å¿ƒæ¥å£è®¾è®¡

| æ¥å£å | è¯·æ±‚æ–¹å¼ | è¯·æ±‚åœ°å€ | æ ¸å¿ƒå‚æ•° | è¿”å›ç»“æœ | åŠŸèƒ½å½’å± |
| ------ | -------- | -------- | -------- | -------- | -------- |
| å•è¡¨æ ¼å‘é‡åŒ–æ¥å£ | POST | /api/v3/table/vectorize | table_content, metadata | å‘é‡åŒ–ç»“æœ | FM02 |
| æ‰¹é‡è¡¨æ ¼å‘é‡åŒ–æ¥å£ | POST | /api/v3/table/batch_vectorize | tables | æ‰¹é‡å¤„ç†ç»“æœ | FM03 |
| è¡¨æ ¼é¢„å¤„ç†æ¥å£ | POST | /api/v3/table/preprocess | table_content | é¢„å¤„ç†ç»“æœ | FM01 |
| å‘é‡è´¨é‡è¯„ä¼°æ¥å£ | POST | /api/v3/table/assess_quality | vector | è´¨é‡è¯„ä¼°ç»“æœ | FM04 |
| è¡¨æ ¼ç‰¹å¾åˆ†ææ¥å£ | POST | /api/v3/table/analyze_features | table_content | ç‰¹å¾åˆ†æç»“æœ | FM05 |
| ç»“æœéªŒè¯æ¥å£ | POST | /api/v3/table/validate | result | éªŒè¯ç»“æœ | FM06 |
| ç»Ÿè®¡ä¿¡æ¯æ¥å£ | GET | /api/v3/table/statistics | results | ç»Ÿè®¡ä¿¡æ¯ | FM07 |
| çŠ¶æ€æŸ¥è¯¢æ¥å£ | GET | /api/v3/table/status | - | çŠ¶æ€ä¿¡æ¯ | FM08 |
| æ¨¡å‹ä¿¡æ¯æ¥å£ | GET | /api/v3/table/model_info | - | æ¨¡å‹ä¿¡æ¯ | FM09 |
| å¤§è¡¨åˆ†è¡¨æ¥å£ | POST | /api/v3/table/split | table_content, strategy | åˆ†è¡¨ç»“æœ | FM10 |
| å°è¡¨åˆå¹¶æ¥å£ | POST | /api/v3/table/merge | small_tables, strategy | åˆå¹¶ç»“æœ | FM11 |
| åˆ†è¡¨å‘é‡åŒ–æ¥å£ | POST | /api/v3/table/vectorize_split | sub_tables | åˆ†è¡¨å‘é‡åŒ–ç»“æœ | FM12 |
| åˆå¹¶è¡¨é‡æ„æ¥å£ | POST | /api/v3/table/reconstruct_merged | merged_table | é‡æ„ç»“æœ | FM13 |
| åˆ†è¡¨åˆå¹¶å…ƒæ•°æ®æŸ¥è¯¢æ¥å£ | GET | /api/v3/table/split_merge_metadata | table_id | å…ƒæ•°æ®ä¿¡æ¯ | FM10-FM13 |

## ä¸ƒã€éåŠŸèƒ½éœ€æ±‚

- **æ€§èƒ½**ï¼šå•è¡¨æ ¼å‘é‡åŒ–å“åº”æ—¶é—´â‰¤300msï¼Œæ‰¹é‡å¤„ç†æ”¯æŒ100+è¡¨æ ¼ï¼ŒAPIé™æµæ§åˆ¶ï¼›
- **åˆ†è¡¨æ€§èƒ½**ï¼šå¤§è¡¨åˆ†è¡¨å¤„ç†æ—¶é—´â‰¤2ç§’ï¼Œæ”¯æŒ1000+è¡Œçš„å¤§è¡¨åˆ†è¡¨ï¼Œå­è¡¨æ•°é‡â‰¤20ä¸ªï¼›
- **åˆå¹¶æ€§èƒ½**ï¼šå°è¡¨åˆå¹¶å¤„ç†æ—¶é—´â‰¤1ç§’ï¼Œæ”¯æŒ10ä¸ªä»¥å†…å°è¡¨çš„è¯­ä¹‰åˆå¹¶ï¼Œåˆå¹¶åè¡¨æ ¼è´¨é‡â‰¥0.85ï¼›
- **RAGæŸ¥è¯¢ä¼˜åŒ–**ï¼šåˆ†è¡¨åçš„å­è¡¨å‘é‡åŒ–ä¿æŒè¯­ä¹‰å®Œæ•´æ€§ï¼Œåˆå¹¶åçš„è¡¨æ ¼å‘é‡åŒ–æå‡æŸ¥è¯¢ç›¸å…³æ€§ï¼›
- **å®‰å…¨**ï¼šè¡¨æ ¼å†…å®¹éªŒè¯ï¼ŒAPIå¯†é’¥ç®¡ç†ï¼Œé”™è¯¯ä¿¡æ¯è„±æ•å¤„ç†ï¼›
- **å¯é æ€§**ï¼šå¤±è´¥é‡è¯•æœºåˆ¶ï¼Œè´¨é‡è¯„ä¼°ç®—æ³•ï¼Œæ”¯æŒå¢é‡å‘é‡åŒ–ï¼Œåˆ†è¡¨åˆå¹¶æ“ä½œå¯å›æ»šã€‚

## å…«ã€é£é™©ä¸åº”å¯¹æªæ–½

| æ½œåœ¨é£é™© | åº”å¯¹æªæ–½ |
| -------- | -------- |
| APIè°ƒç”¨å¤±è´¥ | 1. å®ç°é‡è¯•æœºåˆ¶å’ŒæŒ‡æ•°é€€é¿ï¼›2. æ”¯æŒå¤±è´¥é¡¹ç›®æ ‡è®°å’Œåç»­å¤„ç†ï¼›3. æä¾›é™çº§æ–¹æ¡ˆ |
| è¡¨æ ¼å†…å®¹è¿‡é•¿å¯¼è‡´è¶…æ—¶ | 1. å®ç°å†…å®¹é•¿åº¦é™åˆ¶å’Œæˆªæ–­ï¼›2. æ”¯æŒåˆ†æ®µå¤„ç†ï¼›3. æä¾›å¤„ç†è¿›åº¦ç›‘æ§ |
| å‘é‡è´¨é‡ä¸‹é™ | 1. å®ç°è´¨é‡è¯„ä¼°ç®—æ³•ï¼›2. æ”¯æŒå‘é‡é‡æ–°ç”Ÿæˆï¼›3. æä¾›è´¨é‡ç›‘æ§å’Œå‘Šè­¦ |
| APIé™æµè§¦å‘ | 1. å®ç°æ‰¹é‡å¤§å°æ§åˆ¶ï¼›2. æ”¯æŒå»¶è¿Ÿå’Œé‡è¯•ï¼›3. æä¾›é™æµçŠ¶æ€ç›‘æ§ |
| å¤§è¡¨åˆ†è¡¨å¤±è´¥ | 1. å®ç°åˆ†è¡¨ç­–ç•¥éªŒè¯ï¼›2. æ”¯æŒåˆ†è¡¨æ“ä½œå›æ»šï¼›3. æä¾›åˆ†è¡¨è¿›åº¦ç›‘æ§å’Œé”™è¯¯æ¢å¤ |
| å°è¡¨åˆå¹¶è´¨é‡å·® | 1. å®ç°è¯­ä¹‰ç›¸å…³æ€§é˜ˆå€¼æ§åˆ¶ï¼›2. æ”¯æŒåˆå¹¶ç­–ç•¥è°ƒæ•´ï¼›3. æä¾›åˆå¹¶è´¨é‡è¯„ä¼°å’Œé‡æ–°åˆå¹¶ |
| åˆ†è¡¨åè¯­ä¹‰ä¸¢å¤± | 1. å®ç°è¯­ä¹‰å®Œæ•´æ€§æ£€æŸ¥ï¼›2. æ”¯æŒåˆ†è¡¨è¾¹ç•Œæ™ºèƒ½è°ƒæ•´ï¼›3. æä¾›åˆ†è¡¨é¢„è§ˆå’Œç¡®è®¤æœºåˆ¶ |
| åˆå¹¶åç»“æ„æ··ä¹± | 1. å®ç°ç»“æ„å®Œæ•´æ€§éªŒè¯ï¼›2. æ”¯æŒåˆå¹¶ç­–ç•¥ä¼˜åŒ–ï¼›3. æä¾›åˆå¹¶é¢„è§ˆå’Œæ‰‹åŠ¨è°ƒæ•´ |

## ä¹ã€é™„ä»¶

- é™„ä»¶1ï¼šè¡¨æ ¼é¢„å¤„ç†æµç¨‹å›¾
- é™„ä»¶2ï¼šå‘é‡è´¨é‡è¯„ä¼°æ ‡å‡†
- é™„ä»¶3ï¼šAPIé™æµå’Œé‡è¯•æœºåˆ¶
- é™„ä»¶4ï¼šæ‰¹é‡å¤„ç†æœ€ä½³å®è·µ
- é™„ä»¶5ï¼šé”™è¯¯å¤„ç†æ‰‹å†Œ
- é™„ä»¶6ï¼šå¤§è¡¨åˆ†è¡¨ç­–ç•¥å’Œç®—æ³•
- é™„ä»¶7ï¼šå°è¡¨åˆå¹¶è¯­ä¹‰ç›¸å…³æ€§åˆ†æ
- é™„ä»¶8ï¼šåˆ†è¡¨åˆå¹¶RAGæŸ¥è¯¢ä¼˜åŒ–æŒ‡å—
- é™„ä»¶9ï¼šåˆ†è¡¨åˆå¹¶æ“ä½œæ‰‹å†Œå’Œæœ€ä½³å®è·µ

---



## å ã€å¤‡æ³¨



## ğŸ¯ **å¤§è¡¨åˆ†è¡¨çš„ä¾æ®**

### **1. å¤šç»´åº¦è¯„ä¼°æŒ‡æ ‡**
```python
split_criteria = {
    'max_rows_per_subtable': 100,        # æ¯ä¸ªå­è¡¨æœ€å¤§è¡Œæ•°
    'max_columns_per_subtable': 10,      # æ¯ä¸ªå­è¡¨æœ€å¤§åˆ—æ•°
    'content_complexity_threshold': 0.8   # å†…å®¹å¤æ‚åº¦é˜ˆå€¼
}
```

#### **è¡Œæ•°é™åˆ¶**
- **å¤§è¡¨è¯†åˆ«æ ‡å‡†**: è¡Œæ•°è¶…è¿‡100è¡Œ
- **åˆ†è¡¨ç­–ç•¥**: æŒ‰è¡Œæ•°åˆ†è¡¨ï¼Œæ¯ä¸ªå­è¡¨æœ€å¤š100è¡Œ
- **è¯­ä¹‰å®Œæ•´æ€§**: ç¡®ä¿åˆ†è¡¨è¾¹ç•Œä¸ç ´åè¡¨æ ¼çš„é€»è¾‘ç»“æ„

#### **åˆ—æ•°é™åˆ¶**
- **åˆ—æ•°æ§åˆ¶**: æ¯ä¸ªå­è¡¨æœ€å¤š10åˆ—
- **ç»“æ„ä¿æŒ**: é¿å…å­è¡¨è¿‡äºå®½æ³›ï¼Œå½±å“å‘é‡åŒ–æ•ˆæœ

#### **å†…å®¹å¤æ‚åº¦è¯„ä¼°**
- **å¤æ‚åº¦é˜ˆå€¼**: 0.8ï¼ˆåŸºäºå­—ç¬¦å¯†åº¦ã€å†…å®¹ç±»å‹ã€ç»“æ„å¤æ‚åº¦ç­‰ï¼‰
- **æ™ºèƒ½åˆ†è¡¨**: æ ¹æ®å†…å®¹ç‰¹å¾åŠ¨æ€è°ƒæ•´åˆ†è¡¨ç­–ç•¥

### **2. åˆ†è¡¨ç­–ç•¥ç±»å‹**
```python
splitting_strategy = 'row_based'  # è¡Œåˆ†è¡¨/åˆ—åˆ†è¡¨/æ··åˆåˆ†è¡¨
```

- **è¡Œåˆ†è¡¨**: æŒ‰è¡Œæ•°åˆ†å‰²ï¼Œä¿æŒåˆ—ç»“æ„å®Œæ•´
- **åˆ—åˆ†è¡¨**: æŒ‰åˆ—æ•°åˆ†å‰²ï¼Œä¿æŒè¡Œç»“æ„å®Œæ•´  
- **æ··åˆåˆ†è¡¨**: è¡Œåˆ—ç»“åˆï¼Œæ ¹æ®å†…å®¹ç‰¹å¾æ™ºèƒ½é€‰æ‹©

## ï¿½ï¿½ï¸ **é¿å…å°è¡¨è¶…è¿‡chunkå¤§å°é™åˆ¶çš„æœºåˆ¶**

### **1. åŒé‡å¤§å°æ§åˆ¶**

#### **è¡¨æ ¼ç»´åº¦æ§åˆ¶**
```python
# åˆ†è¡¨æ—¶çš„ç¡¬æ€§é™åˆ¶
max_rows_per_subtable = 100      # è¡Œæ•°ä¸Šé™
max_columns_per_subtable = 10    # åˆ—æ•°ä¸Šé™
```

#### **å†…å®¹é•¿åº¦æ§åˆ¶**
```python
# åœ¨_preprocess_table_content()ä¸­çš„é•¿åº¦æ§åˆ¶
def _preprocess_table_content(self, table_content):
    # æ£€æŸ¥å†…å®¹é•¿åº¦
    if len(table_content) > self.config.max_chunk_size:
        # è¿›ä¸€æ­¥æˆªæ–­æˆ–åˆ†è¡¨
        table_content = self._truncate_content(table_content)
```

### **2. æ™ºèƒ½åˆ†è¡¨ç®—æ³•**

#### **è¯­ä¹‰è¾¹ç•Œè¯†åˆ«**
```python
def _split_large_table(self, table_content, strategy):
    # 1. è¯†åˆ«è¯­ä¹‰è¾¹ç•Œï¼ˆè¡¨å¤´ã€åˆ†ç»„ã€ä¸»é¢˜åˆ‡æ¢ç­‰ï¼‰
    semantic_boundaries = self._identify_semantic_boundaries(table_content)
    
    # 2. åœ¨è¯­ä¹‰è¾¹ç•Œå¤„è¿›è¡Œåˆ†è¡¨
    sub_tables = self._split_at_boundaries(table_content, semantic_boundaries)
    
    # 3. éªŒè¯æ¯ä¸ªå­è¡¨çš„å¤§å°
    for sub_table in sub_tables:
        if self._exceeds_chunk_limit(sub_table):
            # è¿›ä¸€æ­¥ç»†åˆ†
            sub_table = self._further_split(sub_table)
```

#### **åŠ¨æ€åˆ†è¡¨è°ƒæ•´**
```python
def _further_split(self, sub_table):
    # å¦‚æœå­è¡¨ä»ç„¶è¿‡å¤§ï¼Œè¿›è¡Œæ›´ç»†ç²’åº¦çš„åˆ†è¡¨
    if len(sub_table) > self.config.max_chunk_size:
        # æŒ‰å†…å®¹å¯†åº¦åˆ†è¡¨
        return self._split_by_content_density(sub_table)
    return sub_table
```

### **3. åˆ†è¡¨è´¨é‡ä¿è¯**

#### **åˆ†è¡¨é¢„è§ˆå’Œç¡®è®¤**
```python
def _create_table_splitting_strategy(self, table_content, features):
    # ç”Ÿæˆåˆ†è¡¨ç­–ç•¥
    strategy = self._generate_splitting_strategy(table_content, features)
    
    # åˆ†è¡¨é¢„è§ˆ
    preview = self._generate_splitting_preview(table_content, strategy)
    
    # éªŒè¯åˆ†è¡¨è´¨é‡
    quality_score = self._assess_splitting_quality(preview)
    
    # å¦‚æœè´¨é‡ä¸è¾¾æ ‡ï¼Œè°ƒæ•´ç­–ç•¥
    if quality_score < 0.8:
        strategy = self._optimize_splitting_strategy(strategy, quality_score)
    
    return strategy
```

#### **åˆ†è¡¨å…ƒæ•°æ®ç®¡ç†**
```python
splitting_metadata = {
    'total_sub_tables': 3,
    'splitting_timestamp': 1234567890,
    'original_dimensions': {'rows': 250, 'columns': 15},
    'quality_assurance': {
        'semantic_integrity': 0.95,    # è¯­ä¹‰å®Œæ•´æ€§
        'size_compliance': 1.0,        # å¤§å°åˆè§„æ€§
        'structure_preservation': 0.92  # ç»“æ„ä¿æŒæ€§
    }
}
```

## ğŸ”„ **åˆ†è¡¨åçš„å¤„ç†æµç¨‹**

### **1. å­è¡¨å‘é‡åŒ–**
```python
# å¯¹æ¯ä¸ªå­è¡¨è¿›è¡Œç‹¬ç«‹å‘é‡åŒ–
for sub_table in sub_tables:
    # ç¡®ä¿å­è¡¨å¤§å°åœ¨chunké™åˆ¶å†…
    if self._validate_sub_table_size(sub_table):
        vectorization_result = self.vectorize(sub_table, metadata)
        results.append(vectorization_result)
    else:
        # è®°å½•å¼‚å¸¸ï¼Œè¿›è¡Œè¿›ä¸€æ­¥å¤„ç†
        self._handle_oversized_subtable(sub_table)
```

### **2. åˆ†è¡¨å…³è”ä¿¡æ¯ç»´æŠ¤**
```python
# ç»´æŠ¤åˆ†è¡¨å…³ç³»ï¼Œä¾¿äºRAGæŸ¥è¯¢æ—¶åˆå¹¶ç»“æœ
sub_table_info = {
    'sub_table_id': 'table_001_sub_1',
    'original_table_id': 'table_001',
    'row_range': [0, 99],
    'column_range': [0, 9],
    'vectorization_status': 'completed',
    'semantic_context': 'ä¸table_001_sub_2ã€table_001_sub_3æ„æˆå®Œæ•´è¡¨æ ¼'
}
```

## ï¿½ï¿½ **å®é™…åº”ç”¨ç¤ºä¾‹**

### **åœºæ™¯**: ä¸€ä¸ª250è¡ŒÃ—15åˆ—çš„å¤§è¡¨

#### **åˆ†è¡¨ç»“æœ**
```python
sub_tables = [
    {
        'sub_table_id': 'table_001_sub_1',
        'row_range': [0, 99],      # 100è¡Œ
        'column_range': [0, 9],     # 10åˆ—
        'content_length': 8000      # è¿œå°äºchunké™åˆ¶
    },
    {
        'sub_table_id': 'table_001_sub_2', 
        'row_range': [100, 199],   # 100è¡Œ
        'column_range': [0, 9],    # 10åˆ—
        'content_length': 7500
    },
    {
        'sub_table_id': 'table_001_sub_3',
        'row_range': [200, 249],   # 50è¡Œ
        'column_range': [0, 9],    # 10åˆ—
        'content_length': 4000
    }
]
```

## âœ… **æ€»ç»“**

é€šè¿‡**å¤šç»´åº¦è¯„ä¼°æŒ‡æ ‡**ã€**æ™ºèƒ½åˆ†è¡¨ç®—æ³•**å’Œ**åŒé‡å¤§å°æ§åˆ¶**ï¼Œå¤§è¡¨åˆ†è¡¨ç³»ç»Ÿèƒ½å¤Ÿï¼š

1. **æœ‰æ•ˆé¿å…å°è¡¨è¶…è¿‡chunké™åˆ¶**: é€šè¿‡è¡Œæ•°ã€åˆ—æ•°ã€å†…å®¹é•¿åº¦çš„å¤šé‡æ§åˆ¶
2. **ä¿æŒè¯­ä¹‰å®Œæ•´æ€§**: åœ¨è¯­ä¹‰è¾¹ç•Œå¤„è¿›è¡Œåˆ†è¡¨ï¼Œé¿å…ç ´åè¡¨æ ¼é€»è¾‘
3. **æå‡å‘é‡åŒ–è´¨é‡**: æ¯ä¸ªå­è¡¨å¤§å°é€‚ä¸­ï¼Œä¾¿äºAIæ¨¡å‹ç†è§£å’Œå‘é‡åŒ–
4. **æ”¯æŒRAGæŸ¥è¯¢ä¼˜åŒ–**: ç»´æŠ¤åˆ†è¡¨å…³ç³»ï¼ŒæŸ¥è¯¢æ—¶å¯æ™ºèƒ½åˆå¹¶ç›¸å…³ç»“æœ

è¿™ç§è®¾è®¡ç¡®ä¿äº†åˆ†è¡¨åçš„æ¯ä¸ªå­è¡¨éƒ½èƒ½åœ¨chunkå¤§å°é™åˆ¶å†…ï¼ŒåŒæ—¶ä¿æŒäº†è¡¨æ ¼çš„è¯­ä¹‰å®Œæ•´æ€§å’ŒæŸ¥è¯¢æ•ˆæœã€‚





**æ–‡æ¡£ç‰ˆæœ¬å†å²**ï¼š

- V1.0 (2024-12-XX): åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºäºå®é™…ä»£ç å®ç°ï¼ˆ494è¡Œä»£ç ï¼‰
