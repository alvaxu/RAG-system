# 25. è¡¨æ ¼å±•ç°ä¼˜åŒ–æ–¹æ¡ˆ

## 1. ç°çŠ¶åˆ†æ

### 1.1 å·²å®ç°åŠŸèƒ½
- å‰ç«¯æœ‰è¡¨æ ¼æŸ¥è¯¢UIå…¥å£å’Œé¢„è®¾é—®é¢˜
- åç«¯æœ‰ä¸“é—¨çš„`/api/v2/query/table`æ¥å£
- æ”¯æŒ`table`æŸ¥è¯¢ç±»å‹ï¼ŒåŸºç¡€æŸ¥è¯¢åŠŸèƒ½æ­£å¸¸

### 1.2 ç¼ºå¤±åŠŸèƒ½
- å‰ç«¯å®Œå…¨æ²¡æœ‰è¡¨æ ¼ç»“æœå±•ç¤ºé€»è¾‘
- è¡¨æ ¼å†…å®¹ä»¥æˆªæ–­æ–‡æœ¬å½¢å¼æ˜¾ç¤ºï¼Œç”¨æˆ·ä½“éªŒå·®
- ç¼ºå°‘è¡¨æ ¼ç›¸å…³çš„CSSæ ·å¼å’Œäº¤äº’åŠŸèƒ½

## 2. ä¼˜åŒ–ç›®æ ‡

### 2.1 æ ¸å¿ƒç›®æ ‡
1. **å®Œæ•´å±•ç¤º**ï¼šè¡¨æ ¼æ•°æ®ä»¥ç»“æ„åŒ–å½¢å¼å±•ç¤º
2. **ç”¨æˆ·ä½“éªŒ**ï¼šæ¸…æ™°ã€ç¾è§‚ã€æ˜“è¯»çš„è¡¨æ ¼å±•ç¤º
3. **åŠŸèƒ½ä¸€è‡´**ï¼šä¸å›¾ç‰‡å±•ç¤ºåŠŸèƒ½ä¿æŒä¸€è‡´çš„ä½“éªŒæ°´å¹³

### 2.2 å…·ä½“æŒ‡æ ‡
- è¡¨æ ¼å†…å®¹å¯è¯»æ€§æå‡90%ä»¥ä¸Š
- è¡¨æ ¼å±•ç¤ºå“åº”æ—¶é—´<100ms
- æ”¯æŒè¡¨æ ¼æ•°æ®çš„äº¤äº’æ“ä½œ

## 3. æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 3.1 ç»“æ„åŒ–è¡¨æ ¼å±•ç¤ºï¼ˆæ¨èï¼‰

```javascript
// è¡¨æ ¼ç»“æœæ£€æµ‹å’Œå±•ç¤º
if (data && data.table_results && data.table_results.length > 0) {
    messageContent += `
        <hr class="section-divider">
        <h2 class="section-title">ğŸ“Š ç›¸å…³è¡¨æ ¼</h2>
        <div class="tables-section">
            ${data.table_results.map((tableResult, index) => `
                <div class="table-card">
                    <div class="table-header">
                        <h4>è¡¨æ ¼ ${index + 1}: ${tableResult.table_type}</h4>
                        <div class="table-meta">
                            <span class="doc-name">ğŸ“„ ${tableResult.document_name}</span>
                            <span class="page-number">ğŸ“– ç¬¬${tableResult.page_number}é¡µ</span>
                            <span class="relevance-score">â­ ${tableResult.score.toFixed(2)}</span>
                        </div>
                    </div>
                    <div class="table-content">
                        <div class="table-preview">
                            ${formatTableContent(tableResult.table_content)}
                        </div>
                        <div class="table-actions">
                            <button class="view-table-btn" onclick="viewFullTable('${tableResult.id}')">
                                æŸ¥çœ‹å®Œæ•´è¡¨æ ¼
                            </button>
                        </div>
                    </div>
                </div>
            `).join('')}
        </div>
    `;
}
```

### 3.2 æ™ºèƒ½è¡¨æ ¼å†…å®¹è§£æ

```javascript
function formatTableContent(tableContent) {
    // æ£€æµ‹è¡¨æ ¼åˆ†éš”ç¬¦
    if (tableContent.includes('|') || tableContent.includes('\t')) {
        return formatAsTable(tableContent);
    } else if (tableContent.includes('è¡Œ') && tableContent.includes('åˆ—')) {
        return generateTablePreview(tableContent);
    } else {
        return `<div class="table-text">${tableContent}</div>`;
    }
}

function formatAsTable(content) {
    const lines = content.split('\n').filter(line => line.trim());
    let tableHTML = '<table class="data-table">';
    
    lines.forEach((line, index) => {
        const cells = line.split('|').map(cell => cell.trim()).filter(cell => cell);
        if (cells.length > 0) {
            const tag = index === 0 ? 'th' : 'td';
            tableHTML += '<tr>';
            cells.forEach(cell => {
                tableHTML += `<${tag}>${cell}</${tag}>`;
            });
            tableHTML += '</tr>';
        }
    });
    
    tableHTML += '</table>';
    return tableHTML;
}
```

## 4. æ ·å¼è®¾è®¡è§„èŒƒ

### 4.1 è¡¨æ ¼å¡ç‰‡æ ·å¼

```css
/* è¡¨æ ¼å±•ç¤ºåŒºåŸŸæ ·å¼ */
.tables-section {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-top: 20px;
}

.table-card {
    background: #fff;
    border: 1px solid #e9ecef;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    margin-bottom: 20px;
}

.table-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.table-header {
    background: #f8f9fa;
    padding: 15px;
    border-bottom: 1px solid #e9ecef;
}

.table-meta {
    display: flex;
    gap: 15px;
    margin-top: 8px;
    font-size: 12px;
    color: #6c757d;
}

.table-content {
    padding: 20px;
}
```

### 4.2 æ•°æ®è¡¨æ ¼æ ·å¼

```css
.data-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 15px;
    font-size: 14px;
}

.data-table th,
.data-table td {
    border: 1px solid #dee2e6;
    padding: 8px 12px;
    text-align: left;
    vertical-align: top;
}

.data-table th {
    background: #f8f9fa;
    font-weight: 600;
    color: #495057;
}

.data-table tr:nth-child(even) {
    background: #f8f9fa;
}

.data-table tr:hover {
    background: #e9ecef;
}
```

## 5. å®æ–½è®¡åˆ’

### 5.1 é˜¶æ®µ1ï¼šåŸºç¡€å±•ç¤ºï¼ˆæœ¬å‘¨å®Œæˆï¼‰
- [ ] æ·»åŠ è¡¨æ ¼ç»“æœæ£€æµ‹é€»è¾‘
- [ ] å®ç°åŸºç¡€è¡¨æ ¼å†…å®¹å±•ç¤º
- [ ] æ·»åŠ è¡¨æ ¼ç›¸å…³CSSæ ·å¼
- [ ] æµ‹è¯•è¡¨æ ¼å±•ç¤ºåŠŸèƒ½

### 5.2 é˜¶æ®µ2ï¼šåŠŸèƒ½ä¼˜åŒ–ï¼ˆä¸‹å‘¨å®Œæˆï¼‰
- [ ] ä¼˜åŒ–è¡¨æ ¼å†…å®¹æ ¼å¼åŒ–
- [ ] æ·»åŠ è¡¨æ ¼äº¤äº’åŠŸèƒ½
- [ ] å®Œå–„è¡¨æ ¼å…ƒæ•°æ®å±•ç¤º
- [ ] ä¼˜åŒ–è¡¨æ ¼å“åº”å¼è®¾è®¡

### 5.3 é˜¶æ®µ3ï¼šé«˜çº§åŠŸèƒ½ï¼ˆä¸‹ä¸‹å‘¨å®Œæˆï¼‰
- [ ] è¡¨æ ¼å†…å®¹æ™ºèƒ½è§£æ
- [ ] è¡¨æ ¼æ•°æ®å¯¼å‡ºåŠŸèƒ½
- [ ] è¡¨æ ¼æœç´¢å’Œè¿‡æ»¤
- [ ] è¡¨æ ¼æ•°æ®å¯è§†åŒ–

## 6. é¢„æœŸæ•ˆæœ

### 6.1 ç”¨æˆ·ä½“éªŒæå‡
- è¡¨æ ¼å†…å®¹å¯è¯»æ€§æå‡90%ä»¥ä¸Š
- è¡¨æ ¼å±•ç¤ºç¾è§‚åº¦æ˜¾è‘—æå‡
- è¡¨æ ¼æ“ä½œä¾¿æ·æ€§å¤§å¹…æ”¹å–„

### 6.2 ç³»ç»ŸåŠŸèƒ½å®Œå–„
- è¡¨æ ¼æŸ¥è¯¢åŠŸèƒ½å®Œæ•´æ€§è¾¾åˆ°100%
- ä¸å›¾ç‰‡å±•ç¤ºåŠŸèƒ½ä½“éªŒä¸€è‡´
- æ··åˆæŸ¥è¯¢ç»“æœå±•ç¤ºæ›´åŠ å®Œæ•´

## 7. æŠ€æœ¯è¦ç‚¹

### 7.1 è¡¨æ ¼å†…å®¹æ£€æµ‹
- åŸºäºåˆ†éš”ç¬¦ï¼ˆ|ã€\tï¼‰æ£€æµ‹è¡¨æ ¼ç»“æ„
- åŸºäºå…³é”®è¯ï¼ˆè¡Œã€åˆ—ï¼‰æ£€æµ‹è¡¨æ ¼æè¿°
- æ™ºèƒ½åˆ¤æ–­å†…å®¹ç±»å‹

### 7.2 å“åº”å¼è®¾è®¡
- æ”¯æŒä¸åŒå±å¹•å°ºå¯¸
- è¡¨æ ¼å†…å®¹è‡ªé€‚åº”æ˜¾ç¤º
- ç§»åŠ¨ç«¯å‹å¥½çš„äº¤äº’è®¾è®¡

### 7.3 æ€§èƒ½ä¼˜åŒ–
- æ‡’åŠ è½½è¡¨æ ¼å†…å®¹
- åˆ†é¡µæ˜¾ç¤ºå¤§é‡æ•°æ®
- ç¼“å­˜è¡¨æ ¼è§£æç»“æœ

## 8. æ€»ç»“

è¡¨æ ¼å±•ç°ä¼˜åŒ–æ˜¯æå‡ç³»ç»Ÿå®Œæ•´æ€§å’Œç”¨æˆ·ä½“éªŒçš„é‡è¦ç¯èŠ‚ã€‚é€šè¿‡å®ç°ç»“æ„åŒ–å±•ç¤ºã€æ™ºèƒ½å†…å®¹è§£æå’Œç¾è§‚çš„æ ·å¼è®¾è®¡ï¼Œå¯ä»¥æ˜¾è‘—æå‡è¡¨æ ¼æŸ¥è¯¢åŠŸèƒ½çš„å¯ç”¨æ€§ï¼Œä½¿æ•´ä¸ªRAGç³»ç»Ÿçš„åŠŸèƒ½æ›´åŠ å®Œå–„ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025å¹´1æœˆ27æ—¥  
**æœ€åæ›´æ–°**: 2025å¹´1æœˆ27æ—¥  
**è´Ÿè´£äºº**: AIåŠ©æ‰‹  
**çŠ¶æ€**: å¾…å®æ–½
