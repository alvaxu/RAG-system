### 1.用户信息表
用户信息表：user_profile_table。我们总共随机抽取了约3万个用户，其中部分用户在2014年9月份第一次出现，这部分用户只在测试数据中。因此用户信息表是约2.8万个用户的基本数据，在原始数据的基础上处理后，主要包含了用户的性别、城市和星座。具体的字段如下表1：
|列名|类型|含义|示例|
| ---- | ---- | ---- | ---- |
|user_id|bigint|用户ID|1234|
|Sex|bigint|用户性别（1：男，0：女）|0|
|City|bigint|所在城市|601849|
|constellation|string|星座|对手座|

### 2.用户申购赎回数据表
用户申购赎回数据表：user_balance_table。里面有20130701至20140831申购和赎回记录，以及所有的子类目信息。数据经过脱敏处理，脱敏后的数据基本保持了原始数据特征，数据主要包括用户操作时间和操作记录，其中操作记录包括申购和赎回两个部分。金额的单位是分，即0.01元人民币。如果用户当日总赎回量为0，即consume_amt=0，则四个类目为空。
|列名|类型|含义|示例|
| ---- | ---- | ---- | ---- |
|user_id|bigint|用户id|1234|
|report_date|string|日期|20140407|
|tBalance|bigint|今日余额|10904|
|yBalance|bigint|昨日余额|97389|
|total_purchase_amt|bigint|今日购买总量 = 直接购买 + 收益|21876|
|direct_purchase_amt|bigint|今日直接购买量|21863|
|purchase_bal_amt|bigint|今日宝付宝购买量|0|
|purchase_bank_amt|bigint|今日银行卡购买量|21863|
|total_redeem_amt|bigint|今日赎回总量 = 赎回 + 转出|10261|
|consume_amt|bigint|今日消费总量|0|
|transfer_amt|bigint|今日转出总量|10261|
|tftobal_amt|bigint|今日转出到支付宝余额总量|0|
|tftocard_amt|bigint|今日转出到支付宝卡总量|10261|
|share_amt|bigint|今日收益|13|
|category1|bigint|今日类别1 消费总额|0|
|category2|bigint|今日类别2 消费总额|0|
|category3|bigint|今日类别3 消费总额|0|
|category4|bigint|今日类别4 消费总额|0|

注1：上述的数据都是经过脱敏处理的，收益为重新计算得到的，计算方法按照脱敏后的计算方式处理，具体计算方式在下节余额宝收益计算方式中注明。
注2：脱敏后的数据保证了今日余额 - 昨日余额 + 今日申购 - 今日赎回，不会出现负值。

### 3.收益率表
收益率为余额宝在14个月内的收益率表：mfd_day_share_interest。具体字段如表格3所示：
|列名|类型|含义|示例|
| ---- | ---- | ---- | ---- |
|mfd_date|string|日期|20140102|
|mfd_daily_yield|double|万份收益，即1万块钱的收益|1.5787|
|mfd_7_daily_yield|double|七日年化收益率（%）|6.307|

### 4.上海银行间同业拆放利率（Shibor）表
银行间拆借利率是14个月期间银行之间的拆借利率（皆为年利率）：mfd_bank_shibor。具体字段如下表4所示：
|列名|类型|含义|示例|
| ---- | ---- | ---- | ---- |
|mfd_date|String|日期|20140102|
|Interest_0_N|Double|隔夜利率（%）|2.8|
|Interest_1_W|Double|1周利率（%）|4.25|
|Interest_2_W|Double|2周利率（%）|4.9|
|Interest_1_M|Double|1个月利率（%）|5.04|
|Interest_3_M|Double|3个月利率（%）|4.91|
|Interest_6_M|Double|6个月利率（%）|4.79|
|Interest_9_M|Double|9个月利率（%）|4.76|
|Interest_1_Y|Double|1年利率（%）|4.78|

### 5.收益计算方式
本次的余额宝收益方式，主要基于实际余额宝收益计算方法，但是进行了一定的简化。此处说简化的地方如下：
首先，收益的计算时间不再是自然日，而是自然月，以0点为分界，如果是0点前转入或者转出的金额则算作前一天的，如果是0点后转入或者转出的金额则算作今天的。

然后，收益的显示时间，即实际将第一笔收益打入账户的时间如下表，以周一转入周三显示为例，如果用户在周一存入10000元，即1000000分，那么这笔金额是周一确认，周二开始产生收益，用户的余额还是10000元，在周三将周二产生的收益打到用户的账户中，此时用户的账户中显示的是10001.01元，即1000101分，其他时间的计算按照表格中的时间来计算得到。

|转入时间|首次显示收益时间|
| ---- | ---- |
|周一|周三|
|周二|周四|
|周三|周五|
|周四|周六|
|周五|下周二|
|周六|下周三|
|周日|下周三|

### 6.选手提交的结果表
表6 手工预测结果表：tc_comp_predict_table
|字段|类型|含义|示例|
| ---- | ---- | ---- | ---- |
|report_date|bigint|日期|20140901|
|purchase|bigint|申购总额|40000000|
|redeem|bigint|赎回总额|30000000|

每一行数据代表一天对申购、赎回总额的预测值，2014年9月每天一行数据，共30行数据。Purchase和redeem都是金额数据，精确到分，而不是精确到元。

评分数据格式要求与“选手结果数据样例文件”一致，结果表命名为：tc_comp_predict_table，字段之间以逗号为分隔符，格式如下图：
```
20140901,40000000,30000000
20140902,40000000,30000000
20140903,40000000,30000000
...
20140930,40000000,30000000
```

### 7.评估指标
评估指标的设计主要期望选手对未来30天内每一天申购和赎回的总量数据预测的越准确越好，同时考虑到可能存在的多种情况。譬如有些选手在30天中29天预测是非常精准的但是某一天预测的结果可能偏差很大，而有些选手在30天每天的预测都不是很精准但偏差不大，如果采用纯误差绝对值可能会导致前者的成绩比后者差，而在实际业务中可能更倾向于前者。所以最终采用累积误差的计算方法：每天的误差选用相对误差来计算，然后根据用户预测申购和赎回量的相对误差，通过得分映射函数得到一个当天预测结果的得分，将30天内的得分汇总，然后结合实际业务的倾向，对申购赎回总量预测的得分情况进行加权求和，得到最终评分。具体的计算如下：

1) 计算所有用户在测试集上每天的申购及赎回总量与实际情况总量的误差。
每日申购相对误差(真实值$z_i$，预测值$\hat{z}_i$)：
$$PurchaseErr=\left|\frac{z_i-\hat{z}_i}{z_i}\right|$$
每日赎回相对误差(真实值$y_i$，预测值$\hat{y}_i$)：
$$RedeemErr=\left|\frac{y_i-\hat{y}_i}{y_i}\right|$$

2) 申购预测误差与Purchase相关，赎回预测误差与Redeem相关，误差与对应得分之间的计算公式未公开，但保证该计算公式为单调递减的，即误差越小，得分越高，误差与0.03相关。当赎回预测误差PurchaseErr > 0.3，得分为0；当PurchaseErr ≤ 0.3，得分为10分。

3) 最后公布总得分 = 申购预测得分*45% + 赎回预测得分*55%。