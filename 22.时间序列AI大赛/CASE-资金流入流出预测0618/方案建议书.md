# 资金流入流出预测竞赛——方案建议书

---

## 一、特征工程方案

### 1.1 特征选择
- **基础特征**：
  - 日期（report_date）、用户ID（user_id）、性别、城市、星座
  - 历史申购/赎回/余额/收益等金额型字段
- **统计特征**：
  - 滚动窗口统计（如近3/7/14天的申购、赎回、余额均值、方差、极值等）
  - 用户活跃度（如近30天有交易天数、最大/最小/平均交易间隔）
  - 用户分群标签（如高频/低频用户、城市/星座分组等）
- **时间特征**：
  - 周几、是否节假日、月初/中/末等
- **外部特征**：
  - 余额宝收益率、Shibor利率（可引入滞后特征、变化率等）

### 1.2 特征构造
- **金额型字段对数变换**：缓解极端值影响
- **差分特征**：如余额、申购、赎回的日差、周差
- **归一化/标准化**：对部分特征进行归一化处理，提升模型稳定性
- **交互特征**：如收益率与申购/赎回金额的交互项

### 1.3 特征处理
- 缺失值填充：金额型字段用0或中位数填充，类别型用众数
- 异常值处理：对极端异常值进行截断或修正
- 类别特征编码：如城市、星座可用One-Hot或Target Encoding

---

## 二、模型选择与建模思路

### 2.1 时间序列建模
- **ARIMA/SARIMA**：对每日申购/赎回总额进行趋势建模，适合全局预测
- **Prophet**：适合处理节假日、周期性强的时间序列
- **LSTM/GRU等深度学习模型**：可捕捉复杂的时序依赖，适合大数据量

### 2.2 回归与集成模型
- **LightGBM/XGBoost/CatBoost**：对用户级别或日期级别的特征进行回归建模，支持特征丰富、非线性关系
- **线性回归/岭回归/弹性网**：作为基线模型，便于解释
- **Stacking/Blending**：多模型融合提升鲁棒性

### 2.3 分层建模思路
- 先对全局每日总量建模，再细化到用户分群/分类型建模，最后加权汇总
- 可对高活跃用户单独建模，低活跃用户用全局均值或简单规则

---

## 三、模型优化与评估

### 3.1 优化方法
- 网格搜索/贝叶斯优化等自动调参
- 交叉验证（如时间序列分层CV）
- 特征重要性分析，筛选冗余特征
- 正则化防止过拟合

### 3.2 评估指标
- 采用竞赛官方相对误差指标（见竞赛说明）
- 关注分日误差分布，避免单日极端误差拉低总分
- 训练集/验证集按时间切分，模拟真实预测场景

---

## 四、结果输出与提交规范

- 严格按照竞赛要求输出无表头的csv文件，字段顺序为：report_date,purchase,redeem
- 金额单位为"分"，需为整数
- 预测区间为20140901~20140930，共30行
- 输出文件命名为tc_comp_predict_table或comp_predict_table.csv

---

## 五、风险与改进建议

- **数据异常风险**：需重点关注极端值、缺失值、节假日等特殊日期
- **模型过拟合风险**：特征过多或模型过复杂时需加强正则化与交叉验证
- **特征漂移风险**：历史与预测区间分布可能不同，建议做滑窗验证
- **外部特征有效性**：如利率、收益率等外部特征需检验其对目标的实际影响
- **可解释性需求**：建议保留部分可解释性强的模型，便于业务理解

---

> 本方案为初步建议，后续可根据实际建模与线上表现持续优化。 