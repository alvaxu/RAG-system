# 4.2.1model_xgb_more_feature_save_train_result_4000(best).py 与 5.3_xgb_optimize_feature.py 特征列表一对一对比

- [ ] | 特征名 | 4.2.1 是否存在 | 5.3 是否存在 | 特征类型/衍生方式 | 备注 |
  |--------|:-------------:|:-----------:|-------------------|------|
  | SaleID | 是 | 是 | 原始 | x唯一ID |
  | name | 是 | 是 | 原始 | x车名/描述 |
  | regDate | 是 | 是 | 原始 | 注册日期 |
  | model | 是 | 是 | 原始/类别 | 车型ID |
  | brand | 是 | 是 | 原始/类别 | 品牌ID |
  | bodyType | 是 | 是 | 原始/类别 | 车身类型 |
  | fuelType | 是 | 是 | 原始/类别 | 燃油类型 |
  | gearbox | 是 | 是 | 原始/类别 | 变速箱 |
  | power | 是 | 是 | 原始/数值 | （类别）功率 |
  | kilometer | 是 | 是 | 原始/数值 | 行驶公里数 |
  | notRepairedDamage | 是 | 是 | 原始/类别 | 是否有损伤 |
  | regionCode | 是 | 是 | 原始/类别 | 区域编码 |
  | seller | 是 | 是 | 原始/类别 | 卖家类型（常量，5.3已删除） |
  | offerType | 是 | 是 | 原始/类别 | 报价类型（常量，5.3已删除） |
  | creatDate | 是 | 是 | 原始 | 创建日期 |
  | regDate_dt | 是 | 是 | 衍生/时间 | 注册日期datetime |
  | creatDate_dt | 是 | 是 | 衍生/时间 | 创建日期datetime |
  | car_age_days | 是 | 是 | 衍生/数值 | 车辆使用天数 |
  | car_age | 是 | 是 | 衍生/数值 | 车辆使用年限 |
  | regYear | 是 | 是 | 衍生/数值 | 注册年份 |
  | regMonth | 是 | 是 | 衍生/数值 | 注册月份 |
  | regDay | 是 | 是 | 衍生/数值 | 注册日 |
  | creatYear | 是 | 是 | 衍生/数值 | 创建年份 |
  | creatMonth | 是 | 是 | 衍生/数值 | 创建月份 |
  | creatDay | 是 | 是 | 衍生/数值 | 创建日 |
  | is_new_car | 是 | 是 | 衍生/类别 | 是否新车 |
  | regYear_from_now | 是 | 是 | 衍生/数值 | 距今注册年数 |
  | creatYear_from_now | 是 | 是 | 衍生/数值 | 距今创建年数 |
  | regSeason | 是 | 是 | 衍生/类别 | 注册季节 |
  | creatSeason | 是 | 是 | 衍生/类别 | 创建季节 |
  | km_per_year | 是 | 是 | 衍生/数值 | 年均公里 |
  | age_segment | 是 | 是 | 衍生/类别 | 车龄分段 |
  | regYear_bin | 是 | 是 | 衍生/类别 | 注册年份分段 |
  | km_bin | 是 | 是 | 衍生/类别 | 公里数分段 |
  | power_bin | 是 | 是 | 衍生/类别 | 功率分段 |
  | brand_km_bin | 是 | 是 | 衍生/类别 | 品牌+公里分段 |
  | brand_power_bin | 是 | 是 | 衍生/类别 | 品牌+功率分段 |
  | brand_age_segment | 是 | 是 | 衍生/类别 | 品牌+车龄分段 |
  | brand_regYear_bin | 是 | 是 | 衍生/类别 | 品牌+注册年份分段 |
  | model_freq | 是 | 是 | 频数编码 | 高基数类别 |
  | brand_model | 是 | 是 | 衍生/类别 | 品牌+车型 |
  | brand_model_freq | 是 | 是 | 频数编码 | 高基数类别 |
  | brand_power_bin_freq | 是 | 是 | 频数编码 | 高基数类别 |
  | brand_age_segment_freq | 是 | 是 | 频数编码 | 高基数类别 |
  | regionCode_freq | 否 | 是 | 频数编码 | 5.3新增 |
  | brand_model_age | 否 | 是 | 衍生/类别 | 5.3新增，品牌+车型+车龄段 |
  | brand_model_age_freq | 否 | 是 | 频数编码 | 5.3新增 |
  | powertrain_type | 否 | 是 | 衍生/类别 | 5.3新增，燃油+变速箱+功率段 |
  | powertrain_type_freq | 否 | 是 | 频数编码 | 5.3新增 |
  | v_0 ~ v_14 | 是 | 是 | 匿名特征 | 原始数值特征 |
  | v_pca_0 ~ v_pca_9 | 是 | 是 | PCA降维 | 匿名特征主成分 |
  | v3_car_age_interaction | 否 | 是 | 衍生/数值 | 5.3新增，v_3*car_age |
  | v12_power_log_interaction | 否 | 是 | 衍生/数值 | 5.3新增，v_12*power_log |
  | power_10bins | 否 | 是 | 分位数分箱 | 5.3新增 |
  | has_sport | 否 | 是 | 文本特征 | 5.3新增，车名含sport |
  | has_premium | 否 | 是 | 文本特征 | 5.3新增，车名含luxury/premium |
  | is_high_mileage | 否 | 是 | 业务规则 | 5.3新增，年均公里>2 |
  | brand_price_mean | 是 | 是 | 统计特征 | 品牌均价 |
  | brand_price_median | 是 | 是 | 统计特征 | 品牌中位价 |
  | brand_price_std | 是 | 是 | 统计特征 | 品牌价格标准差 |
  | brand_price_count | 是 | 是 | 统计特征 | 品牌样本数 |
  | brand_price_ratio | 是 | 是 | 统计特征 | 品牌均价/全局均价 |
  | region_brand_price_mean | 否 | 是 | 统计特征 | 5.3新增，区域品牌均价 |
  | region_brand_price_std | 否 | 是 | 统计特征 | 5.3新增，区域品牌价格std |
  | brand_mean_car_age | 否 | 是 | 统计特征 | 5.3新增，品牌平均车龄 |
  | brand_mean_kilometer | 否 | 是 | 统计特征 | 5.3新增，品牌平均公里 |
  | car_age_ratio_to_brand_mean_age | 否 | 是 | 统计特征 | 5.3新增 |
  | kilometer_ratio_to_brand_mean_km | 否 | 是 | 统计特征 | 5.3新增 |
  | brand_v3_mean | 否 | 是 | 统计特征 | 5.3新增，品牌v_3均值 |
  | brand_v3_median | 否 | 是 | 统计特征 | 5.3新增，品牌v_3中位数 |
  | brand_v3_std | 否 | 是 | 统计特征 | 5.3新增，品牌v_3 std |
  | regYear_from_now | 是 | 是 | 衍生/数值 | 距今注册年数 |
  | creatYear_from_now | 是 | 是 | 衍生/数值 | 距今创建年数 |
  | regSeason | 是 | 是 | 衍生/类别 | 注册季节 |
  | creatSeason | 是 | 是 | 衍生/类别 | 创建季节 |
  | ..._missing | 是 | 是 | 缺失指示符 | 处理缺失值 |
  | ..._outlier | 是 | 是 | 异常值指示符 | 处理异常值 |


> 注：部分特征如`region_brand_price_mean`、`brand_model_age`、`powertrain_type`等为5.3新增，4.2.1未涉及。

---

# 总结
- 5.3_xgb_optimize_feature.py 特征更丰富，衍生和交互特征更多，统计特征和缺失/异常处理更细致。
- 4.2.1model_xgb_more_feature_save_train_result_4000(best).py 以基础特征和部分衍生特征为主，特征工程相对简单。
- 推荐在实际建模中采用5.3的特征工程体系，提升模型表现。 





1，去除has_sport和has_premium这两个特征值，
2，将power改成类别特征值
3，kilometer列的数值取值时应乘以10000

4，saleID 和name没有任何意义，训练时可以去除。

请充分考虑特征工程中的特征值的相关性，修改程序的特征工程部分的代码，一定要考虑与以上特征值相关的特征值的修改，包括缺失值和异常值的处理，分桶处理等。