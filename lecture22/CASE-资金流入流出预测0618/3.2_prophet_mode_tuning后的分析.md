### 一、最优参数回顾

当前自动调优结果如下（见`3.2_prophet_best_params.txt`）：

- **申购最优参数**:  
  `{'changepoint_prior_scale': 0.01, 'seasonality_prior_scale': 5.0, 'holidays_prior_scale': 5.0, 'seasonality_mode': 'multiplicative'}`  
  最优验证集RMSE: 92057040.43

- **赎回最优参数**:  
  `{'changepoint_prior_scale': 0.01, 'seasonality_prior_scale': 5.0, 'holidays_prior_scale': 20.0, 'seasonality_mode': 'additive'}`  
  最优验证集RMSE: 67659354.34

---

### 二、图片分析与手工调参建议

#### 1. 申购/赎回分解图（components）

- **申购（purchase_components）**
  - **趋势（trend）**：呈现明显的线性下降趋势，说明changepoint_prior_scale较小（0.01）使得趋势非常平滑，不容易捕捉突变。
  - **节假日（holidays）**：有明显的负向影响，节假日效应被模型识别，但幅度较大且规律性强，holidays_prior_scale=5.0，说明模型对节假日有一定敏感度，但未过拟合。
  - **周效应（weekly）**：周一、周二有正向高峰，周末为低谷，符合金融产品申购的实际规律。
  - **年效应（yearly）**：3月、9月有高峰，可能与季节性理财需求有关。
  - **月效应（monthly）**：月初和月末有波动，说明月内周期性存在。

- **赎回（redeem_components）**
  - **趋势（trend）**：呈现线性上升，changepoint_prior_scale同样较小，趋势平滑。
  - **节假日（holidays）**：holidays_prior_scale=20.0，节假日影响被极大放大，模型对节假日极为敏感，可能有过拟合风险。
  - **周效应（weekly）**：周一高峰，周五低谷，符合赎回业务规律。
  - **年效应（yearly）**：3月、9月有高峰，和申购类似。
  - **月效应（monthly）**：月末有明显高峰，符合理财产品到期赎回的实际。

#### 2. 申购/赎回对比图（purchase_redeem_compare）

- **in-sample预测与真实值**：模型对训练集拟合较好，波动趋势基本一致。
- **9月预测**：预测曲线与真实值趋势一致，但波动幅度略有收敛，部分极端值未能捕捉，说明模型对突变不敏感。

#### 3. 残差图（purchase_residuals/redeem_residuals）

- **申购残差**：大部分残差在0附近，偶有较大正负波动，说明模型整体拟合尚可，但对极端值捕捉不足。
- **赎回残差**：分布类似，偶有大幅波动，说明模型对部分日期的异常波动拟合不足。

---

### 三、手工调参建议

#### 1. changepoint_prior_scale（趋势变化灵敏度）

- 当前为0.01，趋势极为平滑，模型对突变不敏感。
- **建议**：可适当增大（如0.05~0.1），让模型对趋势突变更敏感，提升对极端波动的拟合能力。

#### 2. seasonality_prior_scale（季节性灵敏度）

- 当前为5.0，季节性分量波动适中。
- **建议**：如发现季节性波动被低估，可适当增大（如10.0）；如有过拟合迹象则适当减小。

#### 3. holidays_prior_scale（节假日灵敏度）

- 申购为5.0，赎回为20.0，赎回对节假日极为敏感。
- **建议**：赎回的holidays_prior_scale可适当减小（如10.0），防止过拟合节假日效应；申购可略微增大或保持。

#### 4. seasonality_mode（季节性模式）

- 申购为multiplicative，赎回为additive。
- **建议**：如发现季节性波动随趋势变化而变化，multiplicative更合适；否则additive即可。可尝试切换对比。

---

### 四、当前最优参数的含义

- **changepoint_prior_scale=0.01**：模型对趋势变化极为保守，适合趋势平稳但不适合突变。
- **seasonality_prior_scale=5.0**：季节性分量适中，既不过拟合也不欠拟合。
- **holidays_prior_scale=5.0/20.0**：申购对节假日敏感度适中，赎回极高，需警惕过拟合。
- **seasonality_mode**：申购为乘法型，赎回为加法型，说明申购的季节性波动随趋势变化而变化，赎回则为固定幅度。

---

## 总结建议

1. **趋势参数可适当放宽**，如changepoint_prior_scale调至0.05或0.1，提升对突变的拟合能力。
2. **赎回的holidays_prior_scale建议降低**，如10.0，防止节假日效应过拟合。
3. **可尝试不同的seasonality_mode**，对比效果。
4. **如残差仍有明显周期性或趋势**，可考虑引入外部变量（如利率、宏观经济数据等）。

如需进一步手工调参建议或参数组合推荐，可指定具体目标（如更关注极端波动、节假日效应等），我可为你给出更细致的调参方案！