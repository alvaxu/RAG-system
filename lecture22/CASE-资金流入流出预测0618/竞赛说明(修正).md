# 资金流入流出预测竞赛说明（修正版）

---

## 1. 数据表结构

### 1.1 用户信息表（user_profile_table.csv）
| 字段名        | 类型    | 含义         |
|---------------|---------|--------------|
| user_id       | int     | 用户ID       |
| sex           | int     | 性别（1：男，0：女）|
| city          | int     | 城市编码     |
| constellation | string  | 星座         |

### 1.2 用户申购赎回数据表（user_balance_table.csv）
| 字段名               | 类型    | 含义                     |
|----------------------|---------|--------------------------|
| user_id              | int     | 用户ID                   |
| report_date          | int     | 日期（YYYYMMDD）         |
| tBalance             | int     | 今日余额                 |
| yBalance             | int     | 昨日余额                 |
| total_purchase_amt   | int     | 今日购买总量             |
| direct_purchase_amt  | int     | 今日直接购买量           |
| purchase_bal_amt     | int     | 今日宝付宝购买量         |
| purchase_bank_amt    | int     | 今日银行卡购买量         |
| total_redeem_amt     | int     | 今日赎回总量             |
| consume_amt          | int     | 今日消费总量             |
| transfer_amt         | int     | 今日转出总量             |
| tftobal_amt          | int     | 今日转出到支付宝余额总量 |
| tftocard_amt         | int     | 今日转出到支付宝卡总量   |
| share_amt            | int     | 今日收益                 |
| category1            | float   | 今日类别1消费总额        |
| category2            | float   | 今日类别2消费总额        |
| category3            | float   | 今日类别3消费总额        |
| category4            | float   | 今日类别4消费总额        |

- 金额单位均为"分"（0.01元人民币）。
- 若当日总赎回量为0（consume_amt=0），则四个类目为空。

### 1.3 收益率表（mfd_day_share_interest.csv）
| 字段名           | 类型    | 含义           |
|------------------|---------|----------------|
| mfd_date         | int     | 日期（YYYYMMDD）|
| mfd_daily_yield  | float   | 当日万份收益    |
| mfd_7daily_yield | float   | 七日年化收益率  |

### 1.4 上海银行间同业拆放利率（mfd_bank_shibor.csv）
| 字段名           | 类型    | 含义           |
|------------------|---------|----------------|
| mfd_date         | int     | 日期（YYYYMMDD）|
| Interest_O_N     | float   | 隔夜利率       |
| Interest_1_W     | float   | 1周利率        |
| Interest_2_W     | float   | 2周利率        |
| Interest_1_M     | float   | 1月利率        |
| Interest_3_M     | float   | 3月利率        |
| Interest_6_M     | float   | 6月利率        |
| Interest_9_M     | float   | 9月利率        |
| Interest_1_Y     | float   | 1年利率        |

---

## 2. 竞赛任务

选手需基于历史数据，预测2014年9月1日至2014年9月30日（共30天）每日的申购总额（purchase）和赎回总额（redeem）。

- 申购总额：所有用户在该日的 total_purchase_amt 之和。
- 赎回总额：所有用户在该日的 total_redeem_amt 之和。

---

## 3. 输出文件格式

- 输出文件名：`tc_comp_predict_table`（或 `comp_predict_table.csv`）
- **无表头**，每行格式如下：

```
report_date,purchase,redeem
```

- 其中：
    - report_date：预测日期，格式为YYYYMMDD（如20140901）
    - purchase：预测申购总额（单位：分，整数）
    - redeem：预测赎回总额（单位：分，整数）

- 示例：
```
20140901,40000000,30000000
20140902,40000000,30000000
20140903,40000000,30000000
...
20140930,40000000,30000000
```

---

## 4. 评分标准

- 每天的申购和赎回预测分别与真实值计算相对误差：
    - 申购相对误差：
      \( PurchaseErr = \left|\frac{z_i-\hat{z}_i}{z_i}\right| \)
    - 赎回相对误差：
      \( RedeemErr = \left|\frac{y_i-\hat{y}_i}{y_i}\right| \)
    - 其中 \( z_i \) 为真实申购，\( \hat{z}_i \) 为预测申购，\( y_i \) 为真实赎回，\( \hat{y}_i \) 为预测赎回。
- 误差与得分之间为单调递减关系，误差越小得分越高。
- 当相对误差 > 0.3 时，得分为0；≤0.3 时，得分为10分。
- 最终总得分 = 申购预测得分 * 45% + 赎回预测得分 * 55%。

---

## 5. 其他说明

- 所有数据文件均为UTF-8编码。
- 预测结果请严格按照输出格式提交。
- 详细字段释义请参考本说明的"数据表结构"部分。 