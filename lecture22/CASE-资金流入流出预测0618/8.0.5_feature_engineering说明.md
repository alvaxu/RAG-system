# 8.0.2递归LightGBM方案逐步优化路线

## 阶段一：特征工程极大丰富
- 目标：实现静态（用户画像）、动态（历史行为）、交互、周期、外部经济等全量特征。
- 步骤：
  1. 新建/重构特征工程函数，生成所有特征。
  2. 保证所有特征在预测区间都能用历史已知信息生成。
  3. 对新用户历史特征缺失填0，is_new_user=1。
- 注意事项：
  - 特征工程建议单独成脚本，便于调试和复用。
  - 每次大改动建议先小样本调试，确认无误再全量跑。

## 阶段二：递归预测与训练机制完善
- 目标：递归窗口可扩展，递归训练/混合训练机制健全。
- 步骤：
  1. 递归预测支持lag1/3/7等，递归逻辑正确。
  2. scheduled sampling混合概率可调优。
  3. 递归部分用向量化批量赋值。
- 注意事项：
  - 递归预测时，所有特征都只能用历史已知信息，不能泄漏未来。

## 阶段三：模型与验证优化
- 目标：特征重要性分析、验证集评估、异常值处理。
- 步骤：
  1. 输出特征重要性TopN，辅助特征筛选。
  2. 用8月数据做验证，调优参数。
  3. 对极端用户/天做分箱、截断等。
- 注意事项：
  - 每次优化后，务必用8月验证集评估效果，防止过拟合。

## 阶段四：进阶优化与融合
- 目标：模型融合、特征自动筛选、分布式递归。
- 步骤：
  1. 残差建模、与Prophet等模型融合。
  2. 基于重要性或LGBM内置筛选特征。
  3. 大数据量下递归预测分布式/并行优化。
- 注意事项：
  - 冷启动机制要健全，保证新用户预测合理。
  - 持续跟踪特征重要性，指导特征筛选和模型迭代。 