# Coze工作原理与应用实例

# 今天的学习目标

# Coze工作原理与应用实例

Agent与Copilot的区别  
插件使用  
工作流使用  
RAG知识库  
CASE:AI新闻Agent  
CASE：创建搜索新闻工作流  
CASE:weather_news工作流 (基于意图识别)  
CASE：抖音文案提取&二创  
CASE：LLM联网搜索  
CASE:搭建古诗词Agent

# Agent与Copilot的区别

# 自主性

目标导向

<html><body><table><tr><td>Copilot</td><td>Agent</td></tr><tr><td>主要是作为辅助工具，依赖用户的输入和反馈 来提供建议和改进。</td><td>通常具有较高的自主性，能够独立完成任务， 不需要持续的用户干预。</td></tr><tr><td>主要目标是辅助用户，提高用户完成任务的效 率和质量。</td><td>通常被设计为实现特定目标，可以根据环境变 化调整策略。</td></tr><tr><td>主要与用户进行交互，通过用户的输入和反馈</td><td>可以与其他Agent或系统进行复杂的交互，通常</td></tr><tr><td>提供实时建议。 主要应用于编程辅助、文档写作和教育等需要</td><td>用于多Agent系统中。 广泛应用于自动化、监控、推荐系统等各种领域。</td></tr></table></body></html>

交互方式

应用场景

# 搭建你的AIAgent

# Coze工具使用：

·AI应用开发平台，快速搭建基于大模型的各类Bot，并将Bot发布到社交平台、通讯软件或部署到网站上。

·集成了丰富的插件工具， 内置插件60款插件（资讯阅读、旅游出行、效率办公、图片理解），也可以自定义插件

提供了知识库来管理和存储数据， 可将TXT、PDF、DOCX、Excel、CSV上传至知识库，也可基于URL获取在线网页内容

·持久化的记忆能力 提供了方便AI交互的数据库记忆能力

·灵活的工作流设计，可以用来处理逻辑复杂，且有较高稳定性要求的任务流

扣子

# 十创建Bot

主页

呂 个人空间

探索

Bot商店

$\otimes$ 插件商店

工作流商店

》模型广场

# 搭建第一个Al Bot

搭建第一个Al Bot:

Step1，点击创建Bot，填写相关信息

Step2，进入到Bot编排页面

人设与回复逻辑：描述Bot的身份和任务。单击复制可使用模板格式添加描述。

中间技能面板为Bot配置各种扩展能力。

在右侧预览与调试面板中，实时调试Bot。

![](images/7b884f6a1f3fd568db78414726a1c569eeb680f631de24e0d26ca11f138318a3.jpg)

# 搭建第一个Al Bot

1）人设与回复逻辑：

每天推送给我AI相关的新闻  
点击优化按钮  
2）为Bot添加技能  
在技能区域单击 $^ +$ 图标，添加插件  
选择阅读新闻 $>$ 头条新闻 $>$ getToutiaoNews，然后单击新增

# 头条新闻

持续更新，了解最新的头条新闻和新闻文章。

固

1个工具 44.4K个Bots正在使用

扣子官方丨发布于2024-04-2615:55☆729

getToutiaoNews 搜索新闻讯息

89.4K- 44.4KI 740ms 99.8%

q 参数

89.4K- @ 19.1KI 740ms 1 99.8%

# 提示词优化

# #角色

你是一个专注于AI领域的新闻推送员，能够为用户筛选和推送最新、最有价值的AI相关新闻。

##技能

###技能1:新闻筛选

1.每天从权威的新闻网站和渠道获取AI相关新闻。  
2.根据新闻的重要性、热度和相关性进行筛选。

###技能2:新闻推送

1.以清晰、简洁的语言向用户推送新闻。

2.每条新闻的推送格式如下：

$$
= = = = =
$$

新闻标题： $\angle$ 新闻标题>$\textcircled { \scriptsize 5 }$ 发布时间： $\angle$ 新闻的发布日期和时间>$0$ 新闻摘要： $< 1 0 0$ 字左右的新闻内容摘要>

# 搭建第一个Al Bot

# 3）修改人设与回复逻辑

告诉Bot使用getToutiaoNews插件来搜索Al新闻。否则，Bot可能不会按照预期调用该工具。

##技能###技能1:新闻查找

1.当用户询问最新新闻时， 先调用 getToutiaoNews搜索最新人工智能新闻 确保搜索的是AI主题

2.从搜索结果中筛选出AI主题相关的新闻  
3.筛选最重要的5条新闻，并按照时间升序排序

建议使用通义千问-Max引擎，推理质量会更好

# 在右侧进行提问和调试

# 预览与调试

# 调试

![](images/a46e95eefc078df84f5855a4ae6e5aaa39acd28bac707bb0a0012e09a53261a2.jpg)

# cystanford

# 今天的新闻

![](images/22ecc3057f1f0fdee7dc057a71a5abd1ce2a5d794e04b8e37458864930db3fba.jpg)

# AI新闻助手

$\boldsymbol { \odot }$ 运行完毕

以下是最近关于人工智能的几条重要新闻：

# 1．人工智能

$\textcircled { \scriptsize 5 }$ 发布时间:2024-06-1012:38  
$0$ 新闻摘要：人工智能正深刻影响并改变人类生活，应用包括自动驾驶、客服、医疗诊断、智能家居等，极大地便捷了人类生活。

# 2.人工智能！

$\odot$ 发布时间:2024-06-1320:13  
$0$ 新闻摘要:关注重点企业如新易盛、工业富联、中际旭创等在人工智能领域的动态。

# 3．人工智能！

2 $\odot$ 发布时间:2024-06-1220:15  
$0$ 新闻摘要:重点提及沃尔核材、丰立智能等公司，强调在人工智能相关股票的关注建议。

# 4.人工智能

$\textcircled { \scriptsize 5 }$ 发布时间:2024-06-10 06:32

# 编写提示

对于复杂的Bot，推荐使用结构化格式编写，采用Markdown语法# Character <Bot 人设>

你是数据分析专家，擅长使用analyze工具，包括提取、处理、分析和解释数据，用通俗易懂的语言解释数据特性和分析结果。

## Skills <Bot 的功能>### Skill 1: 提取数据

1.当用户提供一个数据源或者需要你从某个数据源提取数据时，使用analyze工具的extract数据功能。  
2.如果用户提供的数据源无法直接提取，需要使用特定的编程语言，如Python 或R，写脚本提取数据。

# ### Skill 2:处理数据

1.使用analyze工具的datacleaning功能进行数据清洗，包括处理缺失值、异常值和重复值等。

2.通过数据转换、数据规范化等方式对数据进行预处理，使数据适合进一步的分析。

### Skill 3:分析数据

1.根据用户需要，使用analyze工具进行描述性统计分析、关联性分析或预测性分析等。  
2.通过数据可视化方法，如柱状图、散点图、箱线图等，辅助展示分析结果。

# ## Constraints <Bot 约束>

-只讨论与数据分析有关的内容，拒绝回答与无关的话题。  
-输出的内容必须按照给定的格式进行组织，不能偏离框架要求。  
-对于分析结果，需要解释其含义，不能仅仅给出数字或图表。  
·在使用特定编程语言提取数据时，必须解释所使用的逻辑和方法，不能仅仅给出代码。

# 使用扣子助手创建AIBot

使用扣子助手创建AIBot：

进入扣子，直接输入：

我想创建AIBot

![](images/208e75c1b032c5465e0f4a5bb2fa83612e64c81af7d8efd8fcb9cfde3b0c826a.jpg)

cystanford

# 我想创建AIBot

# 扣子助手

![](images/34d367ae0557aa5fc5c42011cfd11808b880ee52e3b8e23a23fb5801738f7286.jpg)

好呀，那能和我说说这个Bot要用来做什么呀？这样我好给它想个合适的名字和描述。

cystanford

![](images/7c65567311c0336eae6f66183f2acd7966d5d4048a5c58d56746a5d25fb34d91.jpg)

我先做一个AI新闻助手，帮我收集每天的AI资讯

# 扣子助手

二

创建好之后，点击进入AIBot，可以看到设置好的内容，并进行调整

正在创建Bot

![](images/fbe6adffaa5a8ea29709d34083714b718959af862bb0c224d1cceab36523626a.jpg)

# AI新闻助手

个人空间 草稿已自动保存08:11:04

编排 冚 单 Agent 模式· $0$ 豆包·Functioncall模型

# 人设与回复逻辑

$\textcircled{4}$ 优化

#角色

你是一个专业的AI资讯收集员，能够及时、全面地收集每天的AI相关资讯。

##技能

###技能1:资讯搜索

1.运用多个权威的科技资讯网站、社交媒体平台和专业的AI论坛，搜索当日最新的AI资讯。

2.筛选出具有重要性、影响力和创新性的资讯内容。

3.对收集到的资讯进行分类，如技术突破、应用案例、行业动态等。回复示例：

资讯类别: $\angle$ 类别名称，如技术突破>资讯标题: $<$ 资讯的完整标题>$0$ 资讯简介： $< 1 0 0$ 字左右的资讯概要>$\boldsymbol { \mathcal { O } }$ 资讯来源: $<$ 资讯的来源链接>

$= = = = = =$ ## 限制:

-只收集与AI直接相关的资讯，排除不相关的内容。  
-按照给定的格式进行整理和回复，不得随意更改。  
-每条资讯的简介不超过100 字。  
-优先选择权威可靠的资讯来源。

插件使用

# 插件使用

# 添加插件

排序：最受欢迎▼

# 提交反馈

Q搜索

·在技能 $\Rightarrow$ 添加插件中，可以看到已有的60多款插件，支持自定义插件，集成需要的API

# 创建插件

我的工具

收藏

![](images/82845348fa3d2f7bf3e40bfc237425d1ae6e5f7b87959edae08293f221fe2096.jpg)

探索工具

8：

全部

$\bullet$ 自动推荐

F 新闻阅读

照片与摄影

# 图片理解

实用工具

回答用户关于代表URL的图片的问题。

![](images/12cf4ead47acce45c921463f143cbba77457e1163697e4c2ce5822ead397bdae.jpg)

1个工具 78.5K个Bots正在使用

便利生活

扣子官方|发布于2024-06-1120:521175

2.9K 78.5K T 5905ms 99.1%

网页搜索

# 头条搜索

科学与教育

使用头条的搜索功能来阅读或搜索URL链接。

![](images/9d2f2479e8d62117ff4d1ab1b8f87e7fe5aca47e2cad321f7f27bd5589ddd870.jpg)

2个工具

53.8K个Bots正在使用

# 插件创建

创建插件：每个插件可添加多个工具，每个工具都是一个独立的API服务。同一个插件内的不同工具必须使用相同的域名，即有相同的 endpoint。比如，一个天气查询的API Service 有两个endpoint：

查询当前天气:http://api.weather.com/current 查询未来天气:http://api.weather.com/forecast

![](images/94b40c5bb07f1955547219ef17fb144259b287f25e618c3dad8a231ce02d347f.jpg)

每个工具是一个独立的API服务，即endpoint，插件下可以有多个工具

# 插件创建

Step1，你需要在团队空间中，选择插件 $\Rightarrow$ 创建插件

团队空间 +

![](images/96fdd5b776324cf6290fe0160610e5f221477ddd47d54052bf589a8a61732626.jpg)

team1

Step2，填写插件信息 (以火山引擎列出数据流事件ListMediapipeEvent为例)

选择：基于已有服务创建

插件URL: https://open.volcengineapi.com

将以下Header信息配置到Header列表中

X-Use-Volcengine $= 1$

X-Volcengine-Access-key $\mathbf { \tau } = \mathbf { \tau }$ AKLTMTdIMGYzNTZiY2FINDFmM2FmYTI1ZmlyMjYwNTJjZDU X-Volcengine-Secret-key $\mathbf { \tau } = \mathbf { \tau }$

TIRjNVlqWXIZV1UwWWpBNU5EUTVPR0UyTmpBM1lqWmtNek0xTWpaa1pEWQ==

Service：服务代码，固定值vei_apiRegion:火山引擎APl支持的地域，这里使用cn-beijingVersion：API版本，这里使用2022-01-01

![](images/3ba63ea982125417d4ef0bc1f42bf9aa9f863849601cbe9a56654ee6c4d530e2.jpg)

ListMediapipeEvent是用于查询视频数据流事件，帮助用户更好地分析视频数据流的处理结果

# 插件创建

Step3，添加工具

工具名称：ListMediapipeEvent

工具描述：获取数据流时间列表

工具路径：/ListMediapipeEvent

请求方法：POST

Step4，配置输入参数：新增参数 page_index

page_size

created_orderby

event_type

![](images/88ad40f70c2d48f67901b1638bd3336e159fdfd91ecb822f5fd360b4069b72b6.jpg)

# 插件创建

Step5，配置输出参数

# 自动解析

点击自动解析，会将返回参数自动填充到输出参数列表。你可以根据需求进行修改。单击保存并继续

![](images/a03f908dc3ee88309da423338d3f17678c6b74b0c0f8058f45b8cc172e48e31a.jpg)  
配置输出参数

# $^ +$ 新增参数

# 插件创建

![](images/136b9ea4f745e06414bd9fe0830c051568bd0fb30de8d89c7e2cc51d4c7f17b6.jpg)

Step6，调试与校验  
设置page_index ${ \bf \varepsilon } = 1 \$   
page size $_ { = 1 0 }$   
点击运行，在右侧看到运行结果

![](images/39fe557ca29469623b0114ccc69ea51cfba534a53bc0d740ea0080e6f58cc232.jpg)

声音.ListMediapipeEvent调试结果 调试通过

# Json 口

"ResponseMetadata":{ "Version": "2022-01-01", "Service":"vei_api", "Region":"cn-beijing", "RequestId": "202406161253350F7321890008FE977893", "Action":"ListMediapipeEvent"   
"Result": { "pageinator":{ "index": 1, "size": 10, "total_pages": 0, "total_items": 0

# 插件创建

Step7，发布插件点击发布，个人信息收集声明选择否

# 个人信息收集声明

×

发布完成前，我们需要确认你发布的插件是否会收集、传输用户的个人信息，请如实填写

插件／数据流管理数据流管理  
1未发布数据流管理

![](images/9d7c85ce589f153e87429c4b2d3a865469caeb4bd85056054a4f33e0477b5259.jpg)

是，前往填写 否，直接发布工作流使用

工具列表  

<html><body><table><tr><td>工具名称</td><td>输入参数</td><td>服务状态</td><td>调试状态</td><td>Bot引用数</td><td>创建时间</td><td>启用</td><td colspan="4">操作</td></tr><tr><td>ListMediapipeEvent 获取数据流时间列表</td><td>page_index +3</td><td>下线</td><td>通过</td><td></td><td>2024-06-16 12:26</td><td></td><td></td><td>四</td><td></td><td>···</td></tr></table></body></html>

# CASE: 创建搜索新闻工作流

工作流：工作流由多个节点构成，节点是组成工作流的基本单元。通过工作流可以完成复杂的任务处理

TODO：创建搜索新闻工作流 getNews_tasks  
Step1，在页面顶部进入工作流，点击创建工  
作流  
Step2，设置工作流信息  
工作流名称：getNews_tasks  
工作流描述：搜索新闻

![](images/aab84666de253347023c0e7923f13dc1d438404aee0bf23b2679ece640d7986f.jpg)

# CASE: 创建搜索新闻工作流

Step3，添加插件  
选择新闻阅读 $\Rightarrow$ 头条新闻  
getToutiaoNews  
Step4，连接节点顺序  
开始 $$ getToutiaoNews $$ 结束开始节点：新增user_input参数，选择String类型  
getToutiaoNews节点：输入参数固定取值q，仅需要在参数值区域选择引用开始-user_input。  
结束节点：新增output输入参数，并在参数值区域选择引用getToutiaoNews $>$ news。

![](images/7b481838f83844b6e59c41f5d221f30ee285a83c20041a9d9d50c051d28d9101.jpg)

# 开始

工作流的起始节点，用于设定启动工作流需要的信息

![](images/05e4e938b85136b65e4ca9ff9cb35d29a4e1e775508ffd2b5c0b8c5630aed8e7.jpg)

# CASE: 创建搜索新闻工作流

配置完成后，单击页面右上角的试运行，测试工作流；测试结束后，可进行发布

![](images/5085690e9e660a905c18ab6235c3f82685cd06dac500f752400aa039c72436eb.jpg)

# CASE: weather_news工作流 (基于意图识别）

# TODO：创建用户意图识别工作流 weather news

使用大模型节点将用户输入数据分为1（天气）、2 (新闻）、3 (其他) 三种类型。

使用选择器节点判断用户输入数据的类型，并进行处理:

·如果数据类型为1，将数据流转至大模型节点和天气插件节点，获取地区天气。  
·如果数据类型为2，将数据流转至新闻插件节点获取新闻。  
·如果数据类型为3，不做处理直接返回。

![](images/0f6966090b3b3887cfbe32e5c252dd56725d427682bc618cf1eecf849e4e47dd.jpg)

# CASE： weather_news工作流 (基于意图识别）

Step1，创新新的工作流，并配置信息在页面顶部进入工作流页面，并单击创建工作流。。

工作流名称：weather_news

工作流描述：识别用户意图并获取相关信息，只支持2种意图：获取天气、获取新闻Step2，添加节点，依次添加：大模型节点、选择器节点、插件节点

![](images/d191e88e055f85b706ddf7768408bcf35bd0276a0626cb7fc3a9fe2c0e0347b1.jpg)

# CASE:weather_news工作流 （基于意图识别）

Step3，节点信息配置开始节点：新增input参数，选择String类型大模型节点：单次模式，输入input参数，引用开始-input提示词采用以下Markdown内容：

##分析  
分析以下使用括起来的文本:  
{input}}  
##返回  
-如果文本与天气有关，则返回1  
-如果文本与新闻有关，则返回2  
-否则返回3

![](images/c536bfd828c0f67cd252ea4c0d10dafc9450dad3e03ba7e1227d64bdfdd3ed5e.jpg)

# CASE:weather_news工作流 （基于意图识别）

设置第一个选择器节点。从该节点开始，工作流分为两个分支：

分支1：如果区域的判断条件设置为大模型-output包含输入1，并连接至第二个LLM节点（LLM_1）。该分支用于获取天气数据。

分支2：否则区域无需设置参数，连接至第二个选择器节点即可。  
该分支用于做下一步的判断。

![](images/728c1fb6717e63b9a162786b6283f5a8e1e1b0cbc74a2ae792455224cd35cbc2.jpg)

# CASE: weather_news工作流 （基于意图识别）

创建新的大模型节点：大模型_1输入参数input $\mathbf { \sigma } = \mathbf { \sigma }$ 引用开始-input提示词采用以下Markdown内容：

##返回  
从{{input}}中提取地理位置信息，并转换为对应的经纬度（十进制数值）。  
-纬度参数：{{lat}}  
-经度参数：{ng}}

输出值:新增lat，类型选择 String。新增 Ing，类型选择 String。

![](images/5af50201e3bca941528b1acea3602f2c18cf46f7bcc032e0a0d13e830914efb0.jpg)

十新增

# CASE: weather_news工作流 （基于意图识别）

添加插件 $\Rightarrow$ 临近天气weather大模型_1的输出结果作为weather的输入

设置weather的输入参数：设置lat参数，在参数值区域选择引用大模型_ $\phantom { + } 1 > | \mathsf { a t } _ { \mathsf { c } }$ 设置Ing参数，在参数值区域选择引用大模型_ $\cdot ^ { 1 } > \mathsf { I n g } _ { \circ }$ （204

结束节点的输入，新增参数weatherForecasts 引用weather -data

![](images/8d7955cf0ce15eb32377acaf4a567a11831bcb9a879c8c737eb6e1d39911fb69.jpg)

![](images/f1775e2648034d2d2703e0fb09103fdaf2507cde0017a91318fb2aa9f78a99e8.jpg)

# CASE: weather_news工作流 （基于意图识别）

# 处理分支二：

进行下一步判断，判断是获取新闻，还是流转至End节点。 选择器_1 (第二个选择器节点)

如果区域的判断条件设置为大模型-output包含输入2，并连接至getToutiaoNews节点。该分支用于获取新闻。否则区域无需设置参数，连接至End节点即可。

这里需要添加好 getToutiaoNews 插件

![](images/05cfc19c6e1aa5f158bbe2cd95b73cf62ed7f1b54267f4cc3c981ce2d7fad004.jpg)

![](images/f2a3823803d0131b740792baea05ca4f3d685dfbb4bc5ee1f0f9c1a62ee7969e.jpg)

# CASE: weather_news工作流 （基于意图识别）

getToutiaoNews 节点 (搜索新闻)

选择单次模式，参数q引用开始 $>$ input。

结束节点的输出参数设置：

参数名称output，参数值选择引用大模型-output。该参数用于返回用户意图。

参数名称newsltems，参数值选择引用getToutiaoNews >news。该参数用于返回新闻内容。

# 结束

工作流的最终节点，用于返回工作流运行后的结果信息

# 选择回答模式

返回变量，由Bot生成回答

# 输出变量

![](images/9da7d267d29b1aeea1841da556e2d3cecf05dad98d358f0175550239ea7566a9.jpg)

十新增

# CASE: weather_news工作流 （基于意图识别）

试运行：

测试1：输入上海天气

![](images/0585131e45f5e6a7282444b9754a933dbe2e47f0cdc3e6665faf2278615b612e.jpg)

# CASE: weather_news工作流 （基于意图识别）

测试2：输入AI新闻

![](images/8d98c41756f061028c8fca8de597a7cd4155a23eca155342ff1cfa9a2af13195.jpg)

# CASE: weather_news工作流 （基于意图识别）

测试3： $1 + 1 = ?$

![](images/3cc1a20b89e14272d1fbc2376b71b5d3d38ec830fbf2254bbba6515bb2bb699a.jpg)

# CASE: weather_news工作流 (基于意图识别)

![](images/ff54bd34e3f06ef63c80e341e59466777f4213c5db1ca48ab2ca43619b2c7d18.jpg)

RAG知识库

# RAG知识库

RAG (Retrieval-Augmented Generation 检索增强生成在回答问题或生成文本时，先从大规模文档库中检索相关信息，然后利用这些检索到的信息来生成响应或文本，从而提高回复内容的质量。

RAG的两个关键阶段：

·检索阶段：使用编码模型基于问题检索相关文档·生成阶段：使用检索到的上下文作为条件生成文本。

RAG技术可以很好地解决大模型的胡乱编造的问题扣子的知识库功能支持上传外部数据，上传后可自动分段和编码，然后在Bot开发界面选择导入指定的知识库

![](images/5cf2a4cb84f1ba347ce1b548d09d62da8e8abaa1a39bcd3a1cad3dbf22b55b2c.jpg)

# RAG知识库

# 知识库的应用场景：

# ·语料补充：

创建一个虚拟形象与用户交流，你可以在知识库中保存该形象相关的语料。后续Bot会通过向量召回最相关的语料，模仿该虚拟形象的语言风格进行回答。

# 客服场景：

将用户高频咨询的产品问题和产品使用手册等内容上传到扣子知识，Bot可以通过这些知识精准回答用户问题

# 垂直场景:

创建一个包含各种车型详细参数的汽车知识。当用户查询某一车型的百公里油耗是多少时，可通过该车型召回对应的记录，然后进一步识别出百公里油耗。

![](images/7e5d5b5f4356ea579dc815372368c90e7ccb9a009aa606ca4109d233c2a25bab.jpg)

# CASE: 创建产品知识库

# TO DO: 创建一个飞连产品的知识库

当用户有产品使用需求的时候可以进行任意咨询同时增加大模型定价知识

Q1：有出差员工如何进行远程办公Q2：如何限制指定部门访问指定资源Q3：如何允许指定部门访问指定资源Q4：如何让不同部门员工使用不同VPN节点Q5：Qwen-Turbo费用多少

# 数据来源：

《远程办公场景最佳实践》word文档大模型定价Excel文档飞连产品介绍在线网页内容

![](images/f5f778a3cc663c9bd523975eadd29a84ebd6b28d082df9277a9984fdc65bfc7a.jpg)

# CASE: 创建产品知识库

创建知识库应用的步骤：

Step1，收集数据

# 1) 确认信息源

为了解决用户使用飞连产品相关的问题，我需要收集飞连产品的使用资料，包括：

使用手册：产品使用文档包括管理员使用手册、客户端用户使用手册、故障排查手册等

在线反馈：收集的用户反馈问题列表

产品信息： 官网上的产品信息

# 2） 收集数据和内容整理

<html><body><table><tr><td>类别</td><td>内容</td><td>来源</td></tr><tr><td rowspan="4">使用指导</td><td>管理员手册</td><td>线上文档: https://www.volcengine.com/docs/6427/158878</td></tr><tr><td>客户端手册</td><td>Word文档</td></tr><tr><td>故障排查手册Word文档</td><td></td></tr><tr><td>常见问题</td><td>Excel表格</td></tr><tr><td rowspan="2">产品信息</td><td>产品介绍</td><td>产品官网： https://www.volcengine.com/product/feilian</td></tr><tr><td>价格信息</td><td>线上文档: https://www.volcengine.com/docs/6427/129375</td></tr></table></body></html>

# CASE: 创建产品知识库

# Step2，收集数据

在扣子中创建知识库分为以下三个步骤

# Step3，创建Bot并使用

![](images/ccf0d0d8de06259e2d6134980e569ef9e049acf00cf901d8b3dc732db8400e9b.jpg)

# 自定义切分文档

# 自定义切分文档:

·对于功能文档来说，通常一个功能文档会包含多个操作步骤或场景  
，你可以将长文档内容进行分类和清洗，使用扣子知识库的自动分段规则拆分文档内容，保证回复的准确性。  
以《远程办公场景最佳实践》文档为例，该文  
档中包含了5个VPN配置场景的说明内容  
https://www.volcengine.com/docs/6427/1277476

<html><body><table><tr><td colspan="5">个 → G volcengine.com/docs/6427/1277476</td></tr><tr><td colspan="5">火山引擎丨文档中心</td></tr><tr><td>飞连</td><td></td><td>文档首页/飞连/最佳实践/远程办公场景最佳实践</td><td>在本产品文档中搜索</td><td>Q</td></tr><tr><td>搜索目录或文档标题</td><td>Q</td><td>远程办公场景最佳实践</td><td></td><td></td></tr><tr><td></td><td></td><td>最近更新时间：2024.06.1115:15:43首次发布时间：2024.06.1115:15:43</td><td></td><td>□ □我的收藏</td></tr><tr><td>产品动态</td><td></td><td colspan="3"></td></tr><tr><td>产品介绍</td><td></td><td colspan="3">本文旨在为IT管理员和网络安全专家提供VPN在企业网络管理中的多样化实际应用指南。通过飞连VPN的灵活配置选项，企业可以制定一套贴 合特定需求的VPN网络解决方案。</td></tr><tr><td>产品计费</td><td></td><td colspan="3">功能概述</td></tr><tr><td>快速入门 管理员指南</td><td></td><td colspan="3">飞连VPN管理模块提供了一系列功能，包括VPN节点配置、权限管理、访问控制和极速模式设置。通过这些功能，企业可以为员工授权VPN使</td></tr><tr><td>最佳实践</td><td>云业务系统的安全访问。</td><td colspan="3">用权限，并控制连接VPN后的网络访问权限。飞连VPN优化了VPN隧道的稳定性和速度，支持一键连接和自动选择最优节点，确保远程办公和</td></tr><tr><td>安全合规场景最佳实践</td><td>场景一：出差/居家办公员工远程办公</td><td colspan="3"></td></tr><tr><td>远程办公场景最佳实践</td><td></td><td colspan="3"></td></tr><tr><td>网络准入场景最佳实践</td><td>场景介绍</td><td colspan="3"></td></tr><tr><td>终端防病毒场景最佳实践</td><td>VPN连接，有效解决了这一难题。此外，飞连VPN还提供多种二次认证机制，进一步确保了VPN接入的安全性。</td><td colspan="3">本场景主要针对企业员工频繁出差且需要远程访问企业内网系统的需求。飞连VPN通过简化的客户端操作，仅需点击一键连接，即可轻松完成</td></tr><tr><td>相关协议</td><td></td><td colspan="3">在本场景中，我们添加了一个VPN节点，并通过配置使用和访问权限，将该节点默认开放给企业员工，企业员工只需登录飞连VPN客户端，即可</td></tr><tr><td>联系飞连</td><td>一键连接至企业内网，实现远程办公。</td><td colspan="3"></td></tr></table></body></html>

# 自定义切分文档

# 操作步骤:

分段设置

3数据处理

·在知识库页面，单击新增单元  
·在新增单元页面，选择文本格式，然后单击本地文档  
·选择《远程办公场景最佳实践》word文档选择自定义分段方式，分段标识符设置为###，长度设置为2000，然后单击下一步。

$0$ 自动分段与清洗自动分段与预处理规则

# D 自定义

自定义分段规则、分段长度及预处理规则

![](images/c746d63dfcf9853b34071bdebd2d805a63d6e40c79df0e0c9f6d012062107f95.jpg)

分段最大长度\*

# 文本预处理规则

$\bigcirc$ 替换掉连续的空格、换行符和制表符$\bigcirc$ 删除所有URL和电子邮箱地址

# 自定义切分文档

人工在word文档中添加###设置分段，比如这里的每个场景前都手动添加了 ###

知识库/飞连产品

你也可以让机器自动进行分段

# 全部内容

# 远程办公场景最佳实践

本文旨在为IT管理员和网络安全专家提供VPN在企业网络管理中的多样化实际应用指南。通过飞连VPN的灵活配置选项，企业可以制定一套贴合特定需求的VPN网络解决方案。

# 功能概述

飞连VPN管理模块提供了一系列功能，包括VPN节点配置、权限管理、访问控制和极速模式设置。通过这些功能，企业可以为员工授权VPN使用权限，并控制连接VPN后的网络访问权限。飞连VPN优化了VPN隧道的稳定性和速度，支持一键连接和自动选择最优节点，确保远程办公和云业务系统的安全访问。

场景一：出差/居家办公员工远程办公

贝

场景介绍

本场景主要针对企业员工频繁出差且需要远程访问企业内网系统的需求。飞连VPN通过简化的客户端操作，仅需点击一键连接，即可轻松完成VPN连接，有效解决了这一难题。此外，飞连VPN还提供多种二次认证机制，进一步确保了VPN接入的安全性。在本场景中，我们添加了一个VPN节点，并通过配置使用和访问权限，将该节点默认开放给企业员工，企业员工只需登录飞连VPN客户端，即可一键连接至企业内网，实现远程办公。

# 操作步骤

登录飞连管理后台。在左侧导航栏，选择VPN管理 $>$ 节点管理在节点管理页面的右上角，单击添加节点。

您需要根据企业实际情况，在飞连管理后台添加VPN节点。具体操作，请参见添加节点。如果您已经添加了VPN节点，则可以跳过本步骤。  
配置极速模式的全局资源。在左侧导航栏，选择VPN管理 $>$ 高级配置。  
在VPN高级配置页面的极速模式区域，单击新增资源。  
在新增资源界面，根据实际需要配置走VPN加密隧道的网络资源，并单击确定。

# 在线数据采集 (安装 Scraper)

# 本地安装:

·下载插件 https://lf-coze-web-cdn.coze.cn/obj/coze-web-cn/browser-extension/artifacts/coze-extension-1.0.1.0.zip  
解压下载文件  
·在chrome浏览器中输入chrome://extensions确认开发者模式打开  
点击加载已解压的扩展程序，选择已解压文件夹

![](images/b402786d8216fabfd2bd64ccebae59a6929de49eff67fa62fb1edfc3e73a8a92.jpg)

# 在线数据采集

# 在线数据采集：

·在弹出的页面上，点击页面下方文本标注按钮，开始标注要提取的内容，然后单击文本框上方的文本或链接按钮。  
·单击查看数据查看已采集的内容，确认无误后再点击完成并采集。

![](images/4e699303aea3598ea9d10ba1493515411c82ee724b133ae139faab5b7ac4e731.jpg)

# 表格数据

# 表格数据知识库：

创建知识库 $\Rightarrow$ 表格格式  
选择本地文档  
将准备好的大模型定价.xIsx进行上传

大模型定价.xlsx   

<html><body><table><tr><td>模型品牌</td><td>模型</td><td>linput价格</td><td>output价格</td></tr><tr><td>通义干问</td><td>Qwen-Turbo</td><td>0.002</td><td>0.006</td></tr><tr><td>通义干问</td><td>Qwen-Plus</td><td>0.004</td><td>0.012</td></tr><tr><td>通义干问</td><td>Qwen-Long</td><td>0.0005</td><td>0.002</td></tr><tr><td>通义干问</td><td>Qwen-Max</td><td>0.04</td><td>0.12</td></tr><tr><td>通义干问</td><td>Qwen1.5-7B</td><td>0.001</td><td>0.002</td></tr><tr><td>通义干问</td><td>Qwen1.5-14B</td><td>0.002</td><td>0.004</td></tr><tr><td>通义干问</td><td>Qwen1.5-32B</td><td>0.0035</td><td>0.007</td></tr><tr><td>通义干问</td><td>Qwen1.5-72B</td><td>0.005</td><td>0.01</td></tr><tr><td>通义干问</td><td>Qwen1.5-110B</td><td>0.007</td><td>0.014</td></tr></table></body></html>

×

![](images/5532b4f366e6223db0eea845d68210201765300779833c360c147d7c7ab97190.jpg)  
创建知识库

# 表格数据

![](images/760142de784d9664e046a75a3da860f5e73c6d9a7d444e110acf42327f9ad19d.jpg)

# 搭建使用Bot

搭建与使用Bot  
完成知识库内容上传后，就可以搭建产品助手Bot  
Step1，创建Bot·选择已经创建产品知识库的工作区。  
·在工作区内，单击Bots页签，然后单击创建Bot。输入Bot名称和说明，然后单击确定  
完成Bot创建后，默认进入到Bot的编排页面。

<html><body><table><tr><td>创建Bot</td><td>×</td></tr><tr><td></td></tr><tr><td>Bot名称* 产品助手 4/50</td></tr></table></body></html>

# Bot功能介绍

<html><body><table><tr><td>产品助手</td></tr><tr><td>4/2000</td></tr></table></body></html>

![](images/1af8e54e720dd55c0acd0a10a29bf055c8784d16af796500dcf90a12d0b6a0e3.jpg)  
图标\*

# 搭建使用Bot

# Step2，在人设与回复逻辑中输入提示词

#角色

你是飞连产品的问答小助手。能够精确理解用户的问题，并从你的知识库中检索相关信息，进一步生成给用户的回复。

![](images/d07ad6d9b076d7794777933a6a43438eac4683dc2bed0bd083dc0cceed1e33f7.jpg)

# 人设与回复逻辑

$\textcircled{4}$ 优化

##技能

###技能1:问题理解和检索

理解用户的问题，并识别其关键信息。根据关键信息，对知识库进行检索

###技能2:回答生成

基于检索到的信息，为用户生成准确、简洁的回答。

#角色

你是飞连产品的问答小助手。能够精确理解用户的问题，并从你的知识库中检索相关信息，进一步生成给用户的回复。

##技能

###技能1:问题理解和检索-理解用户的问题，并识别其关键信息。-根据关键信息，对知识库进行检索。

###技能2:回答生成-基于检索到的信息，为用户生成准确、简洁的回答。

##约束

仅回答与产品相关的问题，不回答无关话题。  
尽量使用清晰简练的语言来回答用户的问题。  
整个回答过程中，始终以用户的需求为中心。

##约束

-仅回答与产品相关的问题，不回答无关话题。  
-尽量使用清晰简练的语言来回答用户的问题。  
-整个回答过程中，始终以用户的需求为中心。

# 搭建使用Bot

# Step3，添加已经创建的知识库

Step4，对知识库进行配置

找到知识>文本配置区，单击+添加已经创建的知识库。点击知识库右侧的自动调用，这里搜索策略设置为混合

![](images/3fd17c1b8036e825af44e690579ab137d4fca2d2e6d001cabef3e423edb313f9.jpg)

自动调用

![](images/0e5767591fd58ed14a1d2894e0deca0dcb78afce904841bdbb508ae12e17b2a8.jpg)

# 搭建使用Bot

# 在右侧的预览与调试中进行测试

# 测试1:

Qwen-Turbo费用多少

cystanford

![](images/b347f675cac8a13ab8dcecb708e18c6a334d2630ec0fb131f0ee8573b8145ee3.jpg)

Qwen-Turbo费用多少

Bot

# 产品助手

运行完毕

Qwen-Turbo的输入价格为0.002，输出价格为0.006。

# 测试2: 出差人员远程办公如何操作

cystanford

![](images/03569b5060551cf405e0effb8451ef41b3ac485026f454117230b125e75ae207.jpg)

出差人员远程办公如何操作

# 产品助手

# 运行完毕

出差人员远程办公的操作步骤如下：

1.登录飞连管理后台。  
2.在左侧导航栏，选择"VPN 管理 $>$ 节点管理”。  
3.在节点管理页面的右上角，单击添加节点。您需要根据企业实际情况，在飞连管理后台添加VPN节点。具体操作，请参见添加节点。如果您已经添加了VPN节点，则可以跳过本步骤。

4.配置极速模式的全局资源。

·在左侧导航栏，选择“VPN 管理 $>$ 高级配置”。·在VPN高级配置页面的极速模式区域，单击新增资源。·在新增资源界面，根据实际需要配置走VPN加密隧道的网络资源，并单击确定。您可以选择只配置域名或者IP地址，也可以同时配置。例如，您只需要域名www.example.com走VPN加密隧道，则您在静态域名列表中添加www.example.com，并设置域名对应的IP

# 打卡： 搭建内部知识助手

如果做一个内部知识助手，你会从哪些维度进行考虑收集整理资料（PDF、Excel、图片等），并让AIBot回答这些问题

，以小组为单位进行呈现，将你制作的AI Bot的问答截屏，发到微信群中，有积分哦！

<html><body><table><tr><td>No</td><td>业务场景 价值性 可行性</td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table></body></html>

CASE：抖音文案提取&二创

# CASE： 抖音文案提取&二创

TODO：抖音文案提取&二创

用户输入抖音视频urI，AI对是视频内容进行解析，并对文案进行优化

Step1，创建智能体

Step2，创建工作流

![](images/660d4cdd2eaa8c23ac1d59b250a96f17491e519809de53f8d0cb5484fd647876.jpg)

# CASE： 抖音文案提取&二创

Step1，点击搭建工作流，添加输出节点，内容：开始提取抖音视频内容..

![](images/d9ea6335e7a6143561b4399181d8d246cc7da848ed0dc1f4683bfe8f045d201b.jpg)

Step2，添加插件，搜索抖音，选择：抖音文案解析插件 $\Rightarrow$ get_douin_article_info

![](images/bd39214043eb7eed915b5bbd84ff639907e35a8de59f4e6233e73620641aa7a5.jpg)

# CASE： 抖音文案提取&二创

# Step3，添加输出节点，内容：已解析到音频地址{{music_url}}

![](images/0d66c5720e8d40728301a7375ee30f08087f3de89b3e1603ea0fc69b3f0a823c.jpg)

# Step4，添加音频转文字插件 $\Rightarrow$ SpeechToText

![](images/a368202e898e5dbf449d06aa81524c3c52dc71cb6bcbf9ce9c551f35428db899.jpg)

# CASE: 抖音文案提取&二创

![](images/2ee7d9e3594f984843acff4fe082f9b1e40972fb18aa30597c55079ae7ca7d34.jpg)  
Step5，添加输出节点，内容：已解析原抖音文案{text}

Step6，添加大模型，input变量 $\mathbf { \sigma } = \mathbf { \sigma }$ SpeechToText插件结果中的data.text

设置系统提示词和用户提示词

用户提示词：{{input}}

# CASE: 抖音文案提取&二创

# 设置大模型节点系统提示词：

#角色

你是一个专业的抖音文案优化师，擅长根据抖音平台的特点和用户需求，对用户提供的文案进行优化，使其更适合在抖音平台传播。

##技能

###技能1:抖音文案优化  
对原文案进行重新创作，保留核心内容的同时，让文案更具吸引力和感染力，符合抖音平台的调性。===回复示例 $\scriptstyle = =$   
调整后的文案：[调整后的文案]  
===示例结束 $\scriptstyle \mathbf { = } = \mathbf { = }$

##限制:

-所输出的内容必须清晰展示原文案和调整后的文案，不能偏离框架要求。  
-回复内容应简洁明了，避免冗长复杂的表述。

Step7，设置结束节点，输出结果为前面大模型的output

![](images/fe1e82f9d70a68692b669587b392ae4a07ead1bd621bcfd0b2c5378e94f2d890.jpg)

# CASE: 抖音文案提取&二创

点击试运行，对工作流进行测试

测试后，对工作流进行发布

![](images/7c116e026d7c3a3c07b19bb4417bfe17e9a6f37da7475393a9876dd3ca3fed9c.jpg)

# 设置人设：

#角色

你是一个专业的抖音文案提取与二次创作助手，擅长精准提取抖音视频中的文案，并对其进行高质量的优化创作。

##技能###技能1:提取并优化抖音文案

1.当用户给你一个抖音链接时，你需要提取该视频的文案并进行优化，使用工作流 DouyinExtraction

2.将优化后的文案呈现给用户。  
##限制:  
-所输出的内容必须是基于提取到的抖音文案进行优化的结果。

# CASE: 抖音文案提取&二创

https://www.douyin.com/discover?modal_id $\ c =$ 7492374797985385782

# $\bigcirc$ 已调用工作流DouyinExtraction

开始提取抖音视频内容...

已解析到音频地址https://If26-music-east.douyinstatic.com/obj/ies-music-hj/7492375924193643321.mp3

已解析原抖音文案县长，我儿子即将诞生，听说您喜欢喝酒，不如庆祝一下？诶，现在是关键时刻，不好，是傀儡符给我破失败了啊，这就是灵珠，是好是太魔丸？看你做的好事，影响我儿子封神登仙，你你也别想好过，道道歉有用还要警察干嘛？道了三年还有一场雷劫，来嘛，快给我儿子准备万龙甲九，组成七弹可手毙我来组成同步二哥三哥，你们有没有觉得这海底炼狱越来越热了？难道是少爷该回去的变变成功了？你在找我吗？你也想玩踢键子吗？以后想踢键子可以找我，这是一只电话

以下是进一步润色优化后的文案：

家人们，告诉你们个事儿！我儿子马上就要呱呱坠地啦，恰好县长爱喝酒，咱就打算热热闹闹地庆祝一番。可谁能想到，就在这节骨眼儿上，出岔子了！那关键的傀儡符破解失败，瞧这眼前的灵珠，我心里直犯嘀咕，它到底是福是祸，不会就是那让人闻风丧胆的魔丸吧？

都怪你干的糊涂事儿，直接影响到我儿子封神登仙的大好前程，你也别想置身事外！要知道，道兼要是有用，那还要警察干嘛？都诚心诚意地道歉三年了，可那雷劫依旧像乌云一样笼罩着。快马加鞭给我儿子准备万龙甲，九个凑齐组成七弹，我就不信搞不定这事儿！

二哥、三哥，你们有没有察觉到，这海底炼狱的温度越来越高，就像被火烤一样。难不成是少爷那边成功变身，正风风火火地赶回来？嘿，你是在找我吗？是不是想玩踢毽子啦？以后想玩随时用这个神奇的电话兽联系我。哎呀，我可不是在这儿瞎唠

# 打卡：抖音文案提取&二创

搭建一个抖音视频文案提取&二创工具

·掌握插件使用，  
get_douin_article_info提取视频信息  
SpeechToText将音频转换为文本  
·掌握大模型使用，对原文案进行优化  
·节点步骤较多，进行时间较长时，增加输出节点显示中间状态

CASE：LLM联网搜索

# CASE: LLM联网搜索

TODO：LLM联网搜索

用户输入问题，AI提取关键字，使用Bing搜索，并进行总结

Step1，创建智能体

Step2，创建工作流

![](images/81991c19d75115614a0a462383147c6b3a500f2228341483aab6a7ebd98b535d.jpg)

# CASE: LLM联网搜索

Step1，点击搭建工作流，添加大模型节点

系统提示词：对用户的问题，提取关键字，多个关键字用空格隔开

用户提示词：{{input}}

![](images/aa56b3ce4de8850717b05abb48412d21175eb25e42884083612c45e30dce767b.jpg)

Step2，添加输出节点，输出内容：提取到关键字{{output}}

![](images/7d25e2d5cec01ff286831ab4cc64b12fe82ecea9d74e4aa9ae61bdce23ee93d6.jpg)

Step3，添加插件bingWebSearch，并输入query $\mathbf { \sigma } = \mathbf { \sigma }$ 前面大模型节点的output

# CASE: LLM联网搜索

Step4，添加大模型节点

系统提示词：对网上搜索到的内容改进行总结整理

用户提示词：{input}}

![](images/0d4e247edb9df9bc37fedfd067d3e23e9fb37fdc795bf83d971b66afbf6a1af2.jpg)

Step5，结束节点

设置输出output $\mathbf { \tau } = \mathbf { \tau }$ 前面大模型_1的output

# CASE: LLM联网搜索

# 点击试运行，对工作流进行测试

![](images/a7e3b2b5a8adf94f8b67eb203a10cf568be86743449b4ff36164192cf2194e7a.jpg)

# 设置人设：

#角色

你是一个名为LLM联网搜索的智能助手，能够精准理解用户问题，提取关键字，并借助Bing插件进行搜索，然后运用大模型进行高效总结。

##技能

###技能1:问题处理与搜索总结

1.接收用户提出的问题。

2.使用工作 昭LLM_Search  
得到Bing搜索的内容总结  
##限制:  
-输出内容应简洁明了，准确回答用户问题

# CASE: LLM联网搜索

# 贵州茅台的2024年的销售业绩如何？

![](images/1c4a3385e1e2576dbf984fb4cd5e7b4a057144be50049c888fd27d23d8c80a3a.jpg)

# 运行完毕

# 输出

提取到关键字贵州茅台2024年销售业绩

2024年贵州茅台多项业绩指标表现亮眼：

1.营收利润：营业总收入1741.44亿元，同比增$1 5 . 6 6 \%$ ；营业收入1708.99亿元，同比增$1 5 . 7 1 \%$ ；归母净利润862.28亿元，同比增$1 5 . 3 8 \%$ ，连续3年超 $1 5 \%$ 增长，超额完成年度目标。

2.分红：拟每10股派现276.24元（含税），总计346.71亿元；叠加中期分红，全年累计超646亿元，分红率 $7 5 \%$ 0

3.产品结构：茅台酒销售收入1459.28亿元，同比增 $1 5 . 2 8 \%$ ，毛利率 $9 4 . 0 6 \%$ ；系列酒营收246.84亿元，同比增 $1 9 . 6 5 \%$ ，成业绩新动力。

4.海外市场：营收突破50亿元，市场格局更具韧性。

# 打卡：LLM联网搜索

搭建一个LLM联网搜索Agent

·掌握插件使用  
bingWebSearchBing网页搜索  
·掌握大模型使用  
对关键字进行总结  
对网页搜索内容进行总结整理  
·节点步骤较多，进行时间较长时，增加输出节点显示中间状态

# CASE: 搭建古诗词Agent

# CASE: 搭建古诗词Agent

TO DO：搭建古诗词Agent

用户输入一句古诗，AI制作对应的图像

Step1，创建BOT

Step2，创建工作流

![](images/16834ec8615de201db2eabfb79d4876349f51ab48d239c72eb2a792bdd0e104e.jpg)

工作流：用于规划和实现复杂功能逻辑的工具，可以通过不同的任务节点来设计复杂的多步骤任务

# CASE: 搭建古诗词Agent

# 点击搭建工作流：

# 初始的工作流，包含：开始和结束节点

C

# 开始

创建工作流

×

工作流的起始节点，用于设定启动工作流需要的信息

![](images/cedae1420d188c0c508b900a20a0996fe9898ad3547c53405e59a33f4fedb6e0.jpg)

# 工作流名称\*

<html><body><table><tr><td>poem 4/30</td></tr></table></body></html>

# 工作流描述\*

![](images/1f7f6b347262772618f757a8d71e9e1b3ec68f116c9ce6d45e5c5e2860eafd0f.jpg)

取消 确认

![](images/ee175007d120104ca86f7b5409ad5ace74925085140cc77a6ebd60fd618fb9dc.jpg)

# 结束

工作流的最终节点，用于返回工作流运行后的结果信息

![](images/a89b392ee65be164ecbf04d9e49b4aa34f2aeca11da3846a12fc85cea4f8d19e.jpg)

# CASE: 搭建古诗词Agent

# Step1，针对开始节点进行设置

Step2，创建大模型

# 开始

工作流的起始节点，用于设定启动工作流需要的信息

![](images/2e3827e11f27e2be02186fc3476d2373bca76d3c5f66f10cac909962662fdb94.jpg)

# 将开始与大模型进行连接，设置input $\mathbf { \tau } = \mathbf { \tau }$ 引用开始的user_input

![](images/3faf319abd47adec9e426b7d5461920ec0016e5879f55caea3eefc8dc7327600.jpg)

设置提示词：你是一位中国古诗词专家，请根据输入的诗句{input}}，描述你联想到的画面，100字以内，只输出描述内容。

# CASE: 搭建古诗词Agent

# Step3，创建翻译大模型 (完成中英文翻译)

Step4，添加插件

![](images/79192ae86d8aaa9e9f76f41a949bd4a743657a100c82cf36be066580a32c483b.jpg)  
因为文生图大模型需要英文输入

将{{input}}翻译成英文，输出结果前面加上"ancient china,children's book illustration style"

# 在照片与摄影 $\Rightarrow$ ByteArtist $\Rightarrow$ 找到text2image插件，进行添加

将model_type设置为1Prompt设置为上一个大模型的output将上一个大模型与text2image连接

![](images/d4c1ad638aa7cf4bc8acc6286969b8d2ecd17f05428a8224aed5972e6aed6217.jpg)

# CASE: 搭建古诗词Agent

Step5，连接End节点

点击试运行，输入user_input，比如 解落三秋叶

End节点的output引l用text2image插件的data.images.image_url

# 结束

工作流的最终节点，用于返回工作流运行后的结果信息

选择回答模式

返回变量，由Bot生成回答

# 输出变量

![](images/6cfeb0e4fe4694a0cff6333929c2bc14f6c908b16b526a57e75bc23aad607fd9.jpg)

十新增

# 试运行

# 开始节点

BOT_USER_INPUT用户本轮对话输入内容 String

请输入BOT_USER_INPUT

user_input\*用户输入的诗词 String

# 解落三秋叶

$\bigcirc$ 运行后自动将此数据保存为测试集

大模型推理后得到文生 图的image_url   
https://s.coze.cn/t/Co12 ElskUYmeSL4Y/

![](images/19ac96845efa2e993300d78ecdb0843fb3aef08099c737f6764b189061b7562d.jpg)

# 打卡： 搭建文生图助手

搭建一个自己的文生图工具:

根据用户的需求，对创作的图片进行描述将文字描述翻译成英文text2image基于英文提示词进行绘画

![](images/d6d9a767ab87f72b5e3561c5621cafb65986070c6760fedf57078e5e50a9f4fd.jpg)

# Thank You Using data to solve problems