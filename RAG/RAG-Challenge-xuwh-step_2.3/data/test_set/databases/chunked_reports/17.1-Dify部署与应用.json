{
  "metainfo": {
    "sha1": "Aitraining",
    "sha1_name": "Aitraining",
    "pages_amount": 67,
    "text_blocks_amount": 541,
    "tables_amount": 4,
    "pictures_amount": 0,
    "equations_amount": 0,
    "footnotes_amount": 0,
    "company_name": "AI应用开发",
    "file_name": "17.1-Dify部署与应用"
  },
  "content": {
    "chunks": [
      {
        "page": 1,
        "length_tokens": 5,
        "text": "Dify部署与应用",
        "id": 0,
        "type": "text"
      },
      {
        "page": 2,
        "length_tokens": 4,
        "text": "今天的学习目标",
        "id": 1,
        "type": "text"
      },
      {
        "page": 2,
        "length_tokens": 5,
        "text": "Dify部署与应用",
        "id": 2,
        "type": "text"
      },
      {
        "page": 2,
        "length_tokens": 69,
        "text": "Dify开发平台Dify部署与使用  \nDify应用实战  \nCASE：LLM联网搜索  \nCASE: 搭建古诗词WorkFlow  \nCASE: 智能客服ChatFlow  \nCASE：智能文档分析助手(MinerU+Dify)  \n·如何应用Agent APl (Coze,Dify)",
        "id": 3,
        "type": "text"
      },
      {
        "page": 3,
        "length_tokens": 4,
        "text": "Dify开发平台",
        "id": 4,
        "type": "text"
      },
      {
        "page": 3,
        "length_tokens": 50,
        "text": "Dify是一个开源的LLM 应用开发平台。提供从Agent 构建到AIworkflow 编排、RAG 检索、模型管理等能力，轻松构建和运营生成式AI原生应用。",
        "id": 5,
        "type": "text"
      },
      {
        "page": 3,
        "length_tokens": 8,
        "text": "Dify提供五种应用类型：",
        "id": 6,
        "type": "text"
      },
      {
        "page": 3,
        "length_tokens": 136,
        "text": "·聊天助手：基于LLM构建对话式交互的助手。  \n·文本生成应用：面向文本生成类任务的助手，例如撰写故事、文本分类、翻译等。  \n·Agent：能够分解任务、推理思考、调用工具的对话式智能助手。  \n·对话流（Chatflow）：适用于设计复杂流程的多轮对话场景，支持记忆功能并能进行动态应用编排。  \n·工作流（Workflow）：适用于自动化、批处理等单轮生成类任务的场景的应用编排方式，单向生成结果。",
        "id": 7,
        "type": "text"
      },
      {
        "page": 4,
        "length_tokens": 3,
        "text": "Dify部署",
        "id": 8,
        "type": "text"
      },
      {
        "page": 4,
        "length_tokens": 24,
        "text": "Dify 的本地化部署主要有两种方式：DockerCompose部署（推荐）和源代码部署。",
        "id": 9,
        "type": "text"
      },
      {
        "page": 4,
        "length_tokens": 10,
        "text": "Thinking: 如何使用DockerCompose 进行部署？",
        "id": 10,
        "type": "text"
      },
      {
        "page": 4,
        "length_tokens": 34,
        "text": "Docker Compose 部署是通过 Docker 容器来运行 Dify的各个组件，隔离了环境依赖，部署和管理都相对简单。",
        "id": 11,
        "type": "text"
      },
      {
        "page": 4,
        "length_tokens": 4,
        "text": "前提条件:",
        "id": 12,
        "type": "text"
      },
      {
        "page": 4,
        "length_tokens": 35,
        "text": "·安装 Docker 和 Docker Compose:https://www.docker.com 选择适合操作系统的 Docker Desktop·安装Git:用于克隆 Dify的代码仓库。",
        "id": 13,
        "type": "text"
      },
      {
        "page": 4,
        "length_tokens": 99,
        "text": "Docker:是一个开源的应用容器引擎，可以将应用及其所有依赖打包到一个可移植的容器中$\\Rightarrow$ 保证了应用在任何环境中都能以相同的方式运行，简化了部署和管理。Docker Compose:是一个用于定义和运行多容器 Docker应用程序的工具。通过YAML文件配置应用服务，然后使用一条命令就能创建并启动所有服务。",
        "id": 14,
        "type": "text"
      },
      {
        "page": 5,
        "length_tokens": 3,
        "text": "Dify部署",
        "id": 15,
        "type": "text"
      },
      {
        "page": 5,
        "length_tokens": 11,
        "text": "Step1, 克隆Dify代码仓库 ",
        "id": 16,
        "type": "text"
      },
      {
        "page": 5,
        "length_tokens": 19,
        "text": "打开你的终端(Terminal)或命令行工具，执行以下命令：",
        "id": 17,
        "type": "text"
      },
      {
        "page": 5,
        "length_tokens": 13,
        "text": "git clone https://github.com/langgenius/dify.git ",
        "id": 18,
        "type": "text"
      },
      {
        "page": 5,
        "length_tokens": 20,
        "text": "Step2，进入Docker 目录并配置 cd dify/docker cp .env.example .env ",
        "id": 19,
        "type": "text"
      },
      {
        "page": 5,
        "length_tokens": 0,
        "text": "",
        "id": 20,
        "type": "text"
      },
      {
        "page": 5,
        "length_tokens": 21,
        "text": "这一步会复制一个环境变量配置文件的模板。你需要根据自己的需求修改.env文件。",
        "id": 21,
        "type": "text"
      },
      {
        "page": 5,
        "length_tokens": 5,
        "text": "关键配置项包括：",
        "id": 22,
        "type": "text"
      },
      {
        "page": 5,
        "length_tokens": 76,
        "text": "·APP_URL:你的Dify访问地址，本地部署通常是http://localhost 或http://你的iP地址。  \n·数据库相关配置 (如果使用外部数据库)。默认情况下，它会使用Docker内置的数据库。  \n· 模型供应商的 API Keys (例如 OpenAl,Anthropic,Qwen 等)。这里需要配置你的API密钥。",
        "id": 23,
        "type": "text"
      },
      {
        "page": 6,
        "length_tokens": 3,
        "text": "Dify部署",
        "id": 24,
        "type": "text"
      },
      {
        "page": 6,
        "length_tokens": 7,
        "text": "Step3，启动 Dify 服务",
        "id": 25,
        "type": "text"
      },
      {
        "page": 6,
        "length_tokens": 16,
        "text": "在 dify/docker 目录下，执行以下命令来启动 Dify",
        "id": 26,
        "type": "text"
      },
      {
        "page": 6,
        "length_tokens": 6,
        "text": "docker compose up -d ",
        "id": 27,
        "type": "text"
      },
      {
        "page": 6,
        "length_tokens": 7,
        "text": "参数-d表示在后台运行。",
        "id": 28,
        "type": "text"
      },
      {
        "page": 6,
        "length_tokens": 8,
        "text": "Step4, 访问 Dify ",
        "id": 29,
        "type": "text"
      },
      {
        "page": 6,
        "length_tokens": 26,
        "text": "启动成功后，等待几分钟让所有服务完全启动。然后你就可以在浏览器中访问Dify了。",
        "id": 30,
        "type": "text"
      },
      {
        "page": 6,
        "length_tokens": 17,
        "text": "管理员初始化页面:首次访问http://你的IP地址/install来设置管理员账户。",
        "id": 31,
        "type": "text"
      },
      {
        "page": 6,
        "length_tokens": 21,
        "text": "Dify主页面:初始化完成后，访问http://你的IP地址即可开始使用 Dify。",
        "id": 32,
        "type": "text"
      },
      {
        "page": 7,
        "length_tokens": 3,
        "text": "Dify部署",
        "id": 33,
        "type": "text"
      },
      {
        "page": 7,
        "length_tokens": 7,
        "text": "Thinking: 如何更新 Dify?",
        "id": 34,
        "type": "text"
      },
      {
        "page": 7,
        "length_tokens": 16,
        "text": "在dify/docker目录下，拉取最新的代码和Docker镜像",
        "id": 35,
        "type": "text"
      },
      {
        "page": 7,
        "length_tokens": 6,
        "text": "git pull docker compose pull ",
        "id": 36,
        "type": "text"
      },
      {
        "page": 7,
        "length_tokens": 7,
        "text": "Thinking: 如何重新启动服务？",
        "id": 37,
        "type": "text"
      },
      {
        "page": 7,
        "length_tokens": 6,
        "text": "docker compose up -d ",
        "id": 38,
        "type": "text"
      },
      {
        "page": 8,
        "length_tokens": 4,
        "text": "如何使用Dify",
        "id": 39,
        "type": "text"
      },
      {
        "page": 8,
        "length_tokens": 6,
        "text": "Thinking: 如何使用Dify",
        "id": 40,
        "type": "text"
      },
      {
        "page": 8,
        "length_tokens": 15,
        "text": "使用公司的，或者自己本地部署的Dify，或者云服务",
        "id": 41,
        "type": "text"
      },
      {
        "page": 8,
        "length_tokens": 7,
        "text": "嗨，近来可好",
        "id": 42,
        "type": "text"
      },
      {
        "page": 8,
        "length_tokens": 0,
        "text": "",
        "id": 43,
        "type": "image"
      },
      {
        "page": 8,
        "length_tokens": 14,
        "text": "如果您还没有初始化账户，请前往初始化页面设置管理员账户",
        "id": 44,
        "type": "text"
      },
      {
        "page": 8,
        "length_tokens": 15,
        "text": "http://119.45.39.201:8088/signin ",
        "id": 45,
        "type": "text"
      },
      {
        "page": 8,
        "length_tokens": 0,
        "text": "",
        "id": 46,
        "type": "image"
      },
      {
        "page": 8,
        "length_tokens": 8,
        "text": "https://cloud.dify.ai/apps ",
        "id": 47,
        "type": "text"
      },
      {
        "page": 8,
        "length_tokens": 26,
        "text": "Cloud.dify.ai是由Dify提供的云服务，开箱即用，支持灵活的套餐和价格。",
        "id": 48,
        "type": "text"
      },
      {
        "page": 9,
        "length_tokens": 5,
        "text": "Chatflow与Workflow ",
        "id": 49,
        "type": "text"
      },
      {
        "page": 9,
        "length_tokens": 147,
        "text": "在 Dify平台中，Chatflow和Workflow 是两种核心的应用编排工具，它们分别服务于不同类型的AI应用场景。  \n·Chatflow(对话流)：专为构建交互式、多轮对话的AI应用而设计。它更侧重于模拟人类对话的模式，能够记忆上下文，并根据用户的输入进行多步骤的逻辑处理和回复。  \n·Workflow(工作流)：主要面向自动化、批处理或单次任务执行的场景。它适合处理那些不需要实时对话交互，但可能涉及复杂数据处理、分析、内容生成或与其他系统集成的任务。",
        "id": 50,
        "type": "text"
      },
      {
        "page": 10,
        "length_tokens": 5,
        "text": "Chatflow与Workflow ",
        "id": 51,
        "type": "text"
      },
      {
        "page": 10,
        "length_tokens": 8,
        "text": "Chatflow (对话流) ",
        "id": 52,
        "type": "text"
      },
      {
        "page": 10,
        "length_tokens": 25,
        "text": "，对话式交互：支持多轮对话，能够理解上下文，并根据之前的交流内容进行回应。",
        "id": 53,
        "type": "text"
      },
      {
        "page": 10,
        "length_tokens": 28,
        "text": "记忆能力(Memory)：内置对话历史记录功能，使得AI应用能够“记住”用户之前的发言。",
        "id": 54,
        "type": "text"
      },
      {
        "page": 10,
        "length_tokens": 25,
        "text": "动态响应：强调在对话过程中逐步构建和输出响应，可以使用户获得更自然的交流体验。",
        "id": 55,
        "type": "text"
      },
      {
        "page": 10,
        "length_tokens": 27,
        "text": "，专属节点：拥有如\"Answer\"(回复)节点，用于在流程的中间步骤流式输出文本内容。",
        "id": 56,
        "type": "text"
      },
      {
        "page": 10,
        "length_tokens": 37,
        "text": "·用户交互功能：通常包含开场白、下一步问题建议、文件上传（用于对话中）、引用归属等增强用户对话体验的功能。",
        "id": 57,
        "type": "text"
      },
      {
        "page": 10,
        "length_tokens": 30,
        "text": "适用场景：智能客服、语义搜索、AI助教、需要引导用户完成特定任务的对话机器人等。",
        "id": 58,
        "type": "text"
      },
      {
        "page": 11,
        "length_tokens": 7,
        "text": "CASE: 智能客服机器人",
        "id": 59,
        "type": "text"
      },
      {
        "page": 11,
        "length_tokens": 8,
        "text": "Chatflow (对话流) ",
        "id": 60,
        "type": "text"
      },
      {
        "page": 11,
        "length_tokens": 26,
        "text": "·对话式交互：支持多轮对话，能够理解上下文，并根据之前的交流内容进行回应。",
        "id": 61,
        "type": "text"
      },
      {
        "page": 11,
        "length_tokens": 28,
        "text": "记忆能力(Memory)：内置对话历史记录功能，使得AI应用能够“记住”用户之前的发言。",
        "id": 62,
        "type": "text"
      },
      {
        "page": 11,
        "length_tokens": 25,
        "text": "动态响应：强调在对话过程中逐步构建和输出响应，可以使用户获得更自然的交流体验。",
        "id": 63,
        "type": "text"
      },
      {
        "page": 11,
        "length_tokens": 27,
        "text": "，专属节点：拥有如\"Answer\"(回复)节点，用于在流程的中间步骤流式输出文本内容。",
        "id": 64,
        "type": "text"
      },
      {
        "page": 11,
        "length_tokens": 37,
        "text": "·用户交互功能：通常包含开场白、下一步问题建议、文件上传（用于对话中）、引用归属等增强用户对话体验的功能。",
        "id": 65,
        "type": "text"
      },
      {
        "page": 11,
        "length_tokens": 30,
        "text": "适用场景：智能客服、语义搜索、AI助教、需要引导用户完成特定任务的对话机器人等。",
        "id": 66,
        "type": "text"
      },
      {
        "page": 12,
        "length_tokens": 7,
        "text": "CASE：LLM联网搜索 ",
        "id": 67,
        "type": "text"
      },
      {
        "page": 13,
        "length_tokens": 7,
        "text": "CASE: LLM联网搜索 ",
        "id": 68,
        "type": "text"
      },
      {
        "page": 13,
        "length_tokens": 7,
        "text": "TODO：LLM联网搜索 ",
        "id": 69,
        "type": "text"
      },
      {
        "page": 13,
        "length_tokens": 23,
        "text": "用户输入问题，AI提取关键字，使用Bing搜索，并进行总结Step1，创建工作流",
        "id": 70,
        "type": "text"
      },
      {
        "page": 13,
        "length_tokens": 0,
        "text": "",
        "id": 71,
        "type": "image"
      },
      {
        "page": 14,
        "length_tokens": 9,
        "text": "获取TavilySearch APl Key ",
        "id": 72,
        "type": "text"
      },
      {
        "page": 14,
        "length_tokens": 11,
        "text": "1.申请Tavily Search APl Key ",
        "id": 73,
        "type": "text"
      },
      {
        "page": 14,
        "length_tokens": 8,
        "text": "https://tavily.com/ ",
        "id": 74,
        "type": "text"
      },
      {
        "page": 14,
        "length_tokens": 3,
        "text": "API Keys ",
        "id": 75,
        "type": "text"
      },
      {
        "page": 14,
        "length_tokens": 22,
        "text": "The keyis used to authenticate yourrequests to the ResearchAPI.To learn more,see the documentation page. ",
        "id": 76,
        "type": "text"
      },
      {
        "page": 14,
        "length_tokens": 0,
        "text": "",
        "id": 77,
        "type": "table"
      },
      {
        "page": 14,
        "length_tokens": 11,
        "text": "2.在Dify中安装Tavily工具",
        "id": 78,
        "type": "text"
      },
      {
        "page": 14,
        "length_tokens": 5,
        "text": "Tavily { ",
        "id": 79,
        "type": "text"
      },
      {
        "page": 14,
        "length_tokens": 0,
        "text": "",
        "id": 80,
        "type": "image"
      },
      {
        "page": 14,
        "length_tokens": 31,
        "text": "一个强大的原生AI搜索引擎和网页内容提取工具，提供高度相关的搜索结果和网页原始内容提取。",
        "id": 81,
        "type": "text"
      },
      {
        "page": 14,
        "length_tokens": 8,
        "text": "langgenius /tavily ",
        "id": 82,
        "type": "text"
      },
      {
        "page": 14,
        "length_tokens": 7,
        "text": "来自MARKETPLACE 7 ",
        "id": 83,
        "type": "text"
      },
      {
        "page": 14,
        "length_tokens": 9,
        "text": "3.对TavilySearch进行授权",
        "id": 84,
        "type": "text"
      },
      {
        "page": 14,
        "length_tokens": 43,
        "text": "TavilySearchAPI是一款强大的搜索工具，支持文本和图像搜索，具备多语言、高级筛选等功能。它专为开发者设计，可快速集成到应用中",
        "id": 85,
        "type": "text"
      },
      {
        "page": 15,
        "length_tokens": 7,
        "text": "CASE: LLM联网搜索 ",
        "id": 86,
        "type": "text"
      },
      {
        "page": 15,
        "length_tokens": 6,
        "text": "梳理工作流：",
        "id": 87,
        "type": "text"
      },
      {
        "page": 15,
        "length_tokens": 12,
        "text": "·开始节点：input输入你要联网搜索的主题",
        "id": 88,
        "type": "text"
      },
      {
        "page": 15,
        "length_tokens": 5,
        "text": "LLM节点: ",
        "id": 89,
        "type": "text"
      },
      {
        "page": 15,
        "length_tokens": 21,
        "text": "系统提示词：对用户的问题，提取关键字，多个关键字用空格隔开",
        "id": 90,
        "type": "text"
      },
      {
        "page": 15,
        "length_tokens": 10,
        "text": "用户提示词： @开始/{x} input",
        "id": 91,
        "type": "text"
      },
      {
        "page": 15,
        "length_tokens": 0,
        "text": "",
        "id": 92,
        "type": "image"
      },
      {
        "page": 16,
        "length_tokens": 7,
        "text": "CASE: LLM联网搜索 ",
        "id": 93,
        "type": "text"
      },
      {
        "page": 16,
        "length_tokens": 7,
        "text": "TavilySearch节点: ",
        "id": 94,
        "type": "text"
      },
      {
        "page": 16,
        "length_tokens": 4,
        "text": "查询 String Required ",
        "id": 95,
        "type": "text"
      },
      {
        "page": 16,
        "length_tokens": 13,
        "text": "查询变量：设置为前一个节点LLM输出的text",
        "id": 96,
        "type": "text"
      },
      {
        "page": 16,
        "length_tokens": 7,
        "text": "LLM/{x} text ",
        "id": 97,
        "type": "text"
      },
      {
        "page": 16,
        "length_tokens": 7,
        "text": "LLM 2节点: ",
        "id": 98,
        "type": "text"
      },
      {
        "page": 16,
        "length_tokens": 14,
        "text": "系统提示词：对网上搜索到的内容改进行总结整理",
        "id": 99,
        "type": "text"
      },
      {
        "page": 16,
        "length_tokens": 4,
        "text": "用户提示词：",
        "id": 100,
        "type": "text"
      },
      {
        "page": 16,
        "length_tokens": 11,
        "text": "{} Tavily Se... / {x} text ",
        "id": 101,
        "type": "text"
      },
      {
        "page": 16,
        "length_tokens": 3,
        "text": "·结束节点",
        "id": 102,
        "type": "text"
      },
      {
        "page": 16,
        "length_tokens": 21,
        "text": "输出变量output设置为LLM2节点的输出text output LLM 2/ text String ",
        "id": 103,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 7,
        "text": "CASE： LLM联网搜索 ",
        "id": 104,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 6,
        "text": "黄金价格和哪些因素有关",
        "id": 105,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 11,
        "text": "总结：黄金价格的影响因素及其未来走势",
        "id": 106,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 11,
        "text": "一、黄金价格的分析框架与影响因素",
        "id": 107,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 6,
        "text": "1.历史指标失效",
        "id": 108,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 74,
        "text": "·历史上有效的前瞻性和同步指标在当前周期中失效或出现背离，研究者重新审视和优化了分析框架。  \n·数据选取的时间段从1980年至2023年因数据长度充足且黄金市场化运作始于布雷顿森林体系崩溃后。",
        "id": 109,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 10,
        "text": "2.实际利率对金价的影响",
        "id": 110,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 58,
        "text": "·历史上实际利率在金价上涨周期中扮演重要角色，尤其是在降息周期和恶性通胀周期中。  \n·自2022年以来，实际利率对金价的指导意义逐渐减弱，相关性有所降低。",
        "id": 111,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 10,
        "text": "3.地缘政治与宏观环境变化",
        "id": 112,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 64,
        "text": "·逆全球化进程和俄乌地缘争议事件促使投资者重新配置资产，推动金价脱离传统经济周期，独立走强。·央行购金量激增，从每年400-600吨跃升至1000吨以上，成为主要需求来源。",
        "id": 113,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 10,
        "text": "4.通胀与货币因素 ",
        "id": 114,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 55,
        "text": "·通胀预期是金价上涨的重要催化剂，尤其是当通胀数据韧性较强时。  \n·美元与其他货币汇率变化、消费经济实力、货币政策等对金价有直接影响。",
        "id": 115,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 7,
        "text": "5.央行资产配置 ",
        "id": 116,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 67,
        "text": "·央行在资产配置时更注重汇率稳定性，黄金的低波动率和高流动性使其成为稳健配置的选择。  \n·央行持续购金对金价形成托底效应，特别是在流动性宽松或通胀快速扩张时。",
        "id": 117,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 9,
        "text": "二、黄金价格的历史与未来趋势",
        "id": 118,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 8,
        "text": "1.历史复盘与趋势判断",
        "id": 119,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 51,
        "text": "·从1949年到2024年的金价走势显示，黄金价格与美元走势呈负相关，与通胀高度正相关。  \n·2000年后全球央行停止随意出售黄金，金价逐步提升。",
        "id": 120,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 6,
        "text": "2.未来趋势预测 ",
        "id": 121,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 28,
        "text": "·预计金价未来可能突破2000美元/蛊司，甚至达到2500-3000美元/盎司。",
        "id": 122,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 46,
        "text": "·金价将在未来两年呈现震荡上行的趋势，回调幅度有限。  \n·底部支撑位预计在2500-2600美元，上线可能达到3000美元以上。",
        "id": 123,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 5,
        "text": "3.驱动因素",
        "id": 124,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 89,
        "text": "·经济不确定性：全球经济下行压力、贸易摩擦和地缘政治冲突可能推高避险需求。·美联储政策：美联储的加息或降息周期对美元强弱有直接影响，进而影响黄金价格。·央行购金：央行购金行为对金价形成支撑，尤其是在经济下行或通胀加剧时。",
        "id": 125,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 8,
        "text": "三、黄金价格的主要影响因素",
        "id": 126,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 5,
        "text": "1.供需关系",
        "id": 127,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 45,
        "text": "·黄金供给相对稳定，需求端受通胀、地缘政治、货币宽松政策等因素影响。·科技和电子行业对黄金的需求增长也是重要边际影响因素。",
        "id": 128,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 8,
        "text": "2.美元与货币汇率",
        "id": 129,
        "type": "text"
      },
      {
        "page": 17,
        "length_tokens": 23,
        "text": "·美元走强时，黄金价格通常承压；美元疲软时，黄金价格往往上涨。",
        "id": 130,
        "type": "text"
      },
      {
        "page": 18,
        "length_tokens": 7,
        "text": "打卡：LLM联网搜索",
        "id": 131,
        "type": "text"
      },
      {
        "page": 18,
        "length_tokens": 9,
        "text": "搭建一个LLM联网搜索工作流",
        "id": 132,
        "type": "text"
      },
      {
        "page": 18,
        "length_tokens": 30,
        "text": "掌握插件使用  \nTavilySearch网页搜索掌握大模型使用  \n对关键字进行总结  \n对网页搜索内容进行总结整理",
        "id": 133,
        "type": "text"
      },
      {
        "page": 19,
        "length_tokens": 10,
        "text": "CASE: 搭建古诗词工作流",
        "id": 134,
        "type": "text"
      },
      {
        "page": 20,
        "length_tokens": 10,
        "text": "CASE: 搭建古诗词工作流",
        "id": 135,
        "type": "text"
      },
      {
        "page": 20,
        "length_tokens": 10,
        "text": "TO DO：搭建古诗词Agent ",
        "id": 136,
        "type": "text"
      },
      {
        "page": 20,
        "length_tokens": 12,
        "text": "用户输入一句古诗，AI制作对应的图像",
        "id": 137,
        "type": "text"
      },
      {
        "page": 20,
        "length_tokens": 5,
        "text": "Step1，创建BOT",
        "id": 138,
        "type": "text"
      },
      {
        "page": 20,
        "length_tokens": 6,
        "text": "Step2，创建工作流",
        "id": 139,
        "type": "text"
      },
      {
        "page": 20,
        "length_tokens": 0,
        "text": "",
        "id": 140,
        "type": "image"
      },
      {
        "page": 20,
        "length_tokens": 26,
        "text": "工作流：用于规划和实现复杂功能逻辑的工具，可以通过不同的任务节点来设计复杂的多步骤任务",
        "id": 141,
        "type": "text"
      },
      {
        "page": 21,
        "length_tokens": 6,
        "text": "Dify中的绘图工具",
        "id": 142,
        "type": "text"
      },
      {
        "page": 21,
        "length_tokens": 23,
        "text": "Dify本身并不直接提供绘图工具，但可以通过外部工具来实现绘图功能。",
        "id": 143,
        "type": "text"
      },
      {
        "page": 21,
        "length_tokens": 4,
        "text": "AI绘图工具",
        "id": 144,
        "type": "text"
      },
      {
        "page": 21,
        "length_tokens": 76,
        "text": "·Stable Diffusion：一个开源的Al绘图模型，可以通过Dify调用生成高质量的图像。·Flux：由Black Forest Labs开发的Al绘图模型，支持通过Dify调用生成图像。·DALL-E：Dify提供的第一方工具之一，可以通过自然语言输入生成高质量图片。自定义绘图工具",
        "id": 145,
        "type": "text"
      },
      {
        "page": 21,
        "length_tokens": 24,
        "text": "SiliconFlow：通过 SiliconCloud提供的API，可以在Dify中调用Flux或 Stable Difusion绘图模型",
        "id": 146,
        "type": "text"
      },
      {
        "page": 21,
        "length_tokens": 79,
        "text": "SiliconFlow是由硅基流动提供的基于开源模型的高性价比GenAI服务，这样就可以在Dify中调用Flux和StableDifusion等绘图模型  \n·申请 SiliconCloud APl Key  \n·在Dify 中配置 APl Key：在 Dify 的工具页中点击\"SiliconCloud $>$ 去授权\"",
        "id": 147,
        "type": "text"
      },
      {
        "page": 22,
        "length_tokens": 10,
        "text": "CASE: 搭建古诗词工作流",
        "id": 148,
        "type": "text"
      },
      {
        "page": 22,
        "length_tokens": 4,
        "text": "工作流步骤:",
        "id": 149,
        "type": "text"
      },
      {
        "page": 22,
        "length_tokens": 12,
        "text": "Step1.开始节点：input输入一句古诗词",
        "id": 150,
        "type": "text"
      },
      {
        "page": 22,
        "length_tokens": 12,
        "text": "Step2.LLM: 选择qwen-turbo ",
        "id": 151,
        "type": "text"
      },
      {
        "page": 22,
        "length_tokens": 18,
        "text": "·系统提示词：用户给你古诗词，请描绘一幅画面",
        "id": 152,
        "type": "text"
      },
      {
        "page": 22,
        "length_tokens": 5,
        "text": "·用户提示词：",
        "id": 153,
        "type": "text"
      },
      {
        "page": 22,
        "length_tokens": 5,
        "text": "开始/{x} input",
        "id": 154,
        "type": "text"
      },
      {
        "page": 22,
        "length_tokens": 13,
        "text": "Step3.LLM2: 选择qwen-turbo ",
        "id": 155,
        "type": "text"
      },
      {
        "page": 22,
        "length_tokens": 21,
        "text": "·系统提示词：将描述的内容翻译成英文，前面加上acientchina",
        "id": 156,
        "type": "text"
      },
      {
        "page": 22,
        "length_tokens": 11,
        "text": "·用户提示词： LLM/{x} text",
        "id": 157,
        "type": "text"
      },
      {
        "page": 22,
        "length_tokens": 0,
        "text": "",
        "id": 158,
        "type": "image"
      },
      {
        "page": 23,
        "length_tokens": 10,
        "text": "CASE: 搭建古诗词工作流",
        "id": 159,
        "type": "text"
      },
      {
        "page": 23,
        "length_tokens": 26,
        "text": "Step4.使用flux工具 （基于SiliconFlow）提示词设置为前一节点LLM2的输出text",
        "id": 160,
        "type": "text"
      },
      {
        "page": 23,
        "length_tokens": 5,
        "text": "提示词 String Required ",
        "id": 161,
        "type": "text"
      },
      {
        "page": 23,
        "length_tokens": 9,
        "text": "LLM 2/{x} text ",
        "id": 162,
        "type": "text"
      },
      {
        "page": 23,
        "length_tokens": 14,
        "text": "建议用英文的生成图片提示词以获得更好的生成效果",
        "id": 163,
        "type": "text"
      },
      {
        "page": 23,
        "length_tokens": 17,
        "text": "Step5.结束节点 输出变量与前序节点FLUX的输出关联 ",
        "id": 164,
        "type": "text"
      },
      {
        "page": 23,
        "length_tokens": 2,
        "text": "输出变量",
        "id": 165,
        "type": "text"
      },
      {
        "page": 23,
        "length_tokens": 0,
        "text": "",
        "id": 166,
        "type": "table"
      },
      {
        "page": 24,
        "length_tokens": 10,
        "text": "CASE: 搭建古诗词工作流",
        "id": 167,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 5,
        "text": "离离原上草",
        "id": 168,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 1,
        "text": "包",
        "id": 169,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 1,
        "text": "开始",
        "id": 170,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 5,
        "text": "68.220 ms ",
        "id": 171,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 5,
        "text": "LLM 2 ",
        "id": 172,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 9,
        "text": "232 tokens · 3.253 s ",
        "id": 173,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 3,
        "text": "FLUX ",
        "id": 174,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 5,
        "text": "10.891 s ",
        "id": 175,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 2,
        "text": "+ ",
        "id": 176,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 15,
        "text": "LLM 128 tokens $\\cdot$ 3.453 s ",
        "id": 177,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 2,
        "text": "数据处理",
        "id": 178,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 55,
        "text": "1 {  \n2 \"model_mode\":\"chat\",  \n3 \"prompts\":[  \n4 {  \n5 \"role\":\"system\"  \n6 \"text\"：\"用户给你古诗词，请描绘一  \n幅画面\",  \n7 \"files\":[]  \n8 Y",
        "id": 179,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 1,
        "text": "输出",
        "id": 180,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 3,
        "text": "K7 ",
        "id": 181,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 4,
        "text": "1   \n2 ",
        "id": 182,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 139,
        "text": "\"text\"：\"我看到一片辽阔的草原，绿草如茵，一望无际。微风吹过，青草随风摇曳，连绵起伏，仿佛绿色的波浪在原野上翻滚。尽管季节更替，严寒酷暑，这片草地依旧生机勃勃，展现出顽强的生命力。远山如黛，近处有几株大树点缀其中，牛羊在其间悠闲地吃草，一幅宁静而充满生命力的草原风光图跃然眼前，\"",
        "id": 183,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 3,
        "text": "1 K ",
        "id": 184,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 2,
        "text": "数据处理",
        "id": 185,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 58,
        "text": "1 {  \n2 \"model_mode\":\"chat\",  \n3 \"prompts\":[  \n4 {  \n5 \"role\":\"system\"  \n6 \"text\"：\"将描述的内容翻译成英文，  \n前面加上 acient china\",  \n7 \"files\":[]  \n8 }",
        "id": 186,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 1,
        "text": "输出",
        "id": 187,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 57,
        "text": "1 {   \n2 \"text\": \"acient china I see a vast grassland，with lush green grass stretching endlessly. A gentle breeze blows，and the green grass sways back and forth in rolling waves across the field.Despite seasonal changes and extreme weather this grassland remains ",
        "id": 188,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 1,
        "text": "输入",
        "id": 189,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 57,
        "text": "1< {   \n2 \"prompt\": \"acient china I see a vast grassland，with lush green grass stretching endlessly. A gentle breeze blows，and the green grass sways back and forth in rolling waves across the field. Despite seasonal changes and extreme weather this grassland ",
        "id": 190,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 1,
        "text": "输出",
        "id": 191,
        "type": "text"
      },
      {
        "page": 24,
        "length_tokens": 69,
        "text": "1 {   \n2 \"text\": ⅡI   \n3 \"files\":[   \n4 {   \n5 \"dify_model_identity\": '__dify__file__\"   \n6 \"id\": null,   \n7 \"tenant_id\": \"90df0h3d-e3h0-4rfd-9150-044p98 ",
        "id": 192,
        "type": "text"
      },
      {
        "page": 25,
        "length_tokens": 10,
        "text": "CASE: 搭建古诗词工作流",
        "id": 193,
        "type": "text"
      },
      {
        "page": 25,
        "length_tokens": 5,
        "text": "离离原上草",
        "id": 194,
        "type": "text"
      },
      {
        "page": 25,
        "length_tokens": 5,
        "text": "举头望明月",
        "id": 195,
        "type": "text"
      },
      {
        "page": 25,
        "length_tokens": 0,
        "text": "",
        "id": 196,
        "type": "image"
      },
      {
        "page": 25,
        "length_tokens": 0,
        "text": "",
        "id": 197,
        "type": "image"
      },
      {
        "page": 26,
        "length_tokens": 9,
        "text": "打卡：搭建古诗词助手",
        "id": 198,
        "type": "text"
      },
      {
        "page": 26,
        "length_tokens": 13,
        "text": "搭建一个自己的文生图工具，设置工作流：",
        "id": 199,
        "type": "text"
      },
      {
        "page": 26,
        "length_tokens": 10,
        "text": "图片描述节点翻译节点text2image节点",
        "id": 200,
        "type": "text"
      },
      {
        "page": 26,
        "length_tokens": 0,
        "text": "",
        "id": 201,
        "type": "image"
      },
      {
        "page": 26,
        "length_tokens": 0,
        "text": "",
        "id": 202,
        "type": "image"
      },
      {
        "page": 27,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 203,
        "type": "text"
      },
      {
        "page": 28,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 204,
        "type": "text"
      },
      {
        "page": 28,
        "length_tokens": 7,
        "text": "TODO：智能客服ChatFlow ",
        "id": 205,
        "type": "text"
      },
      {
        "page": 28,
        "length_tokens": 22,
        "text": "设置3个分类：营销专员 $^ +$ 投诉专员 $^ +$ 其他",
        "id": 206,
        "type": "text"
      },
      {
        "page": 28,
        "length_tokens": 62,
        "text": "·营销专员：配置证券知识库，实现对证券产品介绍、交易规则等高频问题的自动化解答；·投诉专员：配置了用户行为数据，用户标签，方便进一步查找关于用户行为、资产等情况，给用户提供产品使用中的问题解答",
        "id": 207,
        "type": "text"
      },
      {
        "page": 28,
        "length_tokens": 0,
        "text": "",
        "id": 208,
        "type": "image"
      },
      {
        "page": 29,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 209,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 14,
        "text": "Step1，添加节点 $\\Rightarrow$ 问题分类器",
        "id": 210,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 14,
        "text": "选择模型：qwen-turbo-latest(Qwen3) ",
        "id": 211,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 8,
        "text": "分类1：营销咨询，证券知识",
        "id": 212,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 10,
        "text": "分类2：投诉处理，产品使用不成功",
        "id": 213,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 5,
        "text": "分类3：其他问题",
        "id": 214,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 52,
        "text": "Step2，添加知识检索 (针对分类1，设置下游节点)配置证券知识库 (该知识库需要先进行创建，再添加)查询变量 $\\mathbf { \\sigma } = \\mathbf { \\sigma }$ 开始中的query",
        "id": 215,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 3,
        "text": "B × ",
        "id": 216,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 1,
        "text": "日",
        "id": 217,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 4,
        "text": "知识检索 ",
        "id": 218,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 0,
        "text": "",
        "id": 219,
        "type": "image"
      },
      {
        "page": 29,
        "length_tokens": 5,
        "text": "获取证券相关知识 ",
        "id": 220,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 4,
        "text": "查询变量\\*",
        "id": 221,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 7,
        "text": "@开始／sys.query String ",
        "id": 222,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 4,
        "text": "知识库 \\*",
        "id": 223,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 5,
        "text": "召回设置+ ",
        "id": 224,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 0,
        "text": "",
        "id": 225,
        "type": "image"
      },
      {
        "page": 29,
        "length_tokens": 3,
        "text": "证券知识库",
        "id": 226,
        "type": "text"
      },
      {
        "page": 29,
        "length_tokens": 7,
        "text": "高质量·向量检索",
        "id": 227,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 228,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 7,
        "text": "创建知识库：证券知识库",
        "id": 229,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 3,
        "text": "上传文本文件",
        "id": 230,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 0,
        "text": "",
        "id": 231,
        "type": "image"
      },
      {
        "page": 30,
        "length_tokens": 16,
        "text": "选择对应的文件进行上传，可以是txt,pdf,或excel等格式",
        "id": 232,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 3,
        "text": "分段设置",
        "id": 233,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 0,
        "text": "",
        "id": 234,
        "type": "image"
      },
      {
        "page": 30,
        "length_tokens": 2,
        "text": "通用",
        "id": 235,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 18,
        "text": "通用文本分块模式，检索和召回的块是相同的",
        "id": 236,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 0,
        "text": "",
        "id": 237,
        "type": "image"
      },
      {
        "page": 30,
        "length_tokens": 4,
        "text": "文本预处理规则",
        "id": 238,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 2,
        "text": "√ ",
        "id": 239,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 16,
        "text": "替换掉连续的空格、换行符和制表符 ",
        "id": 240,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 7,
        "text": "删除所有URL和电子邮件地址",
        "id": 241,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 6,
        "text": "预览块 重置 ",
        "id": 242,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 4,
        "text": "父子分段",
        "id": 243,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 18,
        "text": "使用父子模式时，子块用于检索，父块用作上下文",
        "id": 244,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 3,
        "text": "索引方式",
        "id": 245,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 2,
        "text": "高质量",
        "id": 246,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 0,
        "text": "",
        "id": 247,
        "type": "image"
      },
      {
        "page": 30,
        "length_tokens": 1,
        "text": "经济",
        "id": 248,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 27,
        "text": "调用嵌入模型处理文档以实现更精确的检索，可以帮助LLM生成高质量的答案。",
        "id": 249,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 29,
        "text": "每个数据块使用10个关键词进行检索，不会消耗任何tokens，但会以降低检索准确性为代价。",
        "id": 250,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 19,
        "text": "！ 使用高质量模式进行嵌入后，无法切换回经济模式。",
        "id": 251,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 44,
        "text": "·分段标识：对于结构不佳的文本，上传前预设强分隔符（而非仅依赖回车），能大幅提升初始分段的语义完整性。",
        "id": 252,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 68,
        "text": "·长度与重叠的设置：最大长度需匹配模型处理窗口，有时小而精的分段（尤其问答型）优于大段落；重叠虽保留上下文但增加成本，常见平衡点是 $1 0 - 2 0 \\%$ 。",
        "id": 253,
        "type": "text"
      },
      {
        "page": 30,
        "length_tokens": 38,
        "text": "·索引模式的思考：“高质量\"模式理解复杂语义更优，适合专业内容，但模式切换成本高 (需整个知识库重索引)",
        "id": 254,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 255,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 2,
        "text": "Embedding模型",
        "id": 256,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 0,
        "text": "",
        "id": 257,
        "type": "image"
      },
      {
        "page": 31,
        "length_tokens": 6,
        "text": "text-embedding-v1 ",
        "id": 258,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 4,
        "text": "检索设置 ",
        "id": 259,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 21,
        "text": "了解更多关于检索方法，您可以随时在知识库设置中更改此设置。",
        "id": 260,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 0,
        "text": "",
        "id": 261,
        "type": "image"
      },
      {
        "page": 31,
        "length_tokens": 4,
        "text": "向量检索",
        "id": 262,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 21,
        "text": "通过生成查询嵌入并查询与其向量表示最相似的文本分段",
        "id": 263,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 4,
        "text": "Rerank模型",
        "id": 264,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 1,
        "text": "女",
        "id": 265,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 5,
        "text": "gte-rerank ",
        "id": 266,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 0,
        "text": "",
        "id": 267,
        "type": "image"
      },
      {
        "page": 31,
        "length_tokens": 2,
        "text": "E ",
        "id": 268,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 3,
        "text": "全文检索",
        "id": 269,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 27,
        "text": "索引文档中的所有词汇，从而允许用户查询任意词汇，并返回包含这些词汇的文本片段",
        "id": 270,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 0,
        "text": "",
        "id": 271,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 4,
        "text": "混合检索",
        "id": 272,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 2,
        "text": "推荐 ",
        "id": 273,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 42,
        "text": "同时执行全文检索和向量检索，并应用重排序步骤，从两类查询结果中选择匹配用户问题的最佳结果，用户可以选择设置权重或配置重新排序模型。",
        "id": 274,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 54,
        "text": "·Embedding模型选择：选定并索引后，若想更换 Embedding模型，整个知识库需重新向量化，成本高。模型质量直接决定后续向量检索和混合检索的语义理解上限。",
        "id": 275,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 64,
        "text": "· Rerank 是\"精炼器\"而非万能药：启用 Rerank 模型（如gte-rerank）能显著提升相关性排序，但也增加检索延迟和计算成本。并非所有场景都追求极致精度，需权衡。",
        "id": 276,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 32,
        "text": "·Score 阀值的设定：Score的选择因所选Embedding模型而异不存在通用\"最佳值\"，需针对性调优。",
        "id": 277,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 46,
        "text": "·全文检索的作用：它能精准命中向量检索可能遗漏的特定术语、代码片段或专有名词，是语义模糊匹配的有力补充。",
        "id": 278,
        "type": "text"
      },
      {
        "page": 31,
        "length_tokens": 56,
        "text": "·混合检索的\"融合艺术”：优势在于结合向量与全文，但效果好坏很大程度取决于结果的\"融合与重排序\"策略。Dify支持权重调整，为用户提供了个性化调优手段。",
        "id": 279,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 280,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 15,
        "text": "Step3，添加LLM (知识检索下游节点) ",
        "id": 281,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 12,
        "text": "模型： qwen-turbo-latest(Qwen3)",
        "id": 282,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 5,
        "text": "Sytem提示词：",
        "id": 283,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 21,
        "text": "使用以下上下文作为你所学习的知识，放在<context></context>XML标签内。",
        "id": 284,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 3,
        "text": "<context> ",
        "id": 285,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 6,
        "text": "{#context#}} ",
        "id": 286,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 4,
        "text": "</context> ",
        "id": 287,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 5,
        "text": "当回答用户时：",
        "id": 288,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 11,
        "text": "添加直接回复 (LLM节点下游节点）",
        "id": 289,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 0,
        "text": "",
        "id": 290,
        "type": "image"
      },
      {
        "page": 32,
        "length_tokens": 42,
        "text": "如果你不知道，就说你不知道。如果你不确定时不知道，寻求澄清。  \n避免提及你从上下文中获取的信息。  \n并根据用户问题的语言进行回答。",
        "id": 291,
        "type": "text"
      },
      {
        "page": 32,
        "length_tokens": 0,
        "text": "",
        "id": 292,
        "type": "image"
      },
      {
        "page": 32,
        "length_tokens": 21,
        "text": "针对于营销问题，直接从证券知识库中进行检索，让LLM进行推理回答",
        "id": 293,
        "type": "text"
      },
      {
        "page": 33,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 294,
        "type": "text"
      },
      {
        "page": 33,
        "length_tokens": 7,
        "text": "Step4，添加LLM节点",
        "id": 295,
        "type": "text"
      },
      {
        "page": 33,
        "length_tokens": 23,
        "text": "针对投诉处理，进行关键信息提取，方便后续从用户数据中提取相关信息",
        "id": 296,
        "type": "text"
      },
      {
        "page": 33,
        "length_tokens": 4,
        "text": "System提示词：",
        "id": 297,
        "type": "text"
      },
      {
        "page": 33,
        "length_tokens": 4,
        "text": "User提示词：",
        "id": 298,
        "type": "text"
      },
      {
        "page": 33,
        "length_tokens": 24,
        "text": "你是一个智能信息提取助手你的任务是从用户提供的文本中准确地提取以下信息：",
        "id": 299,
        "type": "text"
      },
      {
        "page": 33,
        "length_tokens": 8,
        "text": "@ 开始/{x} sys.query",
        "id": 300,
        "type": "text"
      },
      {
        "page": 33,
        "length_tokens": 78,
        "text": "1.user_id:用户的唯一标识符。  \n2.event_time:事件发生的时间，改成日期格式  \n3.event_type:事件类型，包括：查看持仓、浏览产品、搜索、登录、委托交易、推送点击、查看行情、集合竞价、咨询客服、风险警示、查看收益、浏览广告、推送未读。",
        "id": 301,
        "type": "text"
      },
      {
        "page": 33,
        "length_tokens": 51,
        "text": "请严格按照以下格式输出你提取到的信息，即user_id: {user_id},event_time: {event_time}, event_type: {event_type}如果某个信息在用户文本中没有找到，请将对应的值设为null",
        "id": 302,
        "type": "text"
      },
      {
        "page": 33,
        "length_tokens": 0,
        "text": "",
        "id": 303,
        "type": "text"
      },
      {
        "page": 34,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 304,
        "type": "text"
      },
      {
        "page": 34,
        "length_tokens": 8,
        "text": "Step5，添加知识检索节点",
        "id": 305,
        "type": "text"
      },
      {
        "page": 34,
        "length_tokens": 51,
        "text": "针对提取的用户信息（user_id,event_type,  \nevent_time）等，从数据表中进行检索  \n这里需要创建用户知识 （知识库），并添加  \n上传相关的Excel:  \nuser_behavior_event.xlsx  \nuser_tag.xlsx",
        "id": 306,
        "type": "text"
      },
      {
        "page": 34,
        "length_tokens": 0,
        "text": "",
        "id": 307,
        "type": "image"
      },
      {
        "page": 34,
        "length_tokens": 28,
        "text": "因为数据为Excel，建议采用混合检索，即语义 $^ +$ 关键词同时适当增加TopK的范围",
        "id": 308,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 309,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 22,
        "text": "Step6，设置LLM  \n基于前面检索出来的用户数据，进行回答  \n模型",
        "id": 310,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 13,
        "text": "qwen-turbo-latest(Qwen3) CHAT) ",
        "id": 311,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 10,
        "text": "上下文 $\\textcircled{3}$ ",
        "id": 312,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 10,
        "text": "四知识检索／result Array[Object]",
        "id": 313,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 9,
        "text": "USER $\\textcircled{3}$ ",
        "id": 314,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 14,
        "text": "15{x} 门 k1@ 开始/{x} sys.query",
        "id": 315,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 0,
        "text": "",
        "id": 316,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 33,
        "text": "将检索出来的用户数据，放到Prompt中进行推理，因为检索出来的数据可能不仅是该用户的，所以通过LLM进行筛选",
        "id": 317,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 4,
        "text": "System提示词：",
        "id": 318,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 4,
        "text": "#角色定位：",
        "id": 319,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 6,
        "text": "-专业投诉处理顾问",
        "id": 320,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 3,
        "text": "#背景：",
        "id": 321,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 16,
        "text": "需通过共情语言安抚客户情绪，积极解决问题。",
        "id": 322,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 13,
        "text": "需核查关键信息，确保问题准确定位。",
        "id": 323,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 4,
        "text": "#目标: ",
        "id": 324,
        "type": "text"
      },
      {
        "page": 35,
        "length_tokens": 116,
        "text": "1.回应话术：以共情安抚客户，表达积极解决态度。  \n2.反馈你从数据库中查询到的情况（你需要筛选使用与该用户user_id匹配的信息，并告诉用户相关的情况，说明具体的event_detail。与该user_id无关信息不要回答)  \n3.针对用户的问题给出建议  \n4.回答文字简洁，通常不超过200字  \n#以下是从用户数据库中检索出的信息，需要筛选对应的user_id数据{#context#}}",
        "id": 325,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 326,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 6,
        "text": "Step7，设置直接回复",
        "id": 327,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 12,
        "text": "将LLM推理的结果，回复给用户 ",
        "id": 328,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 2,
        "text": "0 ",
        "id": 329,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 2,
        "text": "直接回复",
        "id": 330,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 6,
        "text": "B .0. × ",
        "id": 331,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 3,
        "text": "添加描述..",
        "id": 332,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 7,
        "text": "回复LLM/{x} text",
        "id": 333,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 6,
        "text": "24 {x} □ ",
        "id": 334,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 6,
        "text": "对于分类3，即其他问题",
        "id": 335,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 11,
        "text": "回复：抱歉，这些问题我无法回答。",
        "id": 336,
        "type": "text"
      },
      {
        "page": 36,
        "length_tokens": 0,
        "text": "",
        "id": 337,
        "type": "image"
      },
      {
        "page": 36,
        "length_tokens": 0,
        "text": "",
        "id": 338,
        "type": "image"
      },
      {
        "page": 37,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 339,
        "type": "text"
      },
      {
        "page": 37,
        "length_tokens": 6,
        "text": "什么是竞价盘？",
        "id": 340,
        "type": "text"
      },
      {
        "page": 37,
        "length_tokens": 10,
        "text": "可以在上海证券交易所挂牌交易有哪些？",
        "id": 341,
        "type": "text"
      },
      {
        "page": 37,
        "length_tokens": 0,
        "text": "",
        "id": 342,
        "type": "image"
      },
      {
        "page": 37,
        "length_tokens": 70,
        "text": "竞价盘是指在证券竞价交易中，投资者提交的没有指定价格的买卖申报。这种申报会按照最终参考平衡价格进行撮合，并且在对盘时优先于竞价现价盘。未完成的竞价盘会在持续交易时段开始前自动取消。",
        "id": 343,
        "type": "text"
      },
      {
        "page": 37,
        "length_tokens": 1,
        "text": "引用",
        "id": 344,
        "type": "text"
      },
      {
        "page": 37,
        "length_tokens": 23,
        "text": "港股交易规则介绍.pdf +1根据相关规定，可以在上海证券交易所挂牌交易的证券包括：",
        "id": 345,
        "type": "text"
      },
      {
        "page": 37,
        "length_tokens": 0,
        "text": "",
        "id": 346,
        "type": "text"
      },
      {
        "page": 37,
        "length_tokens": 60,
        "text": "(一) 股票；  \n（二） 基金;  \n（三) 债券;  \n（四） 债券回购;  \n(五) 权证;  \n(六) 存托凭证;  \n(七) 经证监会批准的其他交易品种。",
        "id": 347,
        "type": "text"
      },
      {
        "page": 37,
        "length_tokens": 1,
        "text": "引用",
        "id": 348,
        "type": "text"
      },
      {
        "page": 37,
        "length_tokens": 7,
        "text": "上海证券交易所交易规则.pdf",
        "id": 349,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 9,
        "text": "CASE: 智能客服ChatFlow ",
        "id": 350,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 23,
        "text": "我的用户id:7501690985227960354，我在5月4日登录了软件但是没有成功",
        "id": 351,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 72,
        "text": "您好，关于您的用户ID：  \n7501690985227960354，我们查到您在5月4日10:05:00尝试通过\"面容ID登录\"，但系统未记录成功登录事件。建议检查设备面容ID是否正常，或尝试使用其他登录方式。如仍无法解决，请联系客服进一步协助。",
        "id": 352,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 1,
        "text": "引用",
        "id": 353,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 9,
        "text": "user_behavior_event.xlsx user_behavior_event.xlsx ",
        "id": 354,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 0,
        "text": "",
        "id": 355,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 3,
        "text": "#7 ",
        "id": 356,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 45,
        "text": "event time\":\"2025-05-04 10:05:0o\";\"event_type\":\"登录\";\"event_detail\":\"面容 ID登录\";\"user_id\":\"7501690985227960354\" ",
        "id": 357,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 12,
        "text": "107 3 d593c92 0.7 ",
        "id": 358,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 3,
        "text": "#14 ",
        "id": 359,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 73,
        "text": "event time\":\"2025-05-04   \n18:30:0o\";\"event_type\":\"登录\";\"event_detail\":\"密码   \n登录（上次登录7天   \n前）\";\"user_id\":\"7501690675818315816\"   \n114 $\\textcircled { < }$ 25 Ae8066df 0.63 ",
        "id": 360,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 3,
        "text": "#19 ",
        "id": 361,
        "type": "text"
      },
      {
        "page": 38,
        "length_tokens": 72,
        "text": "event time\":\"2025-05-04   \n09:30:0o\";\"event_type\":\"登录\";\"event_detail\":\"通过   \n手机验证码登   \n录\";\"user id\":\"7501691024880730112\"   \n110 （204号 $\\textcircled { < }$ 16 067c9da 0.62 ",
        "id": 362,
        "type": "text"
      },
      {
        "page": 39,
        "length_tokens": 9,
        "text": "打卡： 智能客服ChatFlow",
        "id": 363,
        "type": "text"
      },
      {
        "page": 39,
        "length_tokens": 10,
        "text": "使用chatFlow模式，设置意图识别",
        "id": 364,
        "type": "text"
      },
      {
        "page": 39,
        "length_tokens": 87,
        "text": "·营销咨询、证券知识：配置证券知识库，实现对证券产品介绍、交易规则等高频问题的自动化解答;  \n·投诉处理、产品使用不成功：配置了用户行为数据，用户标签，方便进一步查找关于用户行为、资产等情况，给用户提供产品使用中的问题解答  \n数据准备：  \n·证券知识库  \n·数据表:user_tag,user_behavior_event",
        "id": 365,
        "type": "text"
      },
      {
        "page": 40,
        "length_tokens": 9,
        "text": "CASE: 智能文档分析助手",
        "id": 366,
        "type": "text"
      },
      {
        "page": 41,
        "length_tokens": 9,
        "text": "CASE: 智能文档分析助手",
        "id": 367,
        "type": "text"
      },
      {
        "page": 41,
        "length_tokens": 7,
        "text": "CASE：智能文档分析助手",
        "id": 368,
        "type": "text"
      },
      {
        "page": 41,
        "length_tokens": 45,
        "text": "用户上传一份包含复杂图表、公式和多栏排版的科研论文PDF，望针对论文中的内容进行提问。Step1.在Dify中创建应用，比如：智能文档分析助手",
        "id": 369,
        "type": "text"
      },
      {
        "page": 41,
        "length_tokens": 9,
        "text": "Step2.集成Mineru作为工具",
        "id": 370,
        "type": "text"
      },
      {
        "page": 41,
        "length_tokens": 55,
        "text": "将 Mineru封装成一个Dify可以调用的工具。即将 Mineru 的核心功能（PDF 解析和内容提取）通过API暴露出来。  \n当用户上传 PDF文件时，Dify 应用会首先调用 Mineru工具。",
        "id": 371,
        "type": "text"
      },
      {
        "page": 41,
        "length_tokens": 9,
        "text": "Step3.Dify利用LLM进行回答",
        "id": 372,
        "type": "text"
      },
      {
        "page": 41,
        "length_tokens": 28,
        "text": "MinerU处理后的高质量文本被返回给Dify应用 $\\Rightarrow$ 作为上下文信息，传递给LLM",
        "id": 373,
        "type": "text"
      },
      {
        "page": 41,
        "length_tokens": 37,
        "text": "用户提问：论文中的实验结果有哪些？LLM 基于Mineru提取的文本内容，更准确地在文档上下文中找到相关知识，并进行回答。",
        "id": 374,
        "type": "text"
      },
      {
        "page": 42,
        "length_tokens": 9,
        "text": "CASE: 智能文档分析助手",
        "id": 375,
        "type": "text"
      },
      {
        "page": 42,
        "length_tokens": 13,
        "text": "Step1，设置用户上传的变量uploaded_pdf,user_question ",
        "id": 376,
        "type": "text"
      },
      {
        "page": 42,
        "length_tokens": 19,
        "text": "Step2，添加MinerU插件，解析用户的uploaded_pdf $\\Rightarrow$ 输出text",
        "id": 377,
        "type": "text"
      },
      {
        "page": 42,
        "length_tokens": 8,
        "text": "Step3，使用LLM进行回答",
        "id": 378,
        "type": "text"
      },
      {
        "page": 42,
        "length_tokens": 13,
        "text": "Step4，将LLM回答的结果，返回给用户 ",
        "id": 379,
        "type": "text"
      },
      {
        "page": 42,
        "length_tokens": 0,
        "text": "",
        "id": 380,
        "type": "image"
      },
      {
        "page": 43,
        "length_tokens": 9,
        "text": "CASE: 智能文档分析助手",
        "id": 381,
        "type": "text"
      },
      {
        "page": 43,
        "length_tokens": 8,
        "text": "Step1，设置用户上传的变量",
        "id": 382,
        "type": "text"
      },
      {
        "page": 43,
        "length_tokens": 6,
        "text": "变量名称：uploaded_pdf ",
        "id": 383,
        "type": "text"
      },
      {
        "page": 43,
        "length_tokens": 7,
        "text": "显示名称：请上传PDF文件",
        "id": 384,
        "type": "text"
      },
      {
        "page": 43,
        "length_tokens": 9,
        "text": "选择单文件类型，然后选择文档类型",
        "id": 385,
        "type": "text"
      },
      {
        "page": 43,
        "length_tokens": 15,
        "text": "变量名称：user_question显示名称：请输入您的问题最大长度：100",
        "id": 386,
        "type": "text"
      },
      {
        "page": 43,
        "length_tokens": 2,
        "text": "编辑变量",
        "id": 387,
        "type": "text"
      },
      {
        "page": 43,
        "length_tokens": 0,
        "text": "",
        "id": 388,
        "type": "text"
      },
      {
        "page": 43,
        "length_tokens": 0,
        "text": "",
        "id": 389,
        "type": "image"
      },
      {
        "page": 44,
        "length_tokens": 9,
        "text": "CASE: 智能文档分析助手",
        "id": 390,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 7,
        "text": "Step2，添加MinerU插件",
        "id": 391,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 6,
        "text": "这里使用MinerU官方API",
        "id": 392,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 10,
        "text": "Base URL: http://mineru.net/ ",
        "id": 393,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 13,
        "text": "令牌token获取 https://mineru.net/apiManage/token ",
        "id": 394,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 0,
        "text": "",
        "id": 395,
        "type": "image"
      },
      {
        "page": 44,
        "length_tokens": 4,
        "text": "Min Parse File ",
        "id": 396,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 3,
        "text": "添加描述...",
        "id": 397,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 3,
        "text": "设置授权 ",
        "id": 398,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 2,
        "text": "× ",
        "id": 399,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 22,
        "text": "配置凭据后，工作区中的所有成员都可以在编排应用程序时使用此工具。",
        "id": 400,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 8,
        "text": "MinerU服务的BaseURL \\*",
        "id": 401,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 6,
        "text": "https://mineru.net ",
        "id": 402,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 2,
        "text": "令牌",
        "id": 403,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 31,
        "text": "eyJ0eXBIljoiSldUliwiYWxnljoiSFM1MTlifQ.eyJqdGkiC ",
        "id": 404,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 2,
        "text": "如何获取",
        "id": 405,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 4,
        "text": "服务类型\\*",
        "id": 406,
        "type": "text"
      },
      {
        "page": 44,
        "length_tokens": 4,
        "text": "MinerU官方API",
        "id": 407,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 9,
        "text": "CASE: 智能文档分析助手",
        "id": 408,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 8,
        "text": "Step3， 使用LLM进行回答",
        "id": 409,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 7,
        "text": "模型：qwen-turbo ",
        "id": 410,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 4,
        "text": "SYSTEM提示词：",
        "id": 411,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 20,
        "text": "你是一个论文助手，下面是论文的全文，你需要基于用户的问题进行回答。",
        "id": 412,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 15,
        "text": "用户上传的论文： {x} Parse File/ {x} text",
        "id": 413,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 4,
        "text": "USER提示词：",
        "id": 414,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 8,
        "text": "@开始/{x}user_question ",
        "id": 415,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 17,
        "text": "Step4， 设置结束节点 output $= L L M$ 的输出text ",
        "id": 416,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 2,
        "text": "结束 ",
        "id": 417,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 4,
        "text": "1 … X ",
        "id": 418,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 3,
        "text": "添加描述...",
        "id": 419,
        "type": "text"
      },
      {
        "page": 45,
        "length_tokens": 0,
        "text": "",
        "id": 420,
        "type": "image"
      },
      {
        "page": 46,
        "length_tokens": 9,
        "text": "CASE: 智能文档分析助手",
        "id": 421,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 6,
        "text": "使用智能文档分析助手",
        "id": 422,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 12,
        "text": "上传INTERNVIDEO2.5.pdf，然后提问：",
        "id": 423,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 6,
        "text": "论文的实验结果怎么样？",
        "id": 424,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 3,
        "text": "Test Run ",
        "id": 425,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 9,
        "text": "输入 结果 详情 追踪 ",
        "id": 426,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 4,
        "text": "请上传PDF文件",
        "id": 427,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 0,
        "text": "",
        "id": 428,
        "type": "image"
      },
      {
        "page": 46,
        "length_tokens": 5,
        "text": "Test Run#1 ",
        "id": 429,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 0,
        "text": "",
        "id": 430,
        "type": "table"
      },
      {
        "page": 46,
        "length_tokens": 10,
        "text": "MinerU节点的运行时间相对较长",
        "id": 431,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 5,
        "text": "Min PARSEFILE ",
        "id": 432,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 8,
        "text": "2 m 43.154 s ",
        "id": 433,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 4,
        "text": "输入 □ K ",
        "id": 434,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 73,
        "text": "1 {   \n2 \"file\":{   \n3 \"dify_model_identity\": __dify__file_'   \n4 \"id\": null,   \n5 \"tenant_id\": \"90df0b3d-e3b0-4cfd-9150-044e98e98c cf\",   \n6 \"tvne\":\"dnrument\" ",
        "id": 435,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 1,
        "text": "输出",
        "id": 436,
        "type": "text"
      },
      {
        "page": 46,
        "length_tokens": 106,
        "text": "1 {  \n2 \"text\": \"# INTERNVIDEO2.5:EMPOWERING VIDEO MLLMS WITH LONGAND RICH CONTEXT MODELING \\n\\nYiWang\\*1，Xinhao \\$\\\\mathbf { L i }^$\\{ \\ * \\ 2$ 1 }\\$ ，Ziang \\$\\\\mathbf { Ya \\* 1 } }\\$ ，Yinan \\$\\\\mathbfH = 1 }}\\$ ，Jiashuo\\$l\\mathhf √}\\\\mathhf{ }>{",
        "id": 437,
        "type": "text"
      },
      {
        "page": 47,
        "length_tokens": 9,
        "text": "CASE: 智能文档分析助手",
        "id": 438,
        "type": "text"
      },
      {
        "page": 47,
        "length_tokens": 6,
        "text": "结束节点的输出结果：",
        "id": 439,
        "type": "text"
      },
      {
        "page": 47,
        "length_tokens": 162,
        "text": "\"output\":\"论文中的实验结果显示，InternVideo2.5在各种视频理解基准测试中达到了最先进的性能。具体来说，在大约7B模型规模的情况下，InternVideo2.5在多个短片和长片视频问答基准测试中几乎达到了领先地位。与基础模型InternVL2.5相比，InternVideo2.5无论是在短片还是长片预测上都有总体上的提升。特别是在处理短片时，InternVideo2.5在MVBench和Perception Test上的提升超过了3个百分点。对于长片视频的理解，虽然整体趋势仍在上升，但在不同的基准测试中变化有所不同。例如，在EgoSchema、MLVU和LVBench上的提",
        "id": 440,
        "type": "text"
      },
      {
        "page": 47,
        "length_tokens": 100,
        "text": "在上升，但在不同的基准测试中变化有所不同。例如，在EgoSchema、MLVU和LVBench上的提升较为显著，而在LongVideoBench和VideoMME(无子任务)上的提升相对较小。此外，InternVideo2.5还展示了增强的视觉能力，如物体跟踪等，证明了长且丰富的上下文（LRC）在提高基本视觉任务和高层次推理方面的有效性。\"",
        "id": 441,
        "type": "text"
      },
      {
        "page": 48,
        "length_tokens": 10,
        "text": "打卡： 智能文档分析助手",
        "id": 442,
        "type": "text"
      },
      {
        "page": 48,
        "length_tokens": 18,
        "text": "在Dify工作流中使用MinerU，对于用户上传的PDF进行精细解析",
        "id": 443,
        "type": "text"
      },
      {
        "page": 48,
        "length_tokens": 43,
        "text": "掌握MinerU插件使用  \nBase URL: http://mineru.net/  \n令牌token获取 https://mineru.net/apiManage/token  \n·将文档内容作为上下文，进行LLM回答",
        "id": 444,
        "type": "text"
      },
      {
        "page": 49,
        "length_tokens": 10,
        "text": "如何应用Agent API(Coze, Dify)",
        "id": 445,
        "type": "text"
      },
      {
        "page": 50,
        "length_tokens": 4,
        "text": "Coze API使用",
        "id": 446,
        "type": "text"
      },
      {
        "page": 51,
        "length_tokens": 42,
        "text": "cozepy 是 Coze平台官方提供的Python SDK，用于与Coze 智能体进行API交互。它支持同步和异步调用、流式输出、分页查询等功能",
        "id": 447,
        "type": "text"
      },
      {
        "page": 51,
        "length_tokens": 7,
        "text": "Step1. 获取 API Token ",
        "id": 448,
        "type": "text"
      },
      {
        "page": 51,
        "length_tokens": 44,
        "text": "· 访问 https://www.coze.cn/open/oauth/pats  \n登录账户  \n·创建个人访问令牌 (Personal Access Token)  \n·设置适当的权限和过期时间  \n复制生成的token",
        "id": 449,
        "type": "text"
      },
      {
        "page": 51,
        "length_tokens": 0,
        "text": "",
        "id": 450,
        "type": "table"
      },
      {
        "page": 52,
        "length_tokens": 4,
        "text": "cozepy工具",
        "id": 451,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 8,
        "text": "Step2.获取智能体ID ",
        "id": 452,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 7,
        "text": "1.进入智能体详情页面",
        "id": 453,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 50,
        "text": "2.从URL中提取智能体ID   \n比如   \nhttps://www.c0ze.cn/store/agent/7507272032905199655?   \nbot_id=true   \n智能体ID 就是7507272032905199655 ",
        "id": 454,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 32,
        "text": "coze.cn/store/agent/7507272032905199655?bot_id=true&bid=6gbvma4fk1g0b ",
        "id": 455,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 5,
        "text": "cystanford ",
        "id": 456,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 5,
        "text": "离离原上草",
        "id": 457,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 10,
        "text": "古诗词绘画Agent 12:17",
        "id": 458,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 4,
        "text": "开始调用工作流",
        "id": 459,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 40,
        "text": "“离离原上草”描绘出一幅广袤而充满生机的原野画面，以下从不同维度为你呈现其具体场景：",
        "id": 460,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 5,
        "text": "整体画面印象",
        "id": 461,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 118,
        "text": "在一片辽阔无垠的原野之上，视线所及之处，皆是连绵不绝的青草。它们肆意地生长着，与远处的天际线相接，形成了一幅宏大而又和谐的自然画卷。整个原野仿佛被一层绿色的绒毯所覆盖，在阳光的照耀下，闪烁着灵动的光芒，给人以生机勃勃、充满希望之感。",
        "id": 462,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 4,
        "text": "近景特写",
        "id": 463,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 151,
        "text": "蹲下身子靠近这些青草，能看到一株株草茎笔直而坚韧，从肥沃的土地中茁壮地挺立起来。草叶细长而翠绿，上面还挂着清晨的露珠，在阳光的折射下宛如晶莹剔透的珍珠，摇摇欲坠。微风拂过，草叶轻轻摇曳，相互摩挲，发出沙沙的声响，仿佛在低声诉说着生命的故事。每一片草叶都充满了生命力，它们努力地伸展着，向着天空汲取阳光和雨露",
        "id": 464,
        "type": "text"
      },
      {
        "page": 52,
        "length_tokens": 9,
        "text": "$\\circledcirc$ 停止响应",
        "id": 465,
        "type": "text"
      },
      {
        "page": 53,
        "length_tokens": 6,
        "text": "Step3.初始化客户端 ",
        "id": 466,
        "type": "text"
      },
      {
        "page": 53,
        "length_tokens": 20,
        "text": "import os   \nfrom cozepy import Coze, TokenAuth,   \nCOZE_CN_BASE_URL ",
        "id": 467,
        "type": "text"
      },
      {
        "page": 53,
        "length_tokens": 75,
        "text": "#配置参数 coze_api_token $\\mathbf { \\tau } = \\mathbf { \\tau }$ \"your_api_token_here\" coze_bot_id $\\mathbf { \\tau } = \\mathbf { \\tau }$ \"your_bot_id_here\" coze_api_base $\\mathbf { \\tau } = \\mathbf { \\tau }$ COZE_CN_BASE_URL ",
        "id": 468,
        "type": "text"
      },
      {
        "page": 53,
        "length_tokens": 51,
        "text": "#初始化客户端  \n$\\mathtt { c o z e } = \\mathtt { C o z e ( \\xi }$ auth $\\ c =$ TokenAuth(token=coze_api_token),base_url $\\ c =$ coze_api_base  \n）",
        "id": 469,
        "type": "text"
      },
      {
        "page": 53,
        "length_tokens": 16,
        "text": "普通聊天：使用‘create_and_poli可以简化非流式聊天",
        "id": 470,
        "type": "text"
      },
      {
        "page": 53,
        "length_tokens": 84,
        "text": "from cozepy import ChatStatus   \n# 普通聊天示例   \nchat_poll $\\mathbf { \\tau } = \\mathbf { \\tau }$ coze.chat.create_and_poll( bot_id $\\ c =$ \"your_bot_id\", user_id=\"user_123\", additional_messages $\\ c =$ [Message.build_user_question_text(\"你好   \n\")]   \n）   \nif chat_poll.chat.status $\\scriptstyle = =$ ChatS",
        "id": 471,
        "type": "text"
      },
      {
        "page": 53,
        "length_tokens": 51,
        "text": "\nif chat_poll.chat.status $\\scriptstyle = =$ ChatStatus.COMPLETED: for message in chat_poll.messages: if message.role $\\scriptstyle = =$ \"assistant\" and message.content: print(f\"智能体回复: {message.content}\") ",
        "id": 472,
        "type": "text"
      },
      {
        "page": 54,
        "length_tokens": 4,
        "text": "cozepy工具",
        "id": 473,
        "type": "text"
      },
      {
        "page": 54,
        "length_tokens": 6,
        "text": "流式聊天 (推荐)",
        "id": 474,
        "type": "text"
      },
      {
        "page": 54,
        "length_tokens": 20,
        "text": "from cozepy import Coze, TokenAuth,Message, ChatEventType, MessageContentType ",
        "id": 475,
        "type": "text"
      },
      {
        "page": 54,
        "length_tokens": 64,
        "text": "#流式聊天示例   \nfor event in coze.chat.stream( bot_id $= ^ { 1 }$ 'your_bot_id\", user_id $\\ c =$ \"user_123\",   \nadditional_messages $\\ c =$ [Message.build_user_question_text(\"   \n你好，请介绍一下你自己\")]   \n）： ",
        "id": 476,
        "type": "text"
      },
      {
        "page": 54,
        "length_tokens": 64,
        "text": "if event.event $\\scriptstyle = =$ ChatEventType.CONVERSATION_MESSAGE_DELTA: if (hasattr(event.message,'content') and event.message.content and hasattr(event.message.content, 'type') and event.message.content.type $\\scriptstyle = =$ MessageContentType.TEXT): print(event.message.content.text, end $\\ c",
        "id": 477,
        "type": "text"
      },
      {
        "page": 54,
        "length_tokens": 59,
        "text": ".TEXT): print(event.message.content.text, end $\\ c =$ \"\",flush $\\ c =$ True) elif isinstance(event.message.content, str): print(event.message.content, end $\\ c =$ \"\",flush $\\mathbf { \\tau } = \\mathbf { \\dot { \\tau } }$ True) ",
        "id": 478,
        "type": "text"
      },
      {
        "page": 55,
        "length_tokens": 13,
        "text": "CASE: 古诗词绘画 (Coze API) ",
        "id": 479,
        "type": "text"
      },
      {
        "page": 55,
        "length_tokens": 46,
        "text": "TO DO: 古诗词绘画Coze APl（Python客户端）基于cozepy库开发Coze 智能体Step1.在‘config.py'文件中配置Coze APl信息：",
        "id": 480,
        "type": "text"
      },
      {
        "page": 55,
        "length_tokens": 84,
        "text": "# Coze APi 配置 COZE_API_TOKEN $\\mathbf { \\sigma } = \\mathbf { \\sigma }$ \"您的_Coze_API_Token\" COZE_BOT_ $| \\mathsf { D } = \"$ 您的_智能体_ID\" COZE_CN_BASE_URL $\\mathbf { \\tau } = \\mathbf { \\tau }$ \"https://api.coze.cn\" ",
        "id": 481,
        "type": "text"
      },
      {
        "page": 55,
        "length_tokens": 9,
        "text": "Step2.设置流式接收回复",
        "id": 482,
        "type": "text"
      },
      {
        "page": 55,
        "length_tokens": 22,
        "text": "for chunk in client.chat_stream(\"离离原上草\"): print(chunk, end=\"\", flush=True) ",
        "id": 483,
        "type": "text"
      },
      {
        "page": 55,
        "length_tokens": 47,
        "text": "Coze智能体交互式聊天启动！输入‘quit'或‘exit'退出程序输入‘stream’切换到流式模式输入‘normal’切换到普通模式输入 'info'查看智能体信息",
        "id": 484,
        "type": "text"
      },
      {
        "page": 55,
        "length_tokens": 66,
        "text": "Coze客户端初始化成功API地址: https://api.coze.cn智能体ID: 7507272032905199655智能体名称：古诗词绘画Agent智能体描述：古诗词绘画Agent[普通]请输入您的问题：stream$\\boxtimes$ 已切换到流式模式",
        "id": 485,
        "type": "text"
      },
      {
        "page": 55,
        "length_tokens": 0,
        "text": "",
        "id": 486,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 13,
        "text": "CASE: 古诗词绘画 (Coze API) ",
        "id": 487,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 20,
        "text": "[流式］请输入您的问题：离离原上草用户：离离原上草",
        "id": 488,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 0,
        "text": "",
        "id": 489,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 47,
        "text": "$\\ast$ 智能体：开始调用工作流“离离原上草\"描绘出一幅生动且富有生命力的草原画面，以下从不同角度为你详细描述：",
        "id": 490,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 6,
        "text": "### 整体印象",
        "id": 491,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 84,
        "text": "在广袤无垠的大地上，一片连绵起伏的草原映入眼帘。目之所及，皆是随风摇曳的青草，它们像是大地铺开的绿色绒毯，一直 延伸到天际，与湛蓝的天空相接，形成了一幅壮阔而和谐的自然画卷。",
        "id": 492,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 6,
        "text": "### 近景特写",
        "id": 493,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 132,
        "text": "凑近细看，每一株草都充满着勃勃生机。它们茎干细长而坚韧，从土地中挺拔而出，大约有半人多高。叶片狭长而翠绿，上面 还挂着清晨的露珠，在阳光的映照下，宛如晶莹剔透的珍珠，闪烁着细碎的光芒。微风拂过，草叶相互摩挲，发出沙沙的声响，仿佛在轻声诉说着生命的故事。",
        "id": 494,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 5,
        "text": "### 中景展现",
        "id": 495,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 129,
        "text": "视野稍微拉远一些，可以看到草原上的草一丛接着一丛，紧密而有序地生长着。它们高低错落，有的草尖微微弯曲，像是在向 大地致敬；有的则昂首挺立，尽情享受着阳光的照耀。草丛中偶尔夹杂着一些不知名的野花，红的、黄的、紫的，星星点点地 散布其中，为这片绿色的海洋增添了一抹绚丽的色彩。",
        "id": 496,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 7,
        "text": "### 远景概览 ",
        "id": 497,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 134,
        "text": "站在高处眺望，整个草原就像一片绿色的波涛，连绵不绝。草原的边缘与远处的山峦相连，青山与绿草相互映衬，构成了一幅 如诗如画的美景。天空中，洁白的云朵悠悠飘荡，与地上的青草相互呼应，让人心旷神怡。偶尔有一群牛羊在草原上悠闲地吃草，它们的身影点缀在这片绿色之中，更增添了一份宁静与祥和。",
        "id": 498,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 71,
        "text": "“离离原上草\"所描绘的画面，不仅展现了大自然的壮美与生机，也让人感受到了生命的顽强与不息。Acient china \"The lush grass on the plain\" depicts a vivid and vibrant grassland scene.The following provides a detailed description from different perspectives: ",
        "id": 499,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 4,
        "text": "### Overall Impression ",
        "id": 500,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 67,
        "text": "On the vast and boundless land,a rolling grassland comes into view.As far as the eye can see， there are gr en grasses swaying in the wind.They are like a green carpet spread out by the earth，stretching all the wa y to the horizon and meeting the deep - blue sky， forming a magnificent and harmonious ",
        "id": 501,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 13,
        "text": " - blue sky， forming a magnificent and harmonious natural picture. ",
        "id": 502,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 6,
        "text": "### Close - up View ",
        "id": 503,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 67,
        "text": "Taking acloser look，each blade of grass is full of vitality. Their stems are slender and tough，standing u pright from the soil，about half a person's height.The leaves are long， narrow and emerald - green，with th e morning dew still hanging on them.In the sunlight， they are like glittering pearls， tw",
        "id": 504,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 51,
        "text": " the sunlight， they are like glittering pearls， twinkling with tiny r ays of light. When the gentle breeze blows， the grass leaves rub against each other， making a rustling sound ，as if softly telling the story of life. ",
        "id": 505,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 67,
        "text": "### Medium - distance View   \nPulling the view back a bit，one can see that the grass on the prairie grows in clusters，closely and orderl upright，fully enjoying the sunlight.Occasionally，there are some unknown wildflowers mixed among the gras   \nS clusters.Red，yellow，and purple，they are scattered her",
        "id": 506,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 27,
        "text": "sters.Red，yellow，and purple，they are scattered here and there，adding a splash of gorgeous color to this green ocean. ",
        "id": 507,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 5,
        "text": "### Distant View ",
        "id": 508,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 62,
        "text": "Looking out froma high place，the entire grassland is like a continuous green wave.The edge of the grassla nd is conected to the distant mountains.The green mountains and the lush grass complement each other，form ing a picturesque scenery.In the sky， white clouds float leisurely，echoing the grass on ",
        "id": 509,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 55,
        "text": "white clouds float leisurely，echoing the grass on the ground，making people feel relaxed and happy.Occasionally，a group of cattle and sheep are grazing leisurely on the grass land.Their figures are dotted in this green expanse，adding more tranquility and peace. ",
        "id": 510,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 55,
        "text": "The picture depicted by \"The lush grasson the plain\" not only shows the grandeur and vitality of nature but also makes people feel the tenacity and endlessness of life.![The image](https://s.coze.cn/t/lThZvuoyR_o/) ",
        "id": 511,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 25,
        "text": "根据你提供的古诗词“离离原上草\"，我已经完成绘画并展示了图像。",
        "id": 512,
        "type": "text"
      },
      {
        "page": 56,
        "length_tokens": 0,
        "text": "",
        "id": 513,
        "type": "image"
      },
      {
        "page": 57,
        "length_tokens": 7,
        "text": "打卡：Coze API调用",
        "id": 514,
        "type": "text"
      },
      {
        "page": 57,
        "length_tokens": 17,
        "text": "找到你之前完成的Coze智能体，比如：古诗词绘画Agent",
        "id": 515,
        "type": "text"
      },
      {
        "page": 57,
        "length_tokens": 11,
        "text": "掌握cozepy工具使用调用Coze API",
        "id": 516,
        "type": "text"
      },
      {
        "page": 57,
        "length_tokens": 54,
        "text": "Step1.获取APIToken  \nStep2.获取智能体ID  \nStep3.初始化客户端  \nStep4.使用普通聊天或者流式聊天进行对话  \n可以在Coze智能体中，添加输出节点，增加交互的体验感",
        "id": 517,
        "type": "text"
      },
      {
        "page": 58,
        "length_tokens": 4,
        "text": "Dify API使用",
        "id": 518,
        "type": "text"
      },
      {
        "page": 59,
        "length_tokens": 4,
        "text": "Dify API使用",
        "id": 519,
        "type": "text"
      },
      {
        "page": 59,
        "length_tokens": 22,
        "text": "API密钥(APIKey):每个应用都会生成一个或多个API密钥，用于身份验证。",
        "id": 520,
        "type": "text"
      },
      {
        "page": 59,
        "length_tokens": 15,
        "text": "APIBaseURL:每个应用都有一个基础的API访问地址。",
        "id": 521,
        "type": "text"
      },
      {
        "page": 59,
        "length_tokens": 29,
        "text": "API端点(Endpoints):Dify为不同类型的应用和操作提供了不同的 API端点。最常见的包括：",
        "id": 522,
        "type": "text"
      },
      {
        "page": 59,
        "length_tokens": 21,
        "text": "·聊天(ChatMessages):用于与对话型应用进行交互，发送消息并获取回复。",
        "id": 523,
        "type": "text"
      },
      {
        "page": 59,
        "length_tokens": 26,
        "text": "·文本补全(Completion Messages):用于与文本生成类应用进行交互，提供输入并获取生成的文本。",
        "id": 524,
        "type": "text"
      },
      {
        "page": 59,
        "length_tokens": 30,
        "text": "·工作流执行(Workflow Execution):如果应用是基于工作流构建的，可以通过APl触发工作流并获取结果。",
        "id": 525,
        "type": "text"
      },
      {
        "page": 59,
        "length_tokens": 11,
        "text": "Thinking: 如何创建Dify应用的API Key?",
        "id": 526,
        "type": "text"
      },
      {
        "page": 59,
        "length_tokens": 4,
        "text": "API密钥 ",
        "id": 527,
        "type": "text"
      },
      {
        "page": 59,
        "length_tokens": 29,
        "text": "如果不想你的API被滥用，请保护好你的APIKey:)最佳实践是避免在前端代码中明文引用。",
        "id": 528,
        "type": "text"
      },
      {
        "page": 59,
        "length_tokens": 28,
        "text": "进入应用 $\\Rightarrow$ 访问 $\\mathsf { A P l } \\Rightarrow$ 右上角API秘钥 ",
        "id": 529,
        "type": "text"
      },
      {
        "page": 60,
        "length_tokens": 4,
        "text": "DifyAPI使用",
        "id": 530,
        "type": "text"
      },
      {
        "page": 60,
        "length_tokens": 37,
        "text": "F— dify_agent_client.py #主要客户端类├— dify_workflow_example.py #工作流示例F— requirements.txt #依赖包README.md #使用说明",
        "id": 531,
        "type": "text"
      },
      {
        "page": 60,
        "length_tokens": 39,
        "text": "dify_agent_client.py使用了difyapi的封装，方便用于其他项目  \ndify_workflow_example.py 实现了LLM联网搜索的workflow调用，用于演示",
        "id": 532,
        "type": "text"
      },
      {
        "page": 60,
        "length_tokens": 9,
        "text": "客户端类 (DifyAgentClient) ",
        "id": 533,
        "type": "text"
      },
      {
        "page": 60,
        "length_tokens": 89,
        "text": "class DifyAgentClient: def __init__(self, base_url: str,api_key: str): self.base_url $\\mathbf { \\tau } = \\mathbf { \\tau }$ base_url.rstrip('/\") self.api_key $\\mathbf { \\tau } = \\mathbf { \\tau }$ api_key self.headers $= \\{$ 'Authorization': f'Bearer {api_key}' 'Content-Type': 'application/json', 'Acc",
        "id": 534,
        "type": "text"
      },
      {
        "page": 60,
        "length_tokens": 20,
        "text": "api_key}' 'Content-Type': 'application/json', 'Accept': 'application/json' } ",
        "id": 535,
        "type": "text"
      },
      {
        "page": 60,
        "length_tokens": 29,
        "text": "存储Dify服务器地址和API密钥  \n构建HTTP请求头，使用BearerToken认证  \n统一管理API调用的基础配置",
        "id": 536,
        "type": "text"
      },
      {
        "page": 61,
        "length_tokens": 4,
        "text": "Dify API使用",
        "id": 537,
        "type": "text"
      },
      {
        "page": 61,
        "length_tokens": 5,
        "text": "智能应用类型检测 ",
        "id": 538,
        "type": "text"
      },
      {
        "page": 61,
        "length_tokens": 43,
        "text": "def chat_completion(self, user_input: str, app_type: str $\\mathbf { \\tau } = \\mathbf { \\tau }$ \"auto\"): if app_type $\\scriptstyle = =$ \"auto\": ",
        "id": 539,
        "type": "text"
      },
      {
        "page": 61,
        "length_tokens": 45,
        "text": "#1.先尝试聊天端点 result $\\mathbf { \\tau } = \\mathbf { \\tau }$ self._try_chat_endpoint.(...) if \"not_chat_app\" in result.get(\"message\",\"\"): ",
        "id": 540,
        "type": "text"
      },
      {
        "page": 61,
        "length_tokens": 45,
        "text": "#2.再尝试完成端点 result $\\mathbf { \\tau } = \\mathbf { \\tau }$ self._try_completion_endpoint.(...) if \"app_unavailable\" in result.get(\"message\",\"\"): ",
        "id": 541,
        "type": "text"
      },
      {
        "page": 61,
        "length_tokens": 19,
        "text": "#3.最后尝试工作流端点return self._try_workflow_endpoint(..)",
        "id": 542,
        "type": "text"
      },
      {
        "page": 61,
        "length_tokens": 4,
        "text": "核心逻辑：",
        "id": 543,
        "type": "text"
      },
      {
        "page": 61,
        "length_tokens": 45,
        "text": "·自动检测机制：按照聊天→完成→工作流的顺序尝试·错误驱动检测：根据特定错误码判断应用类型·容错设计：一个端点失败自动尝试下一个",
        "id": 544,
        "type": "text"
      },
      {
        "page": 62,
        "length_tokens": 10,
        "text": "Dify API端点 (聊天应用) ",
        "id": 545,
        "type": "text"
      },
      {
        "page": 62,
        "length_tokens": 100,
        "text": "1.聊天应用 API (/chat-messages')   \ndef_try_chat_endpoint(self, user_input: str, user_id: str,   \nconversation_id: Optional[str], stream: bool): url $\\mathbf { \\tau } = \\mathbf { \\tau }$ f\"{self.base_url}/chat-messages\" $\\mathsf { p a y l o a d } = \\left\\{ \\begin{array} { l l } { \\begin{array} { r l r }",
        "id": 546,
        "type": "text"
      },
      {
        "page": 62,
        "length_tokens": 98,
        "text": "\\{ \\begin{array} { l l } { \\begin{array} { r l r } \\end{array} } \\end{array} \\right.$ \"inputs\": {, #空输入对象 \"query\": user_input, #用户消息 \"response_mode\": \"streaming\" if stream else \"blocking\", \"user\": user_id } if conversation_id: payload[\"conversation_id\"] $\\mathbf { \\tau } = \\mathbf { \\tau }$ conversa",
        "id": 547,
        "type": "text"
      },
      {
        "page": 62,
        "length_tokens": 24,
        "text": "d\"] $\\mathbf { \\tau } = \\mathbf { \\tau }$ conversation_id #维持对记 ",
        "id": 548,
        "type": "text"
      },
      {
        "page": 62,
        "length_tokens": 3,
        "text": "API特点：",
        "id": 549,
        "type": "text"
      },
      {
        "page": 62,
        "length_tokens": 30,
        "text": "·支持多轮对话（通过conversation_id）·用户输入通过\\`query字段传递：支持流式和阻塞式响应",
        "id": 550,
        "type": "text"
      },
      {
        "page": 63,
        "length_tokens": 9,
        "text": "Dify API端点 (完成应用)",
        "id": 551,
        "type": "text"
      },
      {
        "page": 63,
        "length_tokens": 101,
        "text": "2.完成应用 APl (/completion-messages\")   \ndef_try_completion_endpoint(self, user_input: str, user_id: str,   \nstream: bool): url $\\mathbf { \\tau } = \\mathbf { \\tau }$ f\"{self.base_url}/completion-messages\" $\\mathsf { p a y l o a d } = \\left\\{ \\begin{array} { l l } { \\begin{array} { r l r } \\end{array} }",
        "id": 552,
        "type": "text"
      },
      {
        "page": 63,
        "length_tokens": 67,
        "text": "y} { l l } { \\begin{array} { r l r } \\end{array} } \\end{array} \\right.$ \"inputs\": 0, #空对象（官方文档格式） \"response_mode\": \"streaming\" if stream else \"blocking\", \"user\": user_id } ",
        "id": 553,
        "type": "text"
      },
      {
        "page": 63,
        "length_tokens": 3,
        "text": "API特点：",
        "id": 554,
        "type": "text"
      },
      {
        "page": 63,
        "length_tokens": 23,
        "text": "单次完成任务，不维持对话状态inputs通常为空对象适用于文本生成、翻译等任务",
        "id": 555,
        "type": "text"
      },
      {
        "page": 64,
        "length_tokens": 10,
        "text": "Dify API端点 (工作流应用)",
        "id": 556,
        "type": "text"
      },
      {
        "page": 64,
        "length_tokens": 107,
        "text": "3.工作流应用 API (/workflows/run')   \ndef_try_workflow_endpoint(self,user_input: str, user_id: str,   \nstream: bool): url $\\mathbf { \\tau } = \\mathbf { \\tau }$ f\"{self.base_url}/workflows/run\" $\\mathsf { p a y l o a d } = \\left\\{ \\begin{array} { l l } { \\begin{array} { r l r } \\end{array} } \\end{array} \\",
        "id": 557,
        "type": "text"
      },
      {
        "page": 64,
        "length_tokens": 58,
        "text": "begin{array} { r l r } \\end{array} } \\end{array} \\right.$ \"inputs\": {\"query\": user_input},#工作流输入参数 \"response_mode\": \"streaming\" if stream else \"blocking\", \"user\": user_id } ",
        "id": 558,
        "type": "text"
      },
      {
        "page": 64,
        "length_tokens": 3,
        "text": "API特点：",
        "id": 559,
        "type": "text"
      },
      {
        "page": 64,
        "length_tokens": 25,
        "text": "必须先发布工作流才能调用输入参数通过\\`inputs'对象传递·支持复杂的业务逻辑处理",
        "id": 560,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 10,
        "text": "Dify API端点 (工作流应用)",
        "id": 561,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 6,
        "text": "工作流调用示例：",
        "id": 562,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 81,
        "text": "def simple_workflow_example():#配置信息BASE_URL $\\mathbf { \\sigma } = \\mathbf { \\sigma }$ \"你的Dify URL\"API_KEY $\\mathbf { \\tau } = \\mathbf { \\tau }$ \"你的API KEY\"#创建客户端client $\\mathbf { \\tau } = \\mathbf { \\tau }$ DifyAgentClient(BASE_URL, API_KEY)",
        "id": 563,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 68,
        "text": "# 调用工作流  \nuser_input $\\mathbf { \\sigma } = \\mathbf { \\sigma }$ \"黄金价格和哪些因素有关\"  \nresult $\\mathbf { \\tau } = \\mathbf { \\tau }$ client.run_workflow(inputs $\\ c =$ {\"input\": user_input},user_id=\"demo_user\"  \n）",
        "id": 564,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 15,
        "text": "工作流回复：### 总结整理：影响黄金价格的关键因素",
        "id": 565,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 18,
        "text": "####1．\\*\\*宏观经济因素 $^ { * * }$ ",
        "id": 566,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 70,
        "text": "：\\*\\*经济衰退与金融危机 $^ { * * }$ ：历史上的经济衰退（如2008年金融危机或2019年的新冠疫情）通常会导致黄金价格大幅上涨。投资者倾向于在经济危机时转向黄金以寻求避险。",
        "id": 567,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 47,
        "text": "- \\*\\*贸易战与地缘政治冲突\\*\\*：例如中美贸易战等政治紧张局势，往往促使投资者将资金转向黄金，以获得更稳定的资产保值",
        "id": 568,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 55,
        "text": "\\*\\*美元汇率 $^ { * * }$ ：美元是全球主要储备货币，其强弱直接影响黄金价格。美元走强时，黄金价格通常走弱；反之，美元疲软时，黄金价格趋于上涨。",
        "id": 569,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 24,
        "text": "#### 2，\\*\\*通货膨胀与利率 $^ { * * }$ ",
        "id": 570,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 47,
        "text": "－\\*\\*通货膨胀\\*\\*：通胀率较高时，持有现金的风险增大，黄金作为抗通胀工具的价值凸显，推动黄金价格上涨。",
        "id": 571,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 72,
        "text": "\\*\\*利率 $^ { * * }$ ：低利率环境下，黄金的投资吸引力增强，因为持有黄金的机会成本较低。而利率升高时，黄金的投资价值会下降，因投资者更倾向于选择收益更高的资产（如储蓄账户或债券）。",
        "id": 572,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 18,
        "text": "#### 3，\\*\\*石油价格 $^ { * * }$ ",
        "id": 573,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 38,
        "text": "－石油价格上涨通常伴随通胀压力，从而推动黄金价格上涨。石油作为重要的能源资源，其价格波动对全球经济有显著影响。",
        "id": 574,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 19,
        "text": "#### 4．\\*\\*黄金供需关系 $^ { * * }$ ",
        "id": 575,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 93,
        "text": "。\\*\\*供给\\*\\*：全球黄金产量较为稳定，约每年3500吨。矿工罢工或新技术应用等因素可能导致供给减少，从而推高金价。  \n-\\*\\*需求 $^ { * * }$ ：黄金需求主要来自首饰、工业用途、投资和央行购金。其中，投资需求和央行购金是决定黄金需求的关键因素。",
        "id": 576,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 23,
        "text": "#### 5. $* *$ 避险属性与资产配置 $^ { * * }$ ",
        "id": 577,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 53,
        "text": "-\\*\\*避险资产 $^ { * * }$ ：黄金因其稀缺性和稳定性，常被视为避险资产。在地缘政治动荡、战争或金融危机时，黄金价格往往会上涨。",
        "id": 578,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 29,
        "text": "－\\*\\*资产配置\\*\\*：投资者在资产组合中加入黄金可以实现多元化，降低整体投资风险。",
        "id": 579,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 18,
        "text": "####6．\\*\\*历史与文化因素 $^ { * * }$ ",
        "id": 580,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 86,
        "text": "－\\*\\*文化与传统 $^ { * * }$ ：许多国家和地区（如中国）将黄金视为财富储存和身份象征，这进一步支撑了黄金的需求。  \n－\\*\\*历史经验 $^ { * * }$ ：历史上黄金与通胀密切相关，其生产成本逐年增加，这也为金价提供了长期支撑。",
        "id": 581,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 18,
        "text": "#### 7．\\*\\*全球市场动态 $^ { * * }$ ",
        "id": 582,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 45,
        "text": "-\\*\\*黄金市场参与者 $^ { * * }$ ：包括银行、黄金生产企业、对冲基金、私人投资者等，他们根据市场情绪调整黄金头寸，导致价格波动。",
        "id": 583,
        "type": "text"
      },
      {
        "page": 65,
        "length_tokens": 65,
        "text": "-\\*\\*黄金定价中心 $^ { * * }$ ：全球三大黄金交易中心（伦敦、纽约、上海）共同影响黄金价格。伦敦市场主要提供现货价格参考，纽约市场反映期货价格，而上海黄金交易所则逐渐提升其国际影响力。",
        "id": 584,
        "type": "text"
      },
      {
        "page": 66,
        "length_tokens": 7,
        "text": "打卡：Dify API调用",
        "id": 585,
        "type": "text"
      },
      {
        "page": 66,
        "length_tokens": 15,
        "text": "找到你之前完成的Dify智能体，比如：LLM联网搜索",
        "id": 586,
        "type": "text"
      },
      {
        "page": 66,
        "length_tokens": 58,
        "text": "了解Dify的三种API端点类型  \n聊天应用APl(/chat-messages\\`)  \n完成应用APl(/completion-messages\\`)  \n工作流应用APl (//workflows/run\\`)可以对智能体应用类型进行智能检测调用Dify API",
        "id": 587,
        "type": "text"
      },
      {
        "page": 66,
        "length_tokens": 2,
        "text": "善 ",
        "id": 588,
        "type": "text"
      },
      {
        "page": 67,
        "length_tokens": 8,
        "text": "Thank You Using data to solve problems ",
        "id": 589,
        "type": "text"
      }
    ]
  }
}